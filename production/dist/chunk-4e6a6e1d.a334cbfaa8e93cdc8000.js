(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e6a6e1d"],{"24f4":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit_custom_class"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"栏目名称"}},[a("el-input",{attrs:{placeholder:"请输入栏目名称",clearable:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"频道名称"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"请选择频道"},model:{value:t.form.channel_id,callback:function(e){t.$set(t.form,"channel_id",e)},expression:"form.channel_id"}},t._l(t.channelData,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"客户定制分类"}},[a("el-select",{attrs:{placeholder:"一级分类",clearable:""},model:{value:t.form.first_category_id,callback:function(e){t.$set(t.form,"first_category_id",e)},expression:"form.first_category_id"}},t._l(t.CusClassData.first_category,(function(t,e){return a("el-option",{key:e,attrs:{label:t.category_name,value:t.category_id}})})),1),a("el-select",{staticStyle:{"margin-left":"10px"},attrs:{placeholder:"二级分类",clearable:""},model:{value:t.form.second_category_id,callback:function(e){t.$set(t.form,"second_category_id",e)},expression:"form.second_category_id"}},t._l(t.CusClassData.second_category,(function(t,e){return a("el-option",{key:e,attrs:{label:t.category_name,value:t.category_id}})})),1)],1),a("el-form-item",[a("base-btn",{attrs:{size:"big"},nativeOn:{click:function(e){return t.search(e)}}},[t._v("查询")]),a("base-btn",{attrs:{size:"big"},nativeOn:{click:function(e){return t.clear(e)}}},[t._v("清除")])],1)],1),a("div",{staticClass:"total"},[t._v("当前条件下共"+t._s(t.total)+"条数据")]),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.CustomClassList.list,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"栏目名称"}}),a("el-table-column",{attrs:{prop:"channel_name",label:"频道名称"}}),a("el-table-column",{attrs:{prop:"first_category_name",label:"一级分类"}}),a("el-table-column",{attrs:{prop:"second_category_name",label:"二级分类"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("base-btn",{attrs:{type:"text"},nativeOn:{click:function(a){return t.editCustomClass(e.row)}}},[t._v("编辑客户定制分类")])]}}])})],1)],1),a("div",{staticClass:"page-list"},[a("base-pag",{attrs:{total:t.total,limit:t.limit,page:t.page},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1),a("EditCustom",{ref:"EditCustom",attrs:{show:t.EditCustomShow},on:{close:t.close}})],1)},i=[],o=a("1c03"),n=(a("053b"),a("e18c"),a("08ba"),a("fe8a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-dialog",{attrs:{show:t.show,title:t.dialogsObj.title,width:t.dialogsObj.width,center:t.dialogsObj.center},on:{close:t.close}},[a("div",{staticClass:"edit_custom"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"栏目:"}},[a("div",[t._v(t._s(t.name))])]),a("el-form-item",{attrs:{label:"一级分类:"}},[a("el-radio-group",{model:{value:t.form.first_category_id,callback:function(e){t.$set(t.form,"first_category_id",e)},expression:"form.first_category_id"}},t._l(t.CusClassData.first_category,(function(e){return a("el-radio",{key:e.category_id,staticStyle:{"margin-top":"15px"},attrs:{label:e.category_id},nativeOn:{click:function(a){return a.preventDefault(),t.clickitem(e.category_id,"first_category_id")}}},[t._v(" "+t._s(e.category_name)+" ")])})),1)],1),a("el-form-item",{attrs:{label:"二级分类:"}},[a("el-radio-group",{model:{value:t.form.second_category_id,callback:function(e){t.$set(t.form,"second_category_id",e)},expression:"form.second_category_id"}},t._l(t.CusClassData.second_category,(function(e){return a("el-radio",{key:e.category_id,staticStyle:{"margin-top":"15px"},attrs:{label:e.category_id},nativeOn:{click:function(a){return a.preventDefault(),t.clickitem(e.category_id,"second_category_id")}}},[t._v(" "+t._s(e.category_name)+" ")])})),1)],1),a("el-form-item",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm()}}},[t._v("确定")]),a("el-button",{on:{click:function(e){return t.cancel()}}},[t._v("取消")])],1)],1)],1)])}),r=[],l=a("52c1"),c={name:"EditCustom",components:{},props:{show:{type:Boolean,default:!1}},data:function(){return{rowData:{},initData:[],name:"",form:{item_id:"",first_category_id:"",second_category_id:""},dialogsObj:{width:"800px",title:"编辑客户定制分类",center:!0}}},computed:Object(o["a"])({},Object(l["b"])(["CustomClassList","CusClassData"])),watch:{rowData:function(t){var e=this;t.channel_id&&(Object.keys(this.form).forEach((function(a){e.form[a]=t[a]})),this.name=t.name)}},created:function(){this.$store.dispatch("channel/getCusList")},mounted:function(){},methods:{close:function(){this.$emit("close")},cancel:function(){this.close()},clickitem:function(t,e){t===this.form[e]?this.form[e]="":this.form[e]=t},submitForm:function(){var t=this;this.$post("/epg-task/edit-category",this.form).then((function(e){t.$message({type:"success",message:"提交成功"}),t.$parent.getList(),t.close()})).catch((function(e){t.$message.error(e.msg)}))}}},m=c,u=a("4ac2"),d=Object(u["a"])(m,n,r,!1,null,"56116a1c",null),f=d.exports,h={name:"EditCustomClass",components:{EditCustom:f},props:{},data:function(){return{EditCustomShow:!1,loading:!1,total:null,limit:10,page:1,form:{name:"",channel_id:"",class:"",first_category_id:"",second_category_id:""}}},computed:Object(o["a"])({},Object(l["b"])(["channelData","CustomClassList","CusClassData"])),watch:{},mounted:function(){},created:function(){this.$store.dispatch("channel/getChannelData"),this.$store.dispatch("channel/getCusList"),this.getList()},methods:{setParams:function(){var t={name:this.form.name,channel_id:this.form.channel_id,page:this.page,limit:this.limit,first_category_id:this.form.first_category_id,second_category_id:this.form.second_category_id};return t},getList:function(){var t=this;this.loading=!0,this.$store.dispatch("channel/getEditCustomList",this.setParams()).then((function(){t.total=t.CustomClassList.total,t.loading=!1})).catch((function(e){t.$message({message:e.msg,type:"error"})})).finally((function(){t.loading=!1}))},close:function(){this.EditCustomShow=!1,this.$refs.EditCustom.initData=[],this.$refs.EditCustom.rowData={}},search:function(){this.getList()},clear:function(){var t=this;Object.keys(this.form).forEach((function(e){t.form[e]=""})),this.getList()},editCustomClass:function(t){this.EditCustomShow=!0,this.$refs.EditCustom.initData=this.CustomClassList.list,this.$refs.EditCustom.rowData=t},handleCurrentChange:function(t){this.page=t,this.getList()},handleSizeChange:function(t){this.limit=t,this.getList()}}},_=h,g=(a("7e8bf"),Object(u["a"])(_,s,i,!1,null,null,null));e["default"]=g.exports},"7e8bf":function(t,e,a){"use strict";a("9a2d")},"9a2d":function(t,e,a){}}]);