(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d4ba50a4"],{"05c1":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-table-wrap"},[a("div",{staticStyle:{position:"absolute",right:"20px",top:"20px"}},[a("base-btn",{attrs:{size:"big"},nativeOn:{click:function(e){return t.edit()}}},[t._v("进入编辑系统")])],1),a("taskStatistics"),a("taskDeatils")],1)},l=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"edit-task-table"},[a("div",{staticClass:"search-top"},[a("div",{staticClass:"item-search"},[a("span",{staticClass:"item-label"},[t._v("日期:")]),a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),a("div",{staticClass:"item-search btns"},[a("base-btn",{attrs:{size:"big"},nativeOn:{click:function(e){return t.getTaskList(e)}}},[t._v("搜索")])],1)]),a("div",{staticClass:"task-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"table-list",staticStyle:{"margin-top":"15px"},attrs:{data:t.tableData,"span-method":t.dataSpanMethod,"show-summary":"",border:"","summary-method":t.getSummaries}},[a("el-table-column",[[t._v(" "+t._s(t.userName)+" ")]],2),a("el-table-column",{attrs:{label:"加工方式",prop:"processing_require"}}),a("el-table-column",{attrs:{prop:"processing_efficiency",label:"时效要求"}}),a("el-table-column",{attrs:{prop:"is_overtime_no",label:"时效内（条）"}}),a("el-table-column",{attrs:{prop:"is_overtime_yes",label:"超时（条）"}}),a("el-table-column",{attrs:{prop:"hanging",label:"挂起（条）"}})],1)],1)])])},n=[],r=(a("08ba"),a("2eeb"),a("513c"),{components:{},data:function(){return{total:null,form:{date:"",page:1,limit:10},tableData:[{}],userName:"",loading:!1}},computed:{},watch:{},created:function(){this.getTaskList()},mounted:function(){},methods:{handleSizeChange:function(t){this.form.limit=t},handleCurrentChange:function(t){this.form.page=t},dataSpanMethod:function(t){t.row,t.column;var e=t.rowIndex,a=t.columnIndex;if(0===a)return e%this.tableData.length===0?{rowspan:this.tableData.length,colspan:1}:{rowspan:0,colspan:0}},getSummaries:function(t){var e=t.columns,a=t.data,i=[];return e.forEach((function(t,e){if(0!==e){var l=a.map((function(e){return Number(e[t.property])}));l.some((function(t){return isNaN(t)}))?i[e]="":i[e]=l.reduce((function(t,e){var a=Number(e);return isNaN(a)?t:t+e}),0)}else i[e]="合计"})),i},getTaskList:function(){var t=this;this.loading=!0;var e={order_type:"整档",start_time:this.form.date?this.form.date[0]:"",end_time:this.form.date?this.form.date[1]:""};this.$get("/production/taskStatisticalList",e).then((function(e){t.userName=e.data.username,t.tableData=e.data.list,t.total=e.data.list.length,t.loading=!1})).catch((function(e){t.$message.error(e.msg),t.loading=!1}))}}}),o=r,c=(a("05da"),a("4ac2")),d=Object(c["a"])(o,s,n,!1,null,"09cd6100",null),m=d.exports,u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"task-details"},[a("div",{staticClass:"top-title"},[t._v(" 任务明细 ")]),a("div",{staticClass:"top-details"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"频道:"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择频道名称"},model:{value:t.form.channel_id,callback:function(e){t.$set(t.form,"channel_id",e)},expression:"form.channel_id"}},t._l(t.channelData,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"栏目:"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择栏目名称","filter-method":t.dataFilter},on:{clear:t.clearData,blur:t.blur},model:{value:t.form.item_id,callback:function(e){t.$set(t.form,"item_id",e)},expression:"form.item_id"}},t._l(t.itemData,(function(t){return a("el-option",{key:t.item_id,attrs:{label:t.name,value:t.item_id}})})),1)],1),a("el-form-item",{attrs:{label:"加工方式:"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择加工方式"},model:{value:t.form.processing_require,callback:function(e){t.$set(t.form,"processing_require",e)},expression:"form.processing_require"}},t._l(t.task_options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"标题:"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"日期:"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),a("el-form-item",[a("el-form-item",[a("el-checkbox-group",{model:{value:t.is_overtime,callback:function(e){t.is_overtime=e},expression:"is_overtime"}},[a("el-checkbox",{attrs:{label:"仅展示超时任务",name:"overtime"}})],1)],1),a("base-btn",{attrs:{size:"big"},nativeOn:{click:function(e){return t.search(e)}}},[t._v("搜索")])],1)],1)],1),a("div",{staticClass:"details-table"},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"编辑记录",name:"编辑记录"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"table-list",staticStyle:{"margin-top":"15px"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"TID"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.task_id)+" "),a("span",{class:["公"==e.row.task_property&&"pub-logo","pri-logo"]},[t._v(t._s(e.row.task_property))])]}}])}),a("el-table-column",{attrs:{prop:"channel_name",label:"频道名称"}}),a("el-table-column",{attrs:{prop:"item_name",label:"栏目名称"}}),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),a("el-table-column",{attrs:{prop:"time",label:"任务时间段"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.broadcast_time)),a("br"),t._v(" "+t._s(e.row.broadcast_end_time)+" ")]}}])}),a("el-table-column",{attrs:{prop:"type",label:"超时(分钟)"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(Math.floor(e.row.overtime_seconds/60))+" ")]}}])}),a("el-table-column",{attrs:{prop:"created_at",label:"提交时间"}}),a("el-table-column",{attrs:{prop:"processing_require",label:"加工方式"}})],1)],1)],1)],1),a("div",{staticClass:"pagination-list"},[a("base-pag",{attrs:{total:t.total,limit:t.form.limit,page:t.form.page},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)])])},f=[],p=a("1c03"),h=a("52c1"),b={components:{},data:function(){return{keywords:"",tableData:[],loading:!1,activeName:"编辑记录",total:null,form:{channel_id:"",item_id:"",title:"",processing_require:"",page:1,limit:10},date:[],is_overtime:!1,task_options:[{label:"新闻整档",value:"新闻整档"},{label:"节目整档",value:"节目整档"}]}},computed:Object(p["a"])({},Object(h["b"])(["channelData","itemData"])),watch:{"form.channel_id":function(t){this.getItemList(),this.form.item_id=null}},created:function(){this.channelData.length||this.$store.dispatch("channel/getChannelData"),this.getItemList(),this.getRecordList()},mounted:function(){},methods:{blur:function(){0===this.itemData.length&&(this.keywords="",this.getItemList())},search:function(){this.form.page=1,this.getRecordList()},clearData:function(){this.keywords="",this.getItemList()},getItemList:function(){this.$store.dispatch("channel/getItemList",{channel_id:this.form.channel_id,keyword:this.keywords})},dataFilter:function(t){this.keywords=t,this.getItemList()},handleSizeChange:function(t){this.form.limit=t,this.getRecordList()},handleCurrentChange:function(t){this.form.page=t,this.getRecordList()},getRecordList:function(){var t=this;this.loading=!0;var e=JSON.parse(JSON.stringify(this.form));this.is_overtime&&(e.is_overtime="是"),e.start_time=this.date?this.date[0]:"",e.end_time=this.date?this.date[1]:"",e.order_type="整档",this.$get("/task/finish-task-video-list",e).then((function(e){t.tableData=e.data.list,t.total=e.data.total,t.loading=!1})).catch((function(e){t.$message.error(e.msg)}))}}},g=b,v=Object(c["a"])(g,u,f,!1,null,"4d549fc9",null),_=v.exports,k={name:"Home",components:{taskStatistics:m,taskDeatils:_},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{edit:function(){this.$router.push({path:"/full-business/task-choice"})}}},y=k,w=(a("52ac"),Object(c["a"])(y,i,l,!1,null,null,null));e["default"]=w.exports},"05da":function(t,e,a){"use strict";a("eccd")},"52ac":function(t,e,a){"use strict";a("effb")},eccd:function(t,e,a){},effb:function(t,e,a){}}]);