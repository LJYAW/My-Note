(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8ed83f36"],{1593:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sale-product"},[a("base-tab",{attrs:{"tab-arr":t.tabArr}}),a("Search",{on:{search:t.search}}),t.productData.length?a("List",{attrs:{"product-data":t.productData,pag:t.pag},on:{sizeChange:t.sizeChange,currentChange:t.currentChange}}):a("svg-icon",{staticClass:"empty-img",attrs:{"icon-class":"empty-img"}})],1)},r=[],s=a("e9ff"),i=(a("e186"),a("053b"),a("b4fb"),a("9302"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-wrap"},[a("div",[a("el-input",{attrs:{clearable:"",size:"mini",maxlength:30},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:t.search},slot:"suffix"})]),a("el-select",{attrs:{size:"mini",clearable:"",placeholder:"剩余库存"},model:{value:t.form.inventory,callback:function(e){t.$set(t.form,"inventory",e)},expression:"form.inventory"}},[a("el-option",{attrs:{label:"剩余库存升序",value:"asc"}}),a("el-option",{attrs:{label:"剩余库存降序",value:"desc"}})],1),a("el-select",{attrs:{size:"mini",clearable:"",placeholder:"销量"},model:{value:t.form.sales_volume,callback:function(e){t.$set(t.form,"sales_volume",e)},expression:"form.sales_volume"}},[a("el-option",{attrs:{label:"销量从高到低",value:"desc"}}),a("el-option",{attrs:{label:"销量从低到高",value:"asc"}})],1),a("div",{staticClass:"price"},[a("div",{staticClass:"price-wrap"},[a("el-input-number",{attrs:{controls:!1,size:"mini",max:999999,placeholder:"价格"},model:{value:t.form.minPrice,callback:function(e){t.$set(t.form,"minPrice",e)},expression:"form.minPrice"}}),t._v(" 至 "),a("el-input-number",{attrs:{controls:!1,size:"mini",max:999999,placeholder:"价格"},model:{value:t.form.maxPrice,callback:function(e){t.$set(t.form,"maxPrice",e)},expression:"form.maxPrice"}})],1),a("base-btn",{staticClass:"confirm-btn",on:{click:t.search}},[t._v("确认")])],1)],1)])}),o=[],c={components:{},props:{},data:function(){return{form:{name:"",minPrice:void 0,maxPrice:void 0,inventory:null,on_at:null,sales_volume:null}}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{search:function(){this.$emit("search",this.form)}}},u=c,l=(a("68eb"),a("cba8")),m=Object(l["a"])(u,i,o,!1,null,"7d8301b4",null),p=m.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product-list-wrap"},[a("div",{staticClass:"product-list-content"},t._l(t.productData,(function(e){return a("div",{key:e.id,staticClass:"product-item"},[a("div",{staticClass:"message-wrap product-message"},[a("base-image",{attrs:{src:e.main_img}}),a("p",[t._v(t._s(e.name))])],1),a("div",{staticClass:"message-wrap"},[a("p",[t._v("产品ID："+t._s(e.id))])]),a("div",{staticClass:"message-wrap"},[a("p",[t._v("价格：￥"+t._s(e.price))])]),a("div",{staticClass:"message-wrap"},[a("p",[t._v("库存数量："+t._s(e.inventory))])]),a("div",{staticClass:"message-wrap btn-wrap"},[a("base-btn",{attrs:{type:"text"},on:{click:function(a){return t.toEdit(e.id)}}},[t._v("编辑产品")])],1)])})),0),a("base-pag",{attrs:{page:t.pag.page,limit:t.pag.limit,total:t.pag.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},d=[],h={components:{},props:{productData:{type:Array,default:function(){return[]}},pag:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{toEdit:function(t){this.$router.push({path:"/edit-product",query:{id:t}})},handleSizeChange:function(t){this.$emit("sizeChange",t)},handleCurrentChange:function(t){this.$emit("currentChange",t)},changeStatus:function(t){var e=this;this.$confirm("确认要下架该产品吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.confirm(t)})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},confirm:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$put("/admin/goods/".concat(t,"/status"),{status:"已下架"});case 2:n=a.sent,r=n.err,n.res,r?e.$message.error(r.msg):(e.$message({type:"success",message:"下架成功"}),e.$emit("currentChange",1));case 6:case"end":return a.stop()}}),a)})))()}}},g=h,v=(a("2809"),Object(l["a"])(g,f,d,!1,null,"10a35286",null)),b=v.exports,C={components:{Search:p,List:b},props:{},data:function(){return{tabArr:["产品列表"],productData:[],form:{},pag:{page:1,limit:20,total:0}}},computed:{},watch:{},created:function(){this.getGoodsData()},mounted:function(){},methods:{search:function(t){this.pag.page=1,this.form=t,this.getGoodsData()},setParams:function(){return{name:this.form.name,category_id:this.$route.query.id,sort:this.getSortParams(),price:this.getPriceParams(),page:this.pag.page,limit:this.pag.limit}},getSortParams:function(){var t=this,e=["inventory","on_at","sales_volume"],a=[];return e.forEach((function(e){t.form[e]&&a.push("".concat(e,",").concat(t.form[e]))})),a.join("|")},getPriceParams:function(){return this.form.minPrice||this.form.maxPrice?(this.form.minPrice||"")+"|"+(this.form.maxPrice||""):""},getGoodsData:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.setParams(),e.next=3,t.$get("/admin/goods",a);case 3:if(n=e.sent,r=n.err,s=n.res,!r){e.next=9;break}return t.$message.error(r.msg),e.abrupt("return");case 9:t.productData=s.data.list,t.pag.total=s.data.total;case 11:case"end":return e.stop()}}),e)})))()},sizeChange:function(t){this.pag.limit=t,this.getGoodsData()},currentChange:function(t){this.pag.page=t,this.getGoodsData()}}},_=C,x=(a("49a9"),Object(l["a"])(_,n,r,!1,null,"19fb3df4",null));e["default"]=x.exports},2809:function(t,e,a){"use strict";a("d4b9")},"49a9":function(t,e,a){"use strict";a("8763")},"68eb":function(t,e,a){"use strict";a("e6a3")},8763:function(t,e,a){},9302:function(t,e,a){"use strict";var n=a("1c8b"),r=a("692f"),s=a("da10"),i=a("d7e1"),o=[].join,c=r!=Object,u=i("join",",");n({target:"Array",proto:!0,forced:c||!u},{join:function(t){return o.call(s(this),void 0===t?",":t)}})},d4b9:function(t,e,a){},e6a3:function(t,e,a){}}]);