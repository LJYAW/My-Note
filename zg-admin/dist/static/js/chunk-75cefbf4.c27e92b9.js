(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75cefbf4"],{"0c2a":function(t,e,a){"use strict";a("f73e")},"49d0":function(t,e,a){"use strict";a("e1c4")},"50ed":function(t,e,a){},"908ea":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"logistics-message"},[a("base-tab",{attrs:{"tab-arr":t.tabArr}}),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"logistics-main"},[a("div",{staticClass:"logistics-wrap"},[a("p",{staticClass:"express-name"},[a("span",[t._v(t._s(t.wlInfo.tracking_company))]),t._v(" "+t._s(t.wlInfo.tracking_number)+" "),a("base-btn",{staticClass:"update-btn",attrs:{type:"text"},on:{click:t.updateModal}},[t._v("修改")])],1),a("Logistics",{attrs:{"info-data":t.wlInfo}})],1),a("Detail",{attrs:{"order-detail":t.orderData}})],1),a("base-dialog",{attrs:{show:t.dialogVisible,width:"500px",title:"立即发货"},on:{"update:show":function(e){t.dialogVisible=e}}},[a("Deliver",{attrs:{"product-id":t.orderData.id},on:{close:t.close}})],1)],1)},s=[],n=a("e9ff"),i=(a("e186"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("div",{staticClass:"content bgf"},[a("div",[a("div",{staticClass:"flex list"},[a("div",{staticClass:"info flex1"},[a("div",{staticClass:"title address"},[t._v("[收货地址]"+t._s(t.infoData.addr))])])]),t._l(t.infoData.list,(function(e,r){return a("div",{key:r,staticClass:"flex list"},[a("div",{staticClass:"info flex1"},[a("div",{staticClass:"time"},[a("div",{staticClass:"day"},[t._v(t._s(e.start_time))])]),a("div",{staticClass:"title"},[t._v(t._s(e.status))]),a("div",{staticClass:"text"},[t._v(t._s(e.context))])])])}))],2)])])}),o=[],c={props:{infoData:{type:Object,default:function(){return{}}}},data:function(){return{}},onLoad:function(){},methods:{}},d=c,l=(a("49d0"),a("cba8")),u=Object(l["a"])(d,i,o,!1,null,"3e8480ce",null),f=u.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order-wrap"},[a("div",{staticClass:"detail-wrap"},[a("div",{staticClass:"order-base-wrap"},[a("p",[t._v("订单编号："+t._s(t.orderDetail.order_no))]),a("p",[t._v("订单日期："+t._s(t.orderDetail.created_at))])]),a("div",{staticClass:"order-product-wrap"},[a("div",{staticClass:"user-detail"},[a("p",[a("span",{staticClass:"title"},[t._v("收货人")]),t._v(" "),a("span",[t._v(t._s(t.orderDetail.info_snapshot?t.orderDetail.info_snapshot.user.nickname:"无"))])]),a("p",[a("span",{staticClass:"title"},[t._v("联系电话")]),t._v(" "),a("span",[t._v(t._s(t.orderDetail.info_snapshot?t.orderDetail.info_snapshot.user_address.phone:"无"))])]),a("p",[a("span",{staticClass:"title"},[t._v("收货地址")]),t._v(" "),a("span",[t._v(t._s(t.orderDetail.info_snapshot?t.orderDetail.info_snapshot.user_address.province:"")+" "+t._s(t.orderDetail.info_snapshot?t.orderDetail.info_snapshot.user_address.city:"")+" "+t._s(t.orderDetail.info_snapshot?t.orderDetail.info_snapshot.user_address.area:"")+" "+t._s(t.orderDetail.info_snapshot?t.orderDetail.info_snapshot.user_address.street:"")+" "+t._s(t.orderDetail.info_snapshot?t.orderDetail.info_snapshot.user_address.detail:""))])])]),a("div",{staticClass:"btn-wrap"},[a("p",[t._v("总计金额："+t._s((t.orderDetail.total_amount_fen/100).toFixed(0)))])])])]),t.orderDetail.info_snapshot?a("div",{staticClass:"product-wrap"},t._l(t.orderDetail.info_snapshot.goods_list,(function(e){return a("div",{key:e.id,staticClass:"product-item"},[a("base-image",{attrs:{src:e.main_img}}),a("div",{staticClass:"product-message"},[a("p",{staticClass:"message name"},[t._v(t._s(e.name))]),a("p",{staticClass:"message"},[t._v("数量："+t._s(e.goods_num))]),a("p",{staticClass:"message price"},[t._v("价格：￥"+t._s(e.price))]),a("p",{staticClass:"message number"},[t._v(t._s(e.number))])])],1)})),0):t._e()])},_=[],m={components:{},props:{orderDetail:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},g=m,v=(a("cf8e"),Object(l["a"])(g,p,_,!1,null,"936093a4",null)),b=v.exports,h=a("968f"),D={components:{Logistics:f,Detail:b,Deliver:h["a"]},props:{},data:function(){return{tabArr:["物流信息"],wlInfo:{list:[]},orderData:{},dialogVisible:!1,loading:!1}},computed:{},watch:{},created:function(){this.getOrderData()},mounted:function(){},methods:{getOrderData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,r,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a={ids:t.$route.query.id},e.next=4,t.$get("/admin/goods-order",a);case 4:if(r=e.sent,s=r.err,n=r.res,t.loading=!1,!s){e.next=11;break}return t.$message.error(s.msg),e.abrupt("return");case 11:t.orderData=n.data.list[0],t.getLogisticsData();case 13:case"end":return e.stop()}}),e)})))()},getLogisticsData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,r,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.wlInfo.tracking_company=t.orderData.tracking_company,t.wlInfo.tracking_number=t.orderData.tracking_number,t.wlInfo.addr=t.orderData.info_snapshot.user_address.province+t.orderData.info_snapshot.user_address.city+t.orderData.info_snapshot.user_address.area+(t.orderData.info_snapshot.user_address.street||"")+t.orderData.info_snapshot.user_address.detail,a={code:t.orderData.tracking_code,number:t.orderData.tracking_number,phone:t.orderData.info_snapshot.user_address.phone},e.next=6,t.$get("/configs/kuaidi/query",a);case 6:if(r=e.sent,s=r.err,n=r.res,!s){e.next=12;break}return t.$message.error(s.msg),e.abrupt("return");case 12:t.wlInfo.list=n.data.list;case 13:case"end":return e.stop()}}),e)})))()},updateModal:function(){this.dialogVisible=!0},close:function(){this.dialogVisible=!1,this.getOrderData()}}},k=D,w=(a("0c2a"),Object(l["a"])(k,r,s,!1,null,"49edac78",null));e["default"]=w.exports},"968f":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-deliver"},[a("el-form",{ref:"ruleForm",attrs:{model:t.form,inline:!0,rules:t.rules}},[a("el-form-item",{attrs:{label:"快递公司",prop:"tracking_code"}},[a("el-select",{attrs:{clearable:"",filterable:""},model:{value:t.form.tracking_code,callback:function(e){t.$set(t.form,"tracking_code",e)},expression:"form.tracking_code"}},t._l(t.companyData,(function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),1)],1),a("el-form-item",{attrs:{label:"快递单号",prop:"tracking_number"}},[a("el-input",{model:{value:t.form.tracking_number,callback:function(e){t.$set(t.form,"tracking_number",e)},expression:"form.tracking_number"}})],1)],1),a("base-btn",{staticClass:"deliver-btn",on:{click:t.commit}},[t._v("立即发货")])],1)},s=[],n=a("06c4"),i=a("e9ff"),o=(a("e186"),a("513c"),a("4194"),a("053b"),{components:{},props:{productId:{type:Number,default:function(){return null}}},data:function(){return{form:{tracking_number:null,tracking_code:null},rules:{tracking_code:[{required:!0,message:"请选择快递公司",trigger:"change"}],tracking_number:[{required:!0,message:"请输入快递单号",trigger:"blur"}]},companyData:[]}},computed:{tracking_company:function(){var t=this,e=this.companyData.find((function(e){return e.code===t.form.tracking_code}));return e.name||""}},watch:{},created:function(){this.getCompanyData()},mounted:function(){},methods:{getCompanyData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$get("/configs/kuaidi");case 2:if(a=e.sent,r=a.err,s=a.res,!r){e.next=8;break}return t.$message.error(r.msg),e.abrupt("return");case 8:t.companyData=s.data.list;case 9:case"end":return e.stop()}}),e)})))()},commit:function(){var t=this;this.$refs["ruleForm"].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.submit()}))},submit:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={status:"运输中",tracking:Object(n["a"])({tracking_company:t.tracking_company},t.form)},e.next=3,t.$put("/admin/goods-order/".concat(t.productId,"/status"),a);case 3:if(r=e.sent,s=r.err,r.res,!s){e.next=9;break}return t.$message.error(s.msg),e.abrupt("return");case 9:t.$emit("close");case 10:case"end":return e.stop()}}),e)})))()}}}),c=o,d=(a("ec8f"),a("cba8")),l=Object(d["a"])(c,r,s,!1,null,"7d988098",null);e["a"]=l.exports},cf8e:function(t,e,a){"use strict";a("d765")},d765:function(t,e,a){},e1c4:function(t,e,a){},ec8f:function(t,e,a){"use strict";a("50ed")},f73e:function(t,e,a){}}]);