(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-381dd55a"],{"032e":function(t,e,a){"use strict";a("84a9")},"32df":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-monitor"},[a("div",[a("numsList",{ref:"numsList",attrs:{"num-data":t.numData}})],1),a("div",{staticClass:"search-list"},[t.isShow()?a("div",{staticClass:"item-serach"},[a("span",{staticClass:"item-label"},[t._v("执行团队:")]),a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"请选择执行团队"},model:{value:t.form.department_id,callback:function(e){t.$set(t.form,"department_id",e)},expression:"form.department_id"}},t._l(t.teamData,(function(t){return a("el-option",{key:t.id,attrs:{label:t.department_name,value:t.id}})})),1)],1):t._e(),a("div",{staticClass:"item-serach"},[a("span",{staticClass:"item-label"},[t._v("日期:")]),a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:!1,type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),a("div",{staticClass:"item-serach btns"},[a("base-btn",{attrs:{size:"big"},on:{click:function(e){return t.search()}}},[t._v("搜索")])],1)]),a("div",{staticClass:"table-data"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.status_loading,expression:"status_loading"}],staticClass:"table-list",attrs:{data:t.tableData,border:"","default-sort":{prop:"incomplete_num",order:"descending"}},on:{"sort-change":t.changeTableSort}},[a("el-table-column",{attrs:{prop:"channel_name",label:"频道名称"}}),a("el-table-column",{attrs:{prop:"incomplete_num",label:"未完成任务数",sortable:""}}),a("el-table-column",{attrs:{prop:"start_time",label:"任务时间",sortable:""}}),a("el-table-column",{attrs:{prop:"process_time",label:"处理时间"}}),a("el-table-column",{attrs:{prop:"updated_at",label:"更新时间"}}),a("el-table-column",{attrs:{prop:"department_name",label:"执行团队"}})],1),a("base-pag",{attrs:{total:t.total,limit:t.limit,page:t.page},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)])},s=[],i=a("1c03"),l=(a("b130"),a("90aa"),a("e18c"),a("08ba"),a("52c1")),r=a("fbe3"),o=(a("90cd"),{name:"TaskMonitor",components:{numsList:r["a"]},props:{},data:function(){return{numData:[],status_loading:!1,tableData:[],form:{department_id:null,date:null},list:[{key:"hang_up_num",value:"挂起任务数"},{key:"incomplete_num",value:"未完成任务数"},{key:"on_going_num",value:"进行中任务数"},{key:"today_complete_num",value:"今天已完成任务"}],order:"num_desc",page:1,limit:10,total:null}},computed:Object(i["a"])({},Object(l["b"])(["channelData","teamData","roles"])),watch:{},mounted:function(){},created:function(){this.$store.dispatch("channel/getChannelData"),this.getList(),this.getTjNum(),this.$store.dispatch("user/getTeamData",{page:1,limit:1e4})},methods:{search:function(){this.getList()},isShow:function(){return this.roles.includes("superman")||this.roles.includes("广告审核")||this.roles.includes("广告审核管理员")},getList:function(){var t=this;this.status_loading=!0;var e={department_id:this.form.department_id||null,date:this.form.date,is_manage:!0,order_by:this.order,page:this.page,limit:this.limit};this.$get("/ads-task/monitor-list",e).then((function(e){t.tableData=e.data.list,t.total=e.data.total,t.status_loading=!1})).catch((function(e){t.$message.error(e.msg)})).finally((function(){t.status_loading=!1}))},handleCurrentChange:function(t){this.page=t,this.getList()},handleSizeChange:function(t){this.limit=t,this.getList()},setNumData:function(){},changeTableSort:function(t){var e="ascending"===t.order?"asc":"desc",a="incomplete_num"===t.prop?"num":"time";this.order=e+"_"+a,this.getList()},getTjNum:function(){var t=this;this.$get("/ads-task/administer-tj").then((function(e){t.list.forEach((function(a,n){t.numData.push({label:a.value,value:e.data[a.key]})}))})).catch((function(e){t.$message.error(e.msg)}))}}}),c=o,u=(a("032e"),a("4ac2")),d=Object(u["a"])(c,n,s,!1,null,"01ecbb18",null);e["default"]=d.exports},"84a9":function(t,e,a){},"90cd":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return s}));a("e35a"),a("5e9f"),a("0d7a"),a("513c");function n(t){var e,a=parseInt(t%864e5/36e5),n=parseInt(t%36e5/6e4),s=t%6e4/1e3;return e=(a<10?"0"+a:a)+":"+(n<10?"0"+n:n)+":"+(s<10?"0"+s:s),e}function s(t){if(!isNaN(t))var e=new Date(t);var a=e.getFullYear(),n=e.getMonth()+1+"",s=e.getDate()+"";return n=n.replace(/\b\d\b/g,"0$&"),s=s.replace(/\b\d\b/g,"0$&"),a+"-"+n+"-"+s}},9352:function(t,e,a){"use strict";a("a206")},a206:function(t,e,a){},fbe3:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nums-list"},t._l(t.numData,(function(e,n){return a("div",{key:n,staticClass:"item-nums"},[a("span",[t._v(t._s(e.label)+":")]),a("div",[t._v(t._s(e.value))])])})),0)},s=[],i={name:"NumsList",components:{},props:{numData:{type:Array,default:function(){return[]}}},computed:{},watch:{},mounted:function(){},created:function(){},methods:{}},l=i,r=(a("9352"),a("4ac2")),o=Object(r["a"])(l,n,s,!1,null,"95421840",null);e["a"]=o.exports}}]);