(function(t){function e(e){for(var n,a,r=e[0],c=e[1],u=e[2],h=0,d=[];h<r.length;h++)a=r[h],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&d.push(s[a][0]),s[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,a=1;a<i.length;a++){var r=i[a];0!==s[r]&&(n=!1)}n&&(o.splice(e--,1),t=c(c.s=i[0]))}return t}var n={},a={app:0},s={app:0},o=[];function r(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-6e05f072":"e816392b"}[t]+".js"}function c(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,c),i.l=!0,i.exports}c.e=function(t){var e=[],i={"chunk-6e05f072":1};a[t]?e.push(a[t]):0!==a[t]&&i[t]&&e.push(a[t]=new Promise((function(e,i){for(var n="css/"+({}[t]||t)+"."+{"chunk-6e05f072":"bfa9c5b1"}[t]+".css",s=c.p+n,o=document.getElementsByTagName("link"),r=0;r<o.length;r++){var u=o[r],h=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(h===n||h===s))return e()}var d=document.getElementsByTagName("style");for(r=0;r<d.length;r++){u=d[r],h=u.getAttribute("data-href");if(h===n||h===s)return e()}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onload=e,l.onerror=function(e){var n=e&&e.target&&e.target.src||s,o=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=n,delete a[t],l.parentNode.removeChild(l),i(o)},l.href=s;var m=document.getElementsByTagName("head")[0];m.appendChild(l)})).then((function(){a[t]=0})));var n=s[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,i){n=s[t]=[e,i]}));e.push(n[2]=o);var u,h=document.createElement("script");h.charset="utf-8",h.timeout=120,c.nc&&h.setAttribute("nonce",c.nc),h.src=r(t);var d=new Error;u=function(e){h.onerror=h.onload=null,clearTimeout(l);var i=s[t];if(0!==i){if(i){var n=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+n+": "+a+")",d.name="ChunkLoadError",d.type=n,d.request=a,i[1](d)}s[t]=void 0}};var l=setTimeout((function(){u({type:"timeout",target:h})}),12e4);h.onerror=h.onload=u,document.head.appendChild(h)}return Promise.all(e)},c.m=t,c.c=n,c.d=function(t,e,i){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(c.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(i,n,function(e){return t[e]}.bind(null,n));return i},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],h=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var l=h;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";i("1fb7")},"03fe":function(t,e,i){"use strict";i("4893")},"0852":function(t,e,i){"use strict";i("1f44")},"0ce9":function(t,e,i){"use strict";i("b12c"),i("23db");e["a"]={methods:{addTrackData:function(t){var e=20,i=this.$store.state.decorate_list;if(i.length>e)alert("最多添加"+e+"条");else{var n=Object.assign({resizable:!0},t);i.push(n),this.$store.commit("setDecorateList",i)}},setTrackData:function(t,e){var i=this.$store.state.decorate_list,n=i.findIndex((function(t){return t.id==e})),a=i[n]||{},s=Object.assign(a,t);i.splice(n,1,s),this.$store.commit("setDecorateList",i)},deleteTrackData:function(t){var e=this.$store.state.decorate_list,i=e.findIndex((function(e){return e.id==t}));e.splice(i,1),this.$store.commit("setDecorateList",e)},parentPostMessage:function(t,e){window.parent.postMessage({cmd:t,data:e},"*")}}}},"0d5f":function(t,e,i){"use strict";i("e680")},"0dbf":function(t,e,i){"use strict";i("c3a4")},"1f44":function(t,e,i){},"1fb7":function(t,e,i){},"275f":function(t,e,i){},3266:function(t,e,i){"use strict";(function(t){i("9de7");var n=i("839b");function a(t){a.installed||(a.installed=!0,t.component("VueDraggableResizable",n["a"]))}var s={install:a},o=null;"undefined"!==typeof window?o=window.Vue:"undefined"!==typeof t&&(o=t.Vue),o&&o.use(s),e["a"]=n["a"]}).call(this,i("2409"))},3532:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));i("b1fa"),i("c5ce"),i("e1d4");function n(){return Number(Math.random().toString().substr(3,3)+Date.now()).toString(36)}},"422c":function(t,e,i){"use strict";i("9109")},4893:function(t,e,i){},"4a30":function(t,e,i){"use strict";i("eb66")},"4f34":function(t,e,i){"use strict";i("c2c0")},"56d7":function(t,e,i){"use strict";i.r(e);i("6ece"),i("8000"),i("8441"),i("d14b");var n=i("430a"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("Vmain")],1)},s=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"editBody"},[i("meadia"),i("editMain")],1)},r=[],c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"editMain"},[t.player_is_ready?i("track-header"):t._e(),i("div",{staticClass:"track-container"},[i("div",{staticClass:"track-main"},[i("div",{ref:"trackMain",staticClass:"edit-pad",on:{mousedown:function(e){return e.stopPropagation(),t.editMainHanderl(e)}}},[i("timeProgress"),i("timeLine",{ref:"timeLine",attrs:{range:t.range,duration:t.duration}}),t.player_loadeddata?i("tracks"):t._e()],1)])])],1)},u=[],h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"time-line",style:{width:t.time_line_width+"px"}},t._l(t.domList,(function(e){return i("div",{key:e.id,staticClass:"time-block",style:e},[i("span",{staticClass:"mm"},[t._v(t._s(t.msToSecond(t.BLOCK_TOTAL_MS*e.id)))]),i("div",{staticClass:"scales"},t._l(10,(function(t){return i("div",{key:t,staticClass:"sub"})})),0)])})),0)},d=[],l=(i("e1d4"),0),m=80,f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,e=arguments.length>1?arguments[1]:void 0;switch(parseInt(t)){case 0:l=6e4,m=80;break;case 1:l=5e4,m=90;break;case 2:l=4e4,m=100;break;case 3:l=3e4,m=110;break;case 4:l=2e4,m=120;break;case 5:l=1e4,m=130;break;case 6:l=5e3,m=80;break}return e&&"function"===typeof e&&e(),{BLOCK_TOTAL_MS:l,BLOCK_WIDTH:m}},p=f,g=(i("23db"),i("a5c9"),i("cbea"),{data:function(){return{domList:[],start:0,parentWidth:0,lastStart:0,size:30,minWidth:2e3}},methods:{setList:function(){for(var t=0;t<this.block_num;t++)this.domList[t]={id:t,width:"".concat(this.BLOCK_WIDTH,"px"),transform:"translateX(".concat(this.BLOCK_WIDTH*t,"px)")}},updataList:function(){for(var t,e=this.start*this.size,i=this.size+this.size*this.start,n=[],a=e;a<i;a++)n.push({id:a,width:"".concat(this.BLOCK_WIDTH,"px"),transform:"translateX(".concat(this.BLOCK_WIDTH*a,"px)")});(t=this.domList).splice.apply(t,[e,i].concat(n))},handleScroller:function(){var t=this.parentDom.scrollLeft;this.start=Math.floor(t/500),this.lastStart!==this.start&&(this.lastStart=this.start,this.updataList())},listenerScroll:function(){this.parentDom=document.querySelectorAll(".edit-pad")[0],this.parentWidth=this.parentDom.offsetWidth},msToSecond:function(t){var e,i,n,a="00:00:00";return t>0&&(i=Math.floor(t/6e4),i<10&&(i="0"+i),e=Math.floor(t/1e3-60*i),e<10&&(e="0"+e),n=(Math.floor(parseFloat(t)-6e4*i-1e3*e)/10).toFixed(),n<10&&(n="0"+n,a=i+":"+e+"."+n)),a}}}),v={props:{duration:{type:Number,default:36e5},range:{type:Number,default:4},parentDomClass:{type:String,default:""}},mixins:[g],data:function(){return{time_line_width:1e3,BLOCK_TOTAL_MS:2e4,BLOCK_WIDTH:120,block_num:24,parentDom:null}},computed:{},watch:{range:function(){this._initTimeLine()},duration:function(){this._initTimeLine()}},methods:{_initTimeLine:function(){this.BLOCK_TOTAL_MS=p(this.range).BLOCK_TOTAL_MS,this.BLOCK_WIDTH=p(this.range).BLOCK_WIDTH,this.block_num=Math.max(Math.ceil(this.duration/this.BLOCK_TOTAL_MS)+1,15),this.time_line_width=this.block_num*this.BLOCK_WIDTH,this.setList()}},components:{},created:function(){this._initTimeLine()},mounted:function(){this.listenerScroll()}},_=v,y=(i("93a7"),i("4ac2")),b=Object(y["a"])(_,h,d,!1,null,"1f53535a",null),P=b.exports,x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tracks-wrap",style:t.style},[i("cut-track")],1)},w=[],k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"track"},[t.cutData.trackWidth?i("drag-box",{ref:"dragBox",class:{is_avtive:!0},attrs:{width:t.cutData.trackWidth,left:t.cutData.trackLeft,maxWidth:t.cutData.maxWidth||t.parentWidth,parentW:t.parentWidth},on:{onDragStop:t.onDragStop,onDrag:t.onDrag,onResize:t.onResize,onResizeStop:t.onResizeStop}}):t._e()],1)},S=[],M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("vue-draggable-resizable",{attrs:{"class-name":"draggable-box","class-name-dragging":"my-dragging-class","class-name-handle":"my-handle-class",onDragStart:t.onDragStartCallback,"prevent-deactivation":t.deactivation,w:t.width,h:t.height,x:t.left,axis:t.axis,"max-width":t.maxWidth,"min-width":t.minWidth,parent:!0,parentW:t.parentW,handles:t.handles},on:{dragging:t.onDrag,dragstop:t.onDragStop,resizing:t.onResize,resizestop:t.onResizeStop}},[t._t("default")],2)},D=[],C={props:{text:{type:String,default:""},deactivation:{type:Boolean,default:!0},width:{type:Number,default:100},left:{type:Number,default:0},maxWidth:{type:Number,default:1e3},minWidth:{type:Number,default:0},height:{type:Number,default:30},axis:{type:String,default:"x"},parentW:{type:Number,default:0},handles:{type:Array,default:function(){return["ml","mr"]}}},data:function(){return{x:0,w:0,dragging:!1,resizing:!1}},computed:{},watch:{},methods:{onDragStartCallback:function(t){t.stopPropagation()},onDrag:function(t,e,i){this.dragging=!0,this.x=t,this.$emit("onDrag",{x:t,y:e})},onDragStop:function(t,e,i,n){this.dragging=!1,this.$emit("onDragStop",t)},onResize:function(t,e,i,n){this.resizing=!0,this.$emit("onResize",{x:t,y:e,w:i})},onResizeStop:function(t,e,i,n){this.resizing=!1,this.x=t,this.w=i,this.$emit("onResizeStop",t,i)}},components:{},created:function(){},mounted:function(){}},T=C,$=Object(y["a"])(T,M,D,!1,null,null,null),R=$.exports,E=i("0ce9"),L=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.decorate_active_id?i("ul",{staticClass:"track-btn-ul",style:t.style},[t._m(0),i("li",[i("span",{staticClass:"text",on:{click:function(e){e.stopPropagation(),t.show=!t.show}}},[t._v("设置秒数")]),t.show?i("div",{staticClass:"set-track-ms"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.track_s,expression:"track_s"}],attrs:{type:"number"},domProps:{value:t.track_s},on:{input:function(e){e.target.composing||(t.track_s=e.target.value)}}}),i("a",{staticClass:"text",on:{click:function(e){return e.stopPropagation(),t.setMaxMs()}}},[t._v("max")]),i("a",{staticClass:"text",on:{click:function(e){return e.stopPropagation(),t.setMs()}}},[t._v("确认")])]):t._e()])]):t._e()])},z=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",[i("span",{staticClass:"text"},[t._v("删除")])])}],O={props:{},mixins:[E["a"]],data:function(){return{data:{},position:{left:"-100px",top:"-100px"},track_s:0,show:!1}},computed:{style:function(){return{left:this.position.x-15+"px",top:this.position.y-100+"px"}},decorate_active_id:function(){return this.$store.state.decorate_active_id},duration:function(){return this.$store.state.videoPlay.duration},PER_PX_MS:function(){return this.$store.state.PER_PX_MS}},watch:{},methods:{setMs:function(){var t=this.duration/this.PER_PX_MS,e=1e3*this.track_s/this.PER_PX_MS,i=Math.min(t,e);this.setTrackData({trackWidth:i},this.data.id)},setMaxMs:function(){var t=this.duration/this.PER_PX_MS,e=t-this.data.trackLeft;this.setTrackData({trackWidth:e},this.data.id)},submit:function(){}},components:{},created:function(){var t=this;this.$bus.$on("showTrackBtn",(function(e){t.data=e.data,t.position=e.position}))},mounted:function(){}},W=O,B=(i("0852"),Object(y["a"])(W,L,z,!1,null,"8699120c",null)),X=B.exports,H={name:"decorateTrack",props:{},inject:["track"],mixins:[E["a"]],data:function(){return{}},computed:{PER_PX_MS:function(){return this.$store.state.PER_PX_MS},parentWidth:function(){return parseInt(this.track.style.width)},videoDuration:function(){return this.$store.state.videoPlay.duration},cutData:function(){return this.$store.state.cut_details}},watch:{cutData:{handler:function(){var t=this.cutData.trackLeft*this.PER_PX_MS,e=(this.cutData.trackLeft+this.cutData.trackWidth)*this.PER_PX_MS;this.duration-e<500&&this.duration;window.parent.postMessage({cmd:"getCutData",data:this.cutData},"*")},deep:!0}},methods:{onDrag:function(t){var e=t.x*this.PER_PX_MS,i=(t.x+this.cutData.trackWidth)*this.PER_PX_MS+e;this.videoDuration-i<500&&this.videoDuration},onResize:function(t){var e=t.x*this.PER_PX_MS,i=(t.x+t.w)*this.PER_PX_MS,n={start_ms:e<500?0:e,end_ms:this.videoDuration-i<500?this.videoDuration:i};window.parent.postMessage({cmd:"onResize",data:n},"*")},onDragStop:function(t){var e=t*this.PER_PX_MS,i=(t+this.cutData.trackWidth)*this.PER_PX_MS,n={startMs:e<500?0:e,endMs:this.videoDuration-i<500?this.videoDuration:i,trackLeft:t};this.$store.commit("setCutTrackDetails",n)},onResizeStop:function(t,e){var i=t*this.PER_PX_MS,n=(t+e)*this.PER_PX_MS,a={startMs:i<500?0:i,endMs:this.videoDuration-n<500?this.videoDuration:n,trackLeft:t,trackWidth:e};this.$store.commit("setCutTrackDetails",a)},setCutDatas:function(t){if(t&&"setCutTrackDetails"==t.data.cmd){var e=Object.assign({},t.data.data),i={startMs:Math.max(e.start_ms,0),endMs:Math.min(e.end_ms,this.videoDuration),trackLeft:Math.max(e.start_ms/this.PER_PX_MS,0),trackWidth:Math.max((e.end_ms-e.start_ms)/this.PER_PX_MS,1),maxWidth:e.max_ms?Math.min(this.parentWidth,e.max_ms/this.PER_PX_MS):""};this.$store.commit("setCutTrackDetails",i),this.$bus.$emit("setStartTimeMs",i.startMs)}}},components:{dragBox:R,trackBtn:X},created:function(){},mounted:function(){window.addEventListener("message",this.setCutDatas,!1)}},j=H,N=(i("abaa"),Object(y["a"])(j,k,S,!1,null,null,null)),A=N.exports,V=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"decorate-tracks"},t._l(t.decorate_list,(function(t,e){return i("div",{key:e,staticClass:"track"},[i("decorate-track",{attrs:{data:t}})],1)})),0)},I=[],F=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("drag-box",{ref:"dragBox",class:{is_avtive:t.data.id==t.decorate_active_id},attrs:{width:t.data.trackWidth,left:t.data.trackLeft,maxWidth:t.parentWidth},on:{onDragStop:t.onDragStop,onResizeStop:t.onResizeStop}},[i("span",{staticClass:"text"},[t._v(t._s(t.data.type))])])},K=[],Y={name:"decorateTrack",props:{data:{type:Object,default:function(){return{}}}},inject:["track"],mixins:[E["a"]],data:function(){return{}},computed:{decorate_active_id:function(){return this.$store.state.decorate_active_id},PER_PX_MS:function(){return this.$store.state.PER_PX_MS},left:function(){return this.data.start_ms/this.$store.state.PER_PX_MS},width:function(){return(this.data.end_ms-this.data.start_ms)/this.$store.state.PER_PX_MS},parentWidth:function(){return parseInt(this.track.style.width)}},watch:{},methods:{onDragStop:function(t){console.log("onDragStop -> x",t),this.setTrackData({trackLeft:t},this.data.id),console.log("onDragStop -> this.data.id",this.data.id),this.$store.commit("setdecorateActiveId",this.data.id)},onResizeStop:function(t,e){this.setTrackData({trackLeft:t,trackWidth:e},this.data.id)}},components:{dragBox:R,trackBtn:X},created:function(){},mounted:function(){}},U=Y,q=(i("4f34"),Object(y["a"])(U,F,K,!1,null,null,null)),G=q.exports,J={name:"decorateGroup",props:{},data:function(){return{}},computed:{decorate_list:function(){return this.$store.state.decorate_list}},watch:{},methods:{},components:{decorateTrack:G},created:function(){},mounted:function(){}},Q=J,Z=(i("422c"),Object(y["a"])(Q,V,I,!1,null,"7f69737c",null)),tt=Z.exports,et={name:"tracks",props:{},provide:function(){return{track:this}},data:function(){return{}},computed:{videoDuration:function(){return this.$store.state.videoPlay.duration},PER_PX_MS:function(){return this.$store.state.PER_PX_MS},style:function(){return{width:this.videoDuration/this.PER_PX_MS+"px"}}},watch:{style:{handler:function(){},deep:!0}},methods:{},components:{cutTrack:A,decorateTrack:tt},created:function(){},mounted:function(){window.parent.postMessage({cmd:"playerLoadeddata"},"*")}},it=et,nt=(i("8f9a"),Object(y["a"])(it,x,w,!1,null,null,null)),at=nt.exports,st=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"slider-main",style:{width:t.width},on:{mousedown:function(e){return e.stopPropagation(),t.mousedown(e)}}},[i("a",{on:{click:function(e){return e.stopPropagation(),t.reduce()}}},[i("i",{staticClass:"iconfont icon-reduce"})]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.size,expression:"size"}],style:{background:"-webkit-linear-gradient(top, red, red) 0% 0% / "+100*t.size/t.max+"% 100% no-repeat",width:t.width+"px"},attrs:{id:"processRange",min:t.min,max:t.max,type:"range",step:t.step},domProps:{value:t.size},on:{change:function(e){return t.getRange()},__r:function(e){t.size=e.target.value}}}),i("span",{staticClass:"slider-number"},[t._v(t._s(t.size))]),i("a",{on:{click:function(e){return e.stopPropagation(),t.add()}}},[i("i",{staticClass:"iconfont icon-solid_add"})])])},ot=[],rt={name:"slider",props:{max:{type:Number,default:10},min:{type:Number,default:0},rate:{type:Number,default:4},step:{type:Number,default:1},width:{type:String,default:"100px"}},data:function(){return{size:this.rate}},computed:{},created:function(){},watch:{size:function(){this.$emit("getRange",this.size)}},methods:{mousedown:function(t){t.stopPropagation()},add:function(){this.size<this.max&&this.size++},reduce:function(){this.size>this.min&&this.size--},getRange:function(){this.$emit("getRange",this.size)}}},ct=rt,ut=(i("b052"),Object(y["a"])(ct,st,ot,!1,null,"c97e2344",null)),ht=ut.exports,dt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"progrees",style:"transform: translateX("+t.progrees_x+"px)",attrs:{id:"timelineProgrees"},on:{mousedown:function(e){return t.progreesMove(e)}}})},lt=[];var mt={props:{},data:function(){return{progrees_x:0}},computed:{PER_PX_MS:function(){return this.$store.state.PER_PX_MS},current_time_ms:function(){return this.$store.state.videoPlay.current_time_ms}},watch:{current_time_ms:function(t){this.progrees_x=t/this.PER_PX_MS,this.$store.commit("setProgreesX",this.progrees_x)}},methods:{progreesMove:function(){}},components:{},created:function(){},mounted:function(){}},ft=mt,pt=(i("d717"),Object(y["a"])(ft,dt,lt,!1,null,"d0754eb2",null)),gt=pt.exports,vt=function(t){var e=0,i=0;return t=t||window.event,t.pageX?(e=t.pageX,i=t.pageY):(e=t.clientX+document.body.scrollLeft-document.body.clientLeft,i=t.clientY+document.body.scrollTop-document.body.clientTop),{x:e,y:i}},_t=new n["a"],yt=_t,bt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Pt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"track-sidbar-content"},[i("div",{staticClass:"track-time"}),i("ul",{staticClass:"icon-list"},[i("li",[i("i",{staticClass:"iconfont icon-staff"})]),i("li",[i("i",{staticClass:"iconfont icon-zhuanchang"})])])])}],xt={props:{},data:function(){return{}},computed:{},watch:{},methods:{},components:{},created:function(){},mounted:function(){}},wt=xt,kt=(i("d6a7"),Object(y["a"])(wt,bt,Pt,!1,null,"a14e94e4",null)),St=kt.exports,Mt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"trackHeader"},[i("ul",{staticClass:"btn-list"},[i("li",[i("a",{on:{click:function(e){return t.entryPoint()}}},[i("i",{staticClass:"iconfont icon-rudian"})]),i("a",{on:{click:function(e){return t.setCutWidth()}}},[i("i",{staticClass:"iconfont icon-rudian1"})])]),i("li",{staticClass:"export-btn"},[i("div",{on:{click:function(e){return t.exportVideo()}}},[t._v("剪选")])]),i("li",{staticClass:"export-btn"},[i("div",{on:{click:function(e){return t.preview()}}},[t._v("预览")])])])])},Dt=[],Ct=(i("b1fa"),i("2e6f"),i("af21"),i("3532")),Tt={props:{},data:function(){return{track_s:0,time:{}}},mixins:[E["a"]],computed:{PER_PX_MS:function(){return this.$store.state.PER_PX_MS},duration:function(){return this.$store.state.videoPlay.duration},cutDetails:function(){return this.$store.state.cut_details}},watch:{},methods:{addCutTrak:function(){parseInt(this.$store.state.videoPlay.current_time_ms),parseInt(this.$store.state.PER_PX_MS);var t=document.getElementById("videoCanvas"),e=this.$store.state.decorate_list,i=this.duration/this.PER_PX_MS;if(!e.some((function(t){return"裁剪"==t.type}))){var n=t.height,a=n*(9/16),s=t.width/2-a/2;console.log("addCutTrak -> y",s);var o={x:s,y:0,w:a,h:n,id:"decorate_"+Object(Ct["a"])(),active:!0,type:"裁剪",trackLeft:0,trackWidth:i};this.addTrackData(o)}},entryPoint:function(){var t=this.$store.state.progrees_x,e=this.duration/this.PER_PX_MS-this.cutDetails.trackWidth;this.$store.commit("setCutTrackDetails",{trackLeft:Math.min(e,t)})},setCutWidth:function(){var t=this.cutDetails,e=t.trackLeft,i=(t.trackWidth,this.$store.state.progrees_x),n=i-e;i>e+1&&this.$store.commit("setCutTrackDetails",{trackWidth:n})},preview:function(){this.exportVideo(),(this.time.start_ms||this.time.end_ms)&&this.$bus.$emit("setTime",this.time)},exportVideo:function(){var t=this.cutDetails.trackLeft*this.PER_PX_MS,e=(this.cutDetails.trackLeft+this.cutDetails.trackWidth)*this.PER_PX_MS,i={start_ms:t<500?0:t,end_ms:this.duration-e<500?this.duration:e};this.time=i,window.parent.postMessage({cmd:"exportcutDetails",data:i},"*")}},components:{MasalikeTrack:function(){return i.e("chunk-6e05f072").then(i.bind(null,"3703"))}},created:function(){},mounted:function(){}},$t=Tt,Rt=(i("f10c"),Object(y["a"])($t,Mt,Dt,!1,null,"155358f3",null)),Et=Rt.exports,Lt=i("2ac2"),zt={name:"videoEdit",props:{},data:function(){return{}},computed:{PER_PX_MS:function(){return this.$store.state.PER_PX_MS},range:function(){return this.$store.state.range.range},duration:function(){return this.$store.state.videoPlay.duration},player_is_ready:function(){return this.$store.state.videoPlay.player_is_ready},player_loadeddata:function(){return this.$store.state.videoPlay.player_loadeddata}},watch:{range:function(t){this.setTrackData()},player_loadeddata:function(t){t&&this.setTrackData()}},methods:{editMainHanderl:function(t){var e=this.getProgressX(t),i=e*this.PER_PX_MS;this.$bus.$emit("setCurrentTimeMs",i)},getProgressX:function(t){var e=vt().x,i=(t.screenX,this.$refs.trackMain.getBoundingClientRect().x),n=this.$refs.trackMain.scrollLeft,a=e-i+n;return a},getRange:function(t){this.$store.commit("setTimeLineRange",t)},setTrackData:function(){var t=this.$refs.timeLine.BLOCK_TOTAL_MS,e=this.$refs.timeLine.BLOCK_WIDTH,i=t/e;this.$store.commit("setPerPxMs",i),window.parent.postMessage({cmd:"setPerPxMs",data:i},"*")}},components:{timeLine:P,tracks:at,slider:ht,timeProgress:gt,trackSidbar:St,trackHeader:Et,RecycleScroller:Lt["a"]},created:function(){},mounted:function(){}},Ot=zt,Wt=(i("0dbf"),Object(y["a"])(Ot,c,u,!1,null,null,null)),Bt=Wt.exports,Xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"medioPad"},[i("div",{staticClass:"mediaWrap"},[t.loading?i("div",{staticStyle:{color:"white"}},[t._v("loading...")]):i("video-play",{staticClass:"videoPaly",attrs:{playerOptions:t.playerOptions}})],1)])},Ht=[],jt=i("1c03"),Nt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"player"},[i("video-player",{ref:"videoPlayer",attrs:{options:t.playerOptions,playsinline:!0},on:{play:function(e){return t.onPlayerPlay(e)},pause:function(e){return t.onPlayerPause(e)},ended:function(e){return t.onPlayerEnded(e)},loadeddata:function(e){return t.onPlayerLoadeddata(e)},waiting:function(e){return t.onPlayerWaiting(e)},playing:function(e){return t.onPlayerPlaying(e)},timeupdate:function(e){return t.onPlayerTimeupdate(e)},canplay:function(e){return t.onPlayerCanplay(e)},error:function(e){return t.onPlayerError(e)},canplaythrough:function(e){return t.onPlayerCanplaythrough(e)},statechanged:function(e){return t.playerStateChanged(e)}}}),i("canvas",{attrs:{id:"videoCanvas",height:"324",width:"576"}}),i("video-control"),i("decorate-box",{ref:"decorateBox",on:{changeDecorateList:t.switchToCanvas}})],1)},At=[];i("6afd"),i("2769"),i("8639"),i("9315"),i("090a"),i("3a91"),i("ea11"),i("365f"),i("45ea"),i("5da5"),i("356d0"),i("2793"),i("2ca7"),i("f2b4"),i("8dd4"),i("21d0"),i("0345"),i("0180"),i("bc72"),i("af4c"),i("d5d6"),i("7036"),i("78f5"),i("275e"),i("ae16"),i("86ca"),i("b1b2"),i("0c98");var Vt={data:function(){return{canvas:"",context:"",video:"",animation:null}},computed:{decorate_list_temp:function(){return this.$refs.decorateBox.decorate_list_temp},video_play_status:function(){return this.$store.state.videoPlay.video_play_status}},watch:{video_play_status:function(t){"pause"===t&&(window.cancelAnimationFrame(this.animation),this.switchToCanvas())}},methods:{setCanvas:function(){var t=this;this.canvas=document.getElementById("videoCanvas"),this.context=this.canvas.getContext("2d"),this.context.fillStyle="#000",this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.video=document.getElementById("myVideo"),this.video.load();var e=this.video.play();void 0!==e&&e.then((function(){t.video.play()})).catch((function(t){console.error(t)}))},switchToCanvas:function(){this.context.drawImage(this.video,0,0,this.canvas.width,this.canvas.height),this.setCanvasDecorate(),this.animation=window.requestAnimationFrame(this.switchToCanvas)},setCanvasDecorate:function(){this.decorate_list_temp.forEach((function(t){if("马赛克"==t.type)t.x,t.y,t.w,t.h}))}},mounted:function(){this.setCanvas()}},It={methods:{setCurrentTimeMs:function(t){var e=this;this.$bus.$on("setCurrentTimeMs",(function(i){var n=i/1e3;t.currentTime=n,e.$store.commit("setVideoPlayOrPasu",!1)}))},setStartTimeMs:function(t){this.$bus.$on("setStartTimeMs",(function(e){var i=e/1e3;t.currentTime=i}))},keyEvents:function(t){var e=this;return{37:function(){var i=.1;t.pause(),t.currentTime=t.currentTime-i,e.$store.commit("setVideoPlayStatus","pause")},39:function(){var i=.1;t.pause(),t.currentTime=t.currentTime+i,e.$store.commit("setVideoPlayStatus","pause")},32:function(){t.paused?(t.play(),e.$store.commit("setVideoPlayStatus","play")):(t.pause(),e.$store.commit("setVideoPlayStatus","pause"))}}}},created:function(){},mounted:function(){}},Ft=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"videoControls"},[i("div",{staticClass:"play-wrap"},["pause"==t.videoPlayStatus?i("a",{on:{click:function(e){return t.videoPlayOrPause(!0)}}},[i("i",{staticClass:"iconfont icon-yinfukaishijian"})]):t._e(),"play"==t.videoPlayStatus?i("a",{on:{click:function(e){return t.videoPlayOrPause(!1)}}},[i("i",{staticClass:"iconfont icon-yinfuzantingjian"})]):t._e()]),i("div",{staticClass:"volume-wrap"},[t.videoPlayMuted?i("a",{on:{click:function(e){return t.setVideoPlayMuted(!0)}}},[i("i",{staticClass:"iconfont icon-volume"})]):i("a",{on:{click:function(e){return t.setVideoPlayMuted(!1)}}},[i("i",{staticClass:"iconfont icon-jingyin"})])]),i("div",{staticClass:"video-time"},[i("span",[t._v(t._s(t._f("msToSecond")(t.current_time_ms))+" / "+t._s(t._f("msToSecond")(t.duration)))])])])},Kt=[],Yt={props:{},data:function(){return{}},computed:{videoPlayStatus:function(){return this.$store.state.videoPlay.video_play_status},videoPlayMuted:function(){return this.$store.state.videoPlay.video_play_muted},current_time_ms:function(){return this.$store.state.videoPlay.current_time_ms},duration:function(){return this.$store.state.videoPlay.duration}},watch:{},methods:{videoPlayOrPause:function(t){this.$store.commit("setVideoPlayOrPasu",t)},setVideoPlayMuted:function(t){this.$store.commit("setVideoPlayMuted",t)}},components:{},created:function(){},mounted:function(){}},Ut=Yt,qt=(i("4a30"),Object(y["a"])(Ut,Ft,Kt,!1,null,"59c04c08",null)),Gt=qt.exports,Jt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dragWrap"},t._l(t.decorate_list_temp,(function(e,n){return i("vue-draggable-resizable",{key:n,attrs:{w:e.w,h:e.h,x:e.x,y:e.y,active:t.decorate_active_id==e.id,parent:!0,resizable:e.resizable},on:{"update:active":function(i){return t.activated(arguments,e)},dragstop:t.onDragStop,resizestop:t.onResizeStop}})})),1)},Qt=[],Zt=(i("3f7e"),{name:"decorateTrack",props:{},mixins:[E["a"]],data:function(){return{resizable:!0,decorate_list_temp:[],active:!1}},computed:{videoPlayStatus:function(){return this.$store.state.videoPlay.video_play_status},decorate_list:function(){return this.$store.state.decorate_list},decorate_active_id:function(){return this.$store.state.decorate_active_id},progrees_x:function(){return this.$store.state.progrees_x}},watch:{decorate_list:function(){this.$emit("changeDecorateList"),this.setDecorateListTemp()},progrees_x:function(t){this.setDecorateListTemp()}},methods:{setDecorateListTemp:function(){var t=this.progrees_x;this.decorate_list_temp=this.decorate_list.filter((function(e){if(t>=e.trackLeft&&t<=e.trackLeft+e.trackWidth)return e}))},activated:function(t,e){this.active=t[0],this.active&&this.$store.commit("setdecorateActiveId",e.id)},onDragStartCallback:function(t){t.stopPropagation()},onDragStop:function(t,e){this.setTrackData({x:t,y:e},this.decorate_active_id)},onResizeStop:function(t,e,i,n){this.setTrackData({x:t,y:e,w:i,h:n},this.decorate_active_id)}},components:{dragBox:R},created:function(){},mounted:function(){}}),te=Zt,ee=(i("0d5f"),Object(y["a"])(te,Jt,Qt,!1,null,null,null)),ie=ee.exports,ne={name:"videoPad",props:{playerOptions:{type:Object,default:function(){return{proViewStatus:!1,height:"360",autoplay:!0,muted:!1,language:"en",playbackRates:[.7,1,1.5,2],fluid:!0,src:"",poster:""}}}},data:function(){return{end_time:void 0}},mixins:[Vt,It],components:{videoControl:Gt,decorateBox:ie},computed:{player:function(){return this.$refs.videoPlayer.player},videoPlayStatus:function(){return this.$store.state.videoPlay.video_play_status}},methods:{onPlayerLoadeddata:function(t){this.playerOptions.hls||this.$store.commit("setDurantion",1e3*t.duration),this.$store.commit("setPlayLoadeddataStatus",!0)},playerStateChanged:function(t){},onPlayerPlay:function(t){this.$store.commit("setVideoPlayStatus","play"),this.switchToCanvas()},onPlayerPause:function(t){this.$store.commit("setVideoPlayStatus","pause")},onPlayerEnded:function(t){},onPlayerWaiting:function(t){},onPlayerPlaying:function(t){},onPlayerTimeupdate:function(t){t.currentTime>=this.end_time&&this.proViewStatus&&(this.proViewStatus=!1,t.currentTime=this.end_time,t.pause()),this.$store.commit("setVideoCurrentTime",1e3*t.currentTime)},onPlayerCanplay:function(t){this.$store.commit("setPlayerReadyStatus",!0),this.setCurrentTimeMs(t),this.setStartTimeMs(t)},onPlayerCanplaythrough:function(t){},onPlayerError:function(t,e){var i=document.getElementById("videoCanvas"),n=i.width,a=i.height,s=i.getContext("2d");s.fillStyle="#DC143C",s.strokeStyle="#ddd",s.font="bold 16px '字体','字体','微软雅黑','宋体'",s.textAlign="center",s.fillText("糟糕，视频出错了 !",n/2,a/2)}},mounted:function(){var t=this;this.$bus.$on("setTime",(function(e){t.proViewStatus=!0,t.player.pause(),t.player.currentTime=e.start_ms/1e3,t.end_time=e.end_ms/1e3})),document.onkeydown=function(e){var i=e||window.event;if(i){var n=i.keyCode;return t.keyEvents()[n]&&t.keyEvents(t.player)[n](),!1}}},beforeDestroy:function(){this.$bus.$off("setTime")},created:function(){}},ae=ne,se=(i("03fe"),Object(y["a"])(ae,Nt,At,!1,null,null,null)),oe=se.exports,re={props:{},data:function(){return{loading:!0,playerOptions:{height:"360",autoplay:!0,muted:!1,language:"en",playbackRates:[.7,1,1.5,2],fluid:!0,src:"http://video.cloud.tvmining.com/TVM/MP4_MAIN/NeiMengGuTV/2016/11/01/NeiMengGuTV_512000_20161101_21820898_0.mp4",poster:""}}},components:{videoPlay:oe},computed:{},watch:{},methods:{listenMessage:function(t){if("setVideoOptions"==t.data.cmd){var e=t.data,i=Object.assign(this.playerOptions,e.data);this.playerOptions=Object(jt["a"])({},i),this.loading=!1}if("setVideoDurantion"==t.data.cmd){var n=t.data;this.$store.commit("setDurantion",1e3*n.data)}if("getVideoEditAllData"==t.data.cmd){var a=this.$store.state;window.parent.postMessage({cmd:"exportVideoEditAllData",data:a},"*")}}},created:function(){},mounted:function(){window.addEventListener("message",this.listenMessage,!1)}},ce=re,ue=(i("7b6a"),Object(y["a"])(ce,Xt,Ht,!1,null,"bc0fff3a",null)),he=ue.exports,de={props:{},data:function(){return{}},computed:{},watch:{},methods:{},components:{editMain:Bt,meadia:he},created:function(){},mounted:function(){}},le=de,me=(i("bd5f"),Object(y["a"])(le,o,r,!1,null,null,null)),fe=me.exports,pe={name:"App",components:{Vmain:fe}},ge=pe,ve=(i("034f"),Object(y["a"])(ge,a,s,!1,null,null,null)),_e=ve.exports,ye=i("7736"),be={range:5},Pe={setTimeLineRange:function(t,e){t.range=e}},xe={state:be,mutations:Pe},we={state:{duration:0,player_is_ready:!1,player_loadeddata:!1,current_time_ms:100,video_play_status:"",video_play_muted:0},mutations:{setDurantion:function(t,e){t.duration=Math.max(e,4e3)},setPlayerReadyStatus:function(t,e){t.player_is_ready=e},setPlayLoadeddataStatus:function(t,e){t.player_loadeddata=e},setVideoCurrentTime:function(t,e){t.current_time_ms=e},setVideoPlayOrPasu:function(t,e){var i=document.getElementById("myVideo");e?i.play():i.pause()},setVideoPlayStatus:function(t,e){t.video_play_status=e},setVideoPlayMuted:function(t,e){t.video_play_muted=!e;var i=document.getElementById("myVideo");i.muted=!1,i.volume=t.video_play_muted?1:0,console.log("🚀 ~ file: video_state.js ~ line 40 ~ setVideoPlayMuted ~ state.video_play_muted",t.video_play_muted)}},actions:{},getters:{}},ke=i("313b"),Se={setPerPxMs:function(t,e){t.PER_PX_MS=e},setCurrentTimeMs:function(t,e){t.currrent_time_ms=e},setDecorateList:function(t,e){t.decorate_list=e},deleteDecorate:function(t,e){t.decorate_list=t.decorate_list.splice(e,1)},setProgreesX:function(t,e){t.progrees_x=e},setdecorateActiveId:function(t,e){t.decorate_active_id=e},setCutTrackDetails:function(t,e){var i=ke["Object"].assign(t.cut_details,e);t.cut_details=Object(jt["a"])({},i)}},Me={};n["a"].use(ye["a"]);var De=new ye["a"].Store({state:{PER_PX_MS:100,progrees_x:0,cut_details:{startMs:0,trackLeft:0,trackWidth:30},decorate_list:[],decorate_active_id:""},mutations:Se,actions:Me,modules:{range:xe,videoPlay:we}});i("275f");n["a"].filter("msToSecond",(function(t){var e,i,n,a="00:00:00";return t>0&&(i=Math.floor(t/6e4),i<10&&(i="0"+i),e=Math.floor(t/1e3-60*i),e<10&&(e="0"+e),n=(Math.floor(parseFloat(t)-6e4*i-1e3*e)/10).toFixed(),n<10&&(n="0"+n),a=i+":"+e+"."+n),a}));var Ce=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"videoWrap"},[i("video",{ref:"video",attrs:{id:"myVideo",autoplay:t.options.autoplay,muted:"",controlslist:"nodownload",preload:"auto",controls:"",src:t.options.src},domProps:{muted:!0}})])},Te=[],$e=i("275d"),Re=i.n($e),Ee=["loadeddata","canplay","canplaythrough","play","pause","waiting","playing","ended","timeupdate","seeked"],Le={props:{options:{type:Object,required:!0},events:{type:Array,default:function(){return[]}}},data:function(){return{player:null}},components:{},computed:{},watch:{},methods:{setHls:function(){var t=this;if(this.options.hls&&Re.a.isSupported()){var e=document.getElementById("myVideo"),i=new Re.a;i.attachMedia(e),i.on(Re.a.Events.MEDIA_ATTACHED,(function(){i.loadSource(t.options.src),i.on(Re.a.Events.MANIFEST_PARSED,(function(t,e){console.log("manifest loaded, found "+e.levels.length+" quality level")}))}))}},initialize:function(){var t=this;this.options.crossOrigin&&(this.$refs.video.crossOrigin=this.options.crossOrigin,this.$refs.video.setAttribute("crossOrigin",this.options.crossOrigin));var e=function(e,i){t.$emit(e,t.player)};this.player=document.getElementById("myVideo"),this.player.addEventListener("error",(function(e){t.$emit("error",t.player,e)}));for(var i=Ee.concat(self.events),n=function(n){t.player.addEventListener(i[n],(function(){e(i[n],this.player)}),!1)},a=0;a<i.length;a++)n(a)}},created:function(){},mounted:function(){this.setHls(),this.initialize()}},ze=Le,Oe=Object(y["a"])(ze,Ce,Te,!1,null,"d2ba3aa6",null),We=Oe.exports,Be=i("3266");n["a"].use(Lt["b"]),n["a"].component("vue-draggable-resizable",Be["a"]),n["a"].component("video-player",We),n["a"].prototype.$bus=yt,n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(_e)},store:De}).$mount("#app")},"688e":function(t,e,i){},"6fd8":function(t,e,i){},"7b6a":function(t,e,i){"use strict";i("c16f")},"839b":function(t,e,i){"use strict";var n=function(){var t,e=this,i=e.$createElement,n=e._self._c||i;return n("div",{class:[(t={},t[e.classNameActive]=e.enabled,t[e.classNameDragging]=e.dragging,t[e.classNameResizing]=e.resizing,t[e.classNameDraggable]=e.draggable,t[e.classNameResizable]=e.resizable,t),e.className],style:e.style,on:{mousedown:e.elementMouseDown,touchstart:e.elementTouchDown}},[e._l(e.actualHandles,(function(t){return n("div",{key:t,class:[e.classNameHandle,e.classNameHandle+"-"+t],style:{display:e.enabled?"block":"none"},on:{mousedown:function(i){return i.stopPropagation(),i.preventDefault(),e.handleDown(t,i)},touchstart:function(i){return i.stopPropagation(),i.preventDefault(),e.handleTouchDown(t,i)}}},[e._t(t)],2)})),e._t("default")],2)},a=[],s=i("1c03"),o=i("07a3");i("e1d4"),i("b1fa"),i("356d"),i("2e6f"),i("af21"),i("3f7e"),i("bc44"),i("1130"),i("2769"),i("c5ce"),i("3979"),i("a5c9"),i("fc2a");function r(t){return"function"===typeof t||"[object Function]"===Object.prototype.toString.call(t)}function c(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=Math.round(e/n/t[0])*t[0],s=Math.round(i/n/t[1])*t[1];return[a,s]}function u(t,e,i){return t-e-i}function h(t,e,i){return t-e-i}function d(t,e,i){return null!==e&&t<e?e:null!==i&&i<t?i:t}function l(t,e,i){var n=t,a=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find((function(t){return r(n[t])}));if(!r(n[a]))return!1;do{if(n[a](e))return!0;if(n===i)return!1;n=n.parentNode}while(n);return!1}function m(t){var e=window.getComputedStyle(t);return[parseFloat(e.getPropertyValue("width"),10),parseFloat(e.getPropertyValue("height"),10)]}function f(t,e,i){t&&(t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener?t.addEventListener(e,i,!0):t["on"+e]=i)}function p(t,e,i){t&&(t.detachEvent?t.detachEvent("on"+e,i):t.removeEventListener?t.removeEventListener(e,i,!0):t["on"+e]=null)}var g={mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"},touch:{start:"touchstart",move:"touchmove",stop:"touchend"}},v={userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",MsUserSelect:"none"},_={userSelect:"auto",MozUserSelect:"auto",WebkitUserSelect:"auto",MsUserSelect:"auto"},y=g.mouse,b={replace:!0,name:"vue-draggable-resizable",props:{className:{type:String,default:"vdr"},classNameDraggable:{type:String,default:"draggable"},classNameResizable:{type:String,default:"resizable"},classNameDragging:{type:String,default:"dragging"},classNameResizing:{type:String,default:"resizing"},classNameActive:{type:String,default:"active"},classNameHandle:{type:String,default:"handle"},disableUserSelect:{type:Boolean,default:!0},enableNativeDrag:{type:Boolean,default:!1},preventDeactivation:{type:Boolean,default:!1},active:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},lockAspectRatio:{type:Boolean,default:!1},w:{type:[Number,String],default:200,validator:function(t){return"number"===typeof t?t>0:"auto"===t}},h:{type:[Number,String],default:200,validator:function(t){return"number"===typeof t?t>0:"auto"===t}},minWidth:{type:Number,default:0,validator:function(t){return t>=0}},minHeight:{type:Number,default:0,validator:function(t){return t>=0}},maxWidth:{type:Number,default:null,validator:function(t){return t>=0}},maxHeight:{type:Number,default:null,validator:function(t){return t>=0}},x:{type:Number,default:0},y:{type:Number,default:0},z:{type:[String,Number],default:"auto",validator:function(t){return"string"===typeof t?"auto"===t:t>=0}},handles:{type:Array,default:function(){return["tl","tm","tr","mr","br","bm","bl","ml"]},validator:function(t){var e=new Set(["tl","tm","tr","mr","br","bm","bl","ml"]);return new Set(t.filter((function(t){return e.has(t)}))).size===t.length}},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},axis:{type:String,default:"both",validator:function(t){return["x","y","both"].includes(t)}},grid:{type:Array,default:function(){return[1,1]}},parent:{type:Boolean,default:!1},parentW:{type:Number,default:0},scale:{type:Number,default:1,validator:function(t){return t>0}},onDragStart:{type:Function,default:function(){return!0}},onDrag:{type:Function,default:function(){return!0}},onResizeStart:{type:Function,default:function(){return!0}},onResize:{type:Function,default:function(){return!0}},onCreated:{type:Function,default:function(){return!0}}},data:function(){return{left:this.x,top:this.y,right:null,bottom:null,width:null,height:null,widthTouched:!1,heightTouched:!1,aspectFactor:null,parentWidth:null,parentHeight:null,minW:this.minWidth,minH:this.minHeight,maxW:this.maxWidth,maxH:this.maxHeight,handle:null,enabled:this.active,resizing:!1,dragging:!1,zIndex:this.z}},created:function(){this.maxWidth&&this.minWidth>this.maxWidth&&console.warn("[Vdr warn]: Invalid prop: minWidth cannot be greater than maxWidth"),this.maxWidth&&this.minHeight>this.maxHeight&&console.warn("[Vdr warn]: Invalid prop: minHeight cannot be greater than maxHeight"),this.resetBoundsAndMouseState()},mounted:function(){this.initBaseData(),f(document.documentElement,"mousedown",this.deselect),f(document.documentElement,"touchend touchcancel",this.deselect),f(window,"resize",this.checkParentSize),this.$emit("onCreated",this.left,this.top,this.width,this.height)},beforeDestroy:function(){p(document.documentElement,"mousedown",this.deselect),p(document.documentElement,"touchstart",this.handleUp),p(document.documentElement,"mousemove",this.move),p(document.documentElement,"touchmove",this.move),p(document.documentElement,"mouseup",this.handleUp),p(document.documentElement,"touchend touchcancel",this.deselect),p(window,"resize",this.checkParentSize)},methods:{initBaseData:function(){this.checkParentSize(),this.enableNativeDrag||(this.$el.ondragstart=function(){return!1});var t=this.getParentSize(),e=Object(o["a"])(t,2),i=e[0],n=e[1];this.parentWidth=i,this.parentHeight=n;var a=m(this.$el),s=Object(o["a"])(a,2),r=s[0],c=s[1];this.aspectFactor=("auto"!==this.w?this.w:r)/("auto"!==this.h?this.h:c),this.width="auto"!==this.w?this.w:r,this.height="auto"!==this.h?this.h:c,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top},resetBoundsAndMouseState:function(){this.mouseClickPosition={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.bounds={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null}},checkParentSize:function(){if(this.parent){var t=this.getParentSize(),e=Object(o["a"])(t,2),i=e[0],n=e[1];this.parentWidth=i,this.parentHeight=n}},getParentSize:function(){if(this.parent){var t=window.getComputedStyle(this.$el.parentNode,null),e=parseInt(t.getPropertyValue("width"),10),i=parseInt(t.getPropertyValue("height"),10);return this.parentW>1&&(e=this.parentW),[e,i]}return[null,null]},elementTouchDown:function(t){y=g.touch,this.elementDown(t)},elementMouseDown:function(t){y=g.mouse,this.elementDown(t)},elementDown:function(t){if(!(t instanceof MouseEvent&&1!==t.which)){var e=t.target||t.srcElement;if(this.$el.contains(e)){if(!1===this.onDragStart(t))return;if(this.dragHandle&&!l(e,this.dragHandle,this.$el)||this.dragCancel&&l(e,this.dragCancel,this.$el))return void(this.dragging=!1);this.enabled||(this.enabled=!0,this.$emit("activated"),this.$emit("update:active",!0)),this.draggable&&(this.dragging=!0),this.mouseClickPosition.mouseX=t.touches?t.touches[0].pageX:t.pageX,this.mouseClickPosition.mouseY=t.touches?t.touches[0].pageY:t.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.parent&&(this.bounds=this.calcDragLimits()),f(document.documentElement,y.move,this.move),f(document.documentElement,y.stop,this.handleUp)}}},calcDragLimits:function(){return{minLeft:this.left%this.grid[0],maxLeft:Math.floor((this.parentWidth-this.width-this.left)/this.grid[0])*this.grid[0]+this.left,minRight:this.right%this.grid[0],maxRight:Math.floor((this.parentWidth-this.width-this.right)/this.grid[0])*this.grid[0]+this.right,minTop:this.top%this.grid[1],maxTop:Math.floor((this.parentHeight-this.height-this.top)/this.grid[1])*this.grid[1]+this.top,minBottom:this.bottom%this.grid[1],maxBottom:Math.floor((this.parentHeight-this.height-this.bottom)/this.grid[1])*this.grid[1]+this.bottom}},deselect:function(t){var e=t.target||t.srcElement,i=new RegExp(this.className+"-([trmbl]{2})","");this.$el.contains(e)||i.test(e.className)||(this.enabled&&!this.preventDeactivation&&(this.enabled=!1,this.$emit("deactivated"),this.$emit("update:active",!1)),p(document.documentElement,y.move,this.handleResize)),this.resetBoundsAndMouseState()},handleTouchDown:function(t,e){y=g.touch,this.handleDown(t,e)},handleDown:function(t,e){e instanceof MouseEvent&&1!==e.which||!1!==this.onResizeStart(t,e)&&(e.stopPropagation&&e.stopPropagation(),this.lockAspectRatio&&!t.includes("m")?this.handle="m"+t.substring(1):this.handle=t,this.resizing=!0,this.mouseClickPosition.mouseX=e.touches?e.touches[0].pageX:e.pageX,this.mouseClickPosition.mouseY=e.touches?e.touches[0].pageY:e.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.bounds=this.calcResizeLimits(),f(document.documentElement,y.move,this.handleResize),f(document.documentElement,y.stop,this.handleUp))},calcResizeLimits:function(){var t=this.minW,e=this.minH,i=this.maxW,n=this.maxH,a=this.aspectFactor,s=Object(o["a"])(this.grid,2),r=s[0],c=s[1],u=this.width,h=this.height,d=this.left,l=this.top,m=this.right,f=this.bottom;this.lockAspectRatio&&(t/e>a?e=t/a:t=a*e,i&&n?(i=Math.min(i,a*n),n=Math.min(n,i/a)):i?n=i/a:n&&(i=a*n)),i-=i%r,n-=n%c;var p={minLeft:null,maxLeft:null,minTop:null,maxTop:null,minRight:null,maxRight:null,minBottom:null,maxBottom:null};return this.parent?(p.minLeft=d%r,p.maxLeft=d+Math.floor((u-t)/r)*r,p.minTop=l%c,p.maxTop=l+Math.floor((h-e)/c)*c,p.minRight=m%r,p.maxRight=m+Math.floor((u-t)/r)*r,p.minBottom=f%c,p.maxBottom=f+Math.floor((h-e)/c)*c,i&&(p.minLeft=Math.max(p.minLeft,this.parentWidth-m-i),p.minRight=Math.max(p.minRight,this.parentWidth-d-i)),n&&(p.minTop=Math.max(p.minTop,this.parentHeight-f-n),p.minBottom=Math.max(p.minBottom,this.parentHeight-l-n)),this.lockAspectRatio&&(p.minLeft=Math.max(p.minLeft,d-l*a),p.minTop=Math.max(p.minTop,l-d/a),p.minRight=Math.max(p.minRight,m-f*a),p.minBottom=Math.max(p.minBottom,f-m/a))):(p.minLeft=null,p.maxLeft=d+Math.floor((u-t)/r)*r,p.minTop=null,p.maxTop=l+Math.floor((h-e)/c)*c,p.minRight=null,p.maxRight=m+Math.floor((u-t)/r)*r,p.minBottom=null,p.maxBottom=f+Math.floor((h-e)/c)*c,i&&(p.minLeft=-(m+i),p.minRight=-(d+i)),n&&(p.minTop=-(f+n),p.minBottom=-(l+n)),this.lockAspectRatio&&i&&n&&(p.minLeft=Math.min(p.minLeft,-(m+i)),p.minTop=Math.min(p.minTop,-(n+f)),p.minRight=Math.min(p.minRight,-d-i),p.minBottom=Math.min(p.minBottom,-l-n))),p},move:function(t){this.resizing?this.handleResize(t):this.dragging&&this.handleDrag(t)},handleDrag:function(t){var e=this.axis,i=this.grid,n=this.bounds,a=this.mouseClickPosition,s=e&&"y"!==e?a.mouseX-(t.touches?t.touches[0].pageX:t.pageX):0,r=e&&"x"!==e?a.mouseY-(t.touches?t.touches[0].pageY:t.pageY):0,u=c(i,s,r,this.scale),h=Object(o["a"])(u,2),l=h[0],m=h[1],f=d(a.left-l,n.minLeft,n.maxLeft),p=d(a.top-m,n.minTop,n.maxTop);if(!1!==this.onDrag(f,p)){var g=d(a.right+l,n.minRight,n.maxRight),v=d(a.bottom+m,n.minBottom,n.maxBottom);this.left=f,this.top=p,this.right=g,this.bottom=v,this.$emit("dragging",this.left,this.top)}},moveHorizontally:function(t){var e=c(this.grid,t,this.top,this.scale),i=Object(o["a"])(e,2),n=i[0],a=(i[1],d(n,this.bounds.minLeft,this.bounds.maxLeft));this.left=a,this.right=this.parentWidth-this.width-a},moveVertically:function(t){var e=c(this.grid,this.left,t,this.scale),i=Object(o["a"])(e,2),n=(i[0],i[1]),a=d(n,this.bounds.minTop,this.bounds.maxTop);this.top=a,this.bottom=this.parentHeight-this.height-a},handleResize:function(t){var e=this.left,i=this.top,n=this.right,a=this.bottom,s=this.mouseClickPosition,r=(this.lockAspectRatio,this.aspectFactor),l=s.mouseX-(t.touches?t.touches[0].pageX:t.pageX),m=s.mouseY-(t.touches?t.touches[0].pageY:t.pageY);!this.widthTouched&&l&&(this.widthTouched=!0),!this.heightTouched&&m&&(this.heightTouched=!0);var f=c(this.grid,l,m,this.scale),p=Object(o["a"])(f,2),g=p[0],v=p[1];this.handle.includes("b")?(a=d(s.bottom+v,this.bounds.minBottom,this.bounds.maxBottom),this.lockAspectRatio&&this.resizingOnY&&(n=this.right-(this.bottom-a)*r)):this.handle.includes("t")&&(i=d(s.top-v,this.bounds.minTop,this.bounds.maxTop),this.lockAspectRatio&&this.resizingOnY&&(e=this.left-(this.top-i)*r)),this.handle.includes("r")?(n=d(s.right+g,this.bounds.minRight,this.bounds.maxRight),this.lockAspectRatio&&this.resizingOnX&&(a=this.bottom-(this.right-n)/r)):this.handle.includes("l")&&(e=d(s.left-g,this.bounds.minLeft,this.bounds.maxLeft),this.lockAspectRatio&&this.resizingOnX&&(i=this.top-(this.left-e)/r));var _=u(this.parentWidth,e,n),y=h(this.parentHeight,i,a);!1!==this.onResize(this.handle,e,i,_,y)&&(this.left=e,this.top=i,this.right=n,this.bottom=a,this.width=_,this.height=y,this.$emit("resizing",this.left,this.top,this.width,this.height))},changeWidth:function(t){var e=c(this.grid,t,0,this.scale),i=Object(o["a"])(e,2),n=i[0],a=(i[1],d(this.parentWidth-n-this.left,this.bounds.minRight,this.bounds.maxRight)),s=this.bottom;this.lockAspectRatio&&(s=this.bottom-(this.right-a)/this.aspectFactor);var r=u(this.parentWidth,this.left,a),l=h(this.parentHeight,this.top,s);this.right=a,this.bottom=s,this.width=r,this.height=l},changeHeight:function(t){var e=c(this.grid,0,t,this.scale),i=Object(o["a"])(e,2),n=(i[0],i[1]),a=d(this.parentHeight-n-this.top,this.bounds.minBottom,this.bounds.maxBottom),s=this.right;this.lockAspectRatio&&(s=this.right-(this.bottom-a)*this.aspectFactor);var r=u(this.parentWidth,this.left,s),l=h(this.parentHeight,this.top,a);this.right=s,this.bottom=a,this.width=r,this.height=l},handleUp:function(t){this.handle=null,this.resetBoundsAndMouseState(),this.resizing&&(this.resizing=!1,this.$emit("resizestop",this.left,this.top,this.width,this.height)),this.dragging&&(this.dragging=!1,this.$emit("dragstop",this.left,this.top)),p(document.documentElement,y.move,this.handleResize)}},computed:{style:function(){return Object(s["a"])({transform:"translate(".concat(this.left,"px, ").concat(this.top,"px)"),width:this.computedWidth,height:this.computedHeight,zIndex:this.zIndex},this.dragging&&this.disableUserSelect?v:_)},actualHandles:function(){return this.resizable?this.handles:[]},computedWidth:function(){return"auto"!==this.w||this.widthTouched?this.width+"px":"auto"},computedHeight:function(){return"auto"!==this.h||this.heightTouched?this.height+"px":"auto"},resizingOnX:function(){return Boolean(this.handle)&&(this.handle.includes("l")||this.handle.includes("r"))},resizingOnY:function(){return Boolean(this.handle)&&(this.handle.includes("t")||this.handle.includes("b"))},isCornerHandle:function(){return Boolean(this.handle)&&["tl","tr","br","bl"].includes(this.handle)}},watch:{active:function(t){this.enabled=t,t?this.$emit("activated"):this.$emit("deactivated")},z:function(t){(t>=0||"auto"===t)&&(this.zIndex=t)},x:function(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveHorizontally(t))},y:function(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveVertically(t))},lockAspectRatio:function(t){this.aspectFactor=t?this.width/this.height:void 0},minWidth:function(t){t>0&&t<=this.width&&(this.minW=t)},minHeight:function(t){t>0&&t<=this.height&&(this.minH=t)},maxWidth:function(t){this.maxW=t},maxHeight:function(t){this.maxH=t},w:function(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeWidth(t))},h:function(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeHeight(t))}}},P=b,x=i("4ac2"),w=Object(x["a"])(P,n,a,!1,null,null,null);e["a"]=w.exports},"8f9a":function(t,e,i){"use strict";i("c9dc")},9109:function(t,e,i){},"93a7":function(t,e,i){"use strict";i("c52f")},"9de7":function(t,e,i){},abaa:function(t,e,i){"use strict";i("acd4")},acd4:function(t,e,i){},aefc:function(t,e,i){},b025:function(t,e,i){},b052:function(t,e,i){"use strict";i("688e")},bd5f:function(t,e,i){"use strict";i("aefc")},c16f:function(t,e,i){},c2c0:function(t,e,i){},c3a4:function(t,e,i){},c52f:function(t,e,i){},c9dc:function(t,e,i){},cc98:function(t,e,i){},d6a7:function(t,e,i){"use strict";i("b025")},d717:function(t,e,i){"use strict";i("cc98")},e680:function(t,e,i){},eb66:function(t,e,i){},f10c:function(t,e,i){"use strict";i("6fd8")}});
//# sourceMappingURL=app.44991a67.js.map