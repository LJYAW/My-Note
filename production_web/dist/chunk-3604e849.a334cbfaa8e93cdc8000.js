(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3604e849"],{"65a2":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-table-wrap"},[a("div",{staticStyle:{position:"absolute",right:"20px",top:"20px"}},[a("base-epg-open-qt")],1),a("taskStatistics"),a("taskDeatils")],1)},l=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"edit-task-table"},[a("div",{staticClass:"search-top"},[a("div",{staticClass:"item-search"},[a("span",{staticClass:"item-label"},[t._v("日期:")]),a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),a("div",{staticClass:"item-search btns"},[a("base-btn",{attrs:{size:"big"},nativeOn:{click:function(e){return t.getTaskList(e)}}},[t._v("搜索")])],1)]),a("div",{staticClass:"task-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"table-list",staticStyle:{"margin-top":"15px"},attrs:{data:t.tableData,"span-method":t.dataSpanMethod,"show-summary":"",border:"","summary-method":t.getSummaries}},[a("el-table-column",[[t._v(" "+t._s(t.userName)+" ")]],2),a("el-table-column",{attrs:{label:"任务条",prop:"duration"}}),a("el-table-column",{attrs:{prop:"processingEfficiency",label:"时效(分钟)"}}),a("el-table-column",{attrs:{prop:"finishNum",label:"完成（条）"}}),a("el-table-column",{attrs:{prop:"finishDuration",label:"完成（小时）"}}),a("el-table-column",{attrs:{prop:"percent",label:"占比(%)"}}),a("el-table-column",{attrs:{prop:"hangUpNum",label:"挂起(条)"}}),a("el-table-column",{attrs:{prop:"hangUpDuration",label:"挂起(小时)"}})],1)],1)])])},s=[],o=(a("08ba"),a("a59a")),r={components:{},data:function(){return{totalInfo:{},total:null,form:{date:[Object(o["a"])(new Date),Object(o["a"])(new Date)],page:1,limit:10},tableData:[],userName:"",loading:!1}},computed:{},watch:{},created:function(){this.getTaskList()},mounted:function(){},methods:{handleSizeChange:function(t){this.form.limit=t},handleCurrentChange:function(t){this.form.page=t},dataSpanMethod:function(t){t.row,t.column;var e=t.rowIndex,a=t.columnIndex;if(0===a)return e%this.tableData.length===0?{rowspan:this.tableData.length,colspan:1}:{rowspan:0,colspan:0}},getSummaries:function(t){var e=this,a=[];if(this.tableData){var n=t.columns,l=[];return n.forEach((function(t){e.totalInfo[t.property]?l.push(e.totalInfo[t.property]):l.push("")})),a=l,a[0]="合计",a}},getTaskList:function(){var t=this;this.loading=!0;var e={start_date:this.form.date?this.form.date[0]:"",end_date:this.form.date?this.form.date[1]:""};this.$get("/epg-task/tj",e).then((function(e){t.userName=e.data.nickname,t.tableData=e.data.list,t.total=e.data.list.length,t.totalInfo=JSON.parse(JSON.stringify(e.data.totalInfo)),t.loading=!1})).catch((function(e){t.$message.error(e.msg),t.loading=!1}))}}},c=r,u=(a("ec49"),a("4ac2")),d=Object(u["a"])(c,i,s,!1,null,"c653bc22",null),m=d.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"task-details"},[a("div",{staticClass:"top-title"},[t._v(" 任务明细 ")]),a("div",{staticClass:"top-details"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"频道:"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择频道名称"},model:{value:t.form.channel_id,callback:function(e){t.$set(t.form,"channel_id",e)},expression:"form.channel_id"}},t._l(t.channelData,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"TID:"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入TID"},model:{value:t.form.task_id,callback:function(e){t.$set(t.form,"task_id",e)},expression:"form.task_id"}})],1),a("base-btn",{attrs:{size:"big"},nativeOn:{click:function(e){return t.search(e)}}},[t._v("搜索")])],1)],1),a("div",{staticClass:"details-table"},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"编辑记录",name:"编辑记录"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"table-list",staticStyle:{"margin-top":"15px"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"TID",prop:"task_id"}}),a("el-table-column",{attrs:{prop:"channel_name",label:"频道名称"}}),a("el-table-column",{attrs:{prop:"time",label:"任务时间段"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.start_date_time)),a("br"),t._v(" "+t._s(e.row.end_date_time)+" ")]}}])}),a("el-table-column",{attrs:{label:"切点数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.epg_points.length||0)+" ")]}}])}),a("el-table-column",{attrs:{prop:"updated_at",label:"提交时间"}}),a("el-table-column",{attrs:{label:"切点明细"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"start-task",on:{click:function(a){return t.edit(e)}}},[t._v("查看明细")])]}}])})],1)],1)],1)],1),a("div",{staticClass:"pagination-list"},[a("base-pag",{attrs:{total:t.total,limit:t.form.limit,page:t.form.page},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1),a("base-dialog",{attrs:{show:t.show,title:"切点明细",width:"400"},on:{close:t.close}},[a("el-table",{staticClass:"table-list",staticStyle:{"margin-top":"15px"},attrs:{data:t.epg_points,border:""}},[a("el-table-column",{attrs:{label:"类型",prop:"task_id"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.type+e.row.position)+" ")]}}])}),a("el-table-column",{attrs:{prop:"start_date_time",label:"切点"}}),a("el-table-column",{attrs:{prop:"title",label:"标题"}})],1)],1)],1)])},h=[],f=a("1c03"),b=a("52c1"),g={components:{},data:function(){return{keywords:"",tableData:[],loading:!1,activeName:"编辑记录",total:null,form:{channel_id:null,task_id:null,page:1,limit:10},show:!1,epg_points:[]}},computed:Object(f["a"])({},Object(b["b"])(["channelData","itemData"])),watch:{"form.channel_id":function(t){this.getItemList(),this.form.item_id=null}},created:function(){this.channelData.length||this.$store.dispatch("channel/getChannelData"),this.getItemList(),this.getRecordList()},mounted:function(){},methods:{search:function(){this.form.page=1,this.getRecordList()},edit:function(t){this.show=!0,this.epg_points=t.row.epg_points},close:function(){this.show=!1},blur:function(){0===this.itemData.length&&(this.keywords="",this.getItemList())},clearData:function(){this.keywords="",this.getItemList()},getItemList:function(){this.$store.dispatch("channel/getItemList",{channel_id:this.form.channel_id,keyword:this.keywords})},dataFilter:function(t){this.keywords=t,this.getItemList()},handleSizeChange:function(t){this.form.limit=t,this.getRecordList()},handleCurrentChange:function(t){this.form.page=t,this.getRecordList()},getRecordList:function(){var t=this;this.loading=!0;var e=JSON.parse(JSON.stringify(this.form));e.channel_id=e.channel_id||null,e.task_id=e.task_id||null,this.$get("/epg-task/epg-task-list-with-points",e).then((function(e){t.tableData=e.data.list,t.total=e.data.total,t.loading=!1})).catch((function(e){t.$message.error(e.msg)}))}}},_=g,v=(a("efe3"),Object(u["a"])(_,p,h,!1,null,"65e590e8",null)),k=v.exports,w={components:{taskStatistics:m,taskDeatils:k},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},y=w,D=(a("d902"),Object(u["a"])(y,n,l,!1,null,null,null));e["default"]=D.exports},"8b5e":function(t,e,a){},"8f3b":function(t,e,a){},a59a:function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return l})),a.d(e,"b",(function(){return i}));a("e35a"),a("5e9f"),a("0d7a"),a("513c");function n(t){var e,a=parseInt(t%864e5/36e5),n=parseInt(t%36e5/6e4),l=t%6e4/1e3;return e=(a<10?"0"+a:a)+":"+(n<10?"0"+n:n)+":"+(l<10?"0"+l:l),e}function l(t){if(!isNaN(t))var e=new Date(t);var a=e.getFullYear(),n=e.getMonth()+1+"",l=e.getDate()+"";return n=n.replace(/\b\d\b/g,"0$&"),l=l.replace(/\b\d\b/g,"0$&"),a+"-"+n+"-"+l}function i(t){var e=t.split(":"),a=36e5*Number(e[0]),n=6e4*Number(e[1]),l=1e3*Number(e[2]);return Math.floor((a+n+l)/60)}},d902:function(t,e,a){"use strict";a("ea58")},ea58:function(t,e,a){},ec49:function(t,e,a){"use strict";a("8b5e")},efe3:function(t,e,a){"use strict";a("8f3b")}}]);