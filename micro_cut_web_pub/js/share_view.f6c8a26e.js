(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["share_view"],{"0ef1":function(t,e){t.exports="https://cdn-web.weijian.video/static/img/live_logoT.png"},"16c7":function(t,e,a){var i=a("373e");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("85cb").default;r("3fd3736c",i,!0,{sourceMap:!1,shadowMode:!1})},"1acd":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg-black fc-white",staticStyle:{overflow:"auto",position:"absolute",top:"0",left:"0",right:"0",bottom:"0"}},[a("div",{staticClass:"d-flex w-100 d-flex justify-content-center align-items-center ",staticStyle:{height:"2.75rem","font-size":"1.13rem"}},[t._v(t._s(t.channel_name))]),a("div",{staticClass:"w-100",staticStyle:{height:"13.13rem"}},[t.is_play&&!t.is_loop?a("div",{staticStyle:{background:"black",width:"100%",height:"100%"}},[t._m(0),a("div",{staticClass:"w-100 d-flex flex-column align-items-center",staticStyle:{"margin-top":"1rem"}},[t.textIS?a("div",{staticStyle:{color:"#7F714B","font-size":"18px"}},[t._v("距离直播开始还有")]):t._e(),t.textIS?a("div",{staticClass:"fc-white",staticStyle:{"margin-top":"2rem"}},[t._v("\n          "+t._s(t.allTimeVal)+"\n        ")]):t._e(),t.textIS?t._e():a("div",{staticStyle:{color:"#7F714B","font-size":"1.5rem"}},[t._v("\n          "+t._s(t.allTimeVal)+"\n        ")]),t.isNone?a("div",{staticStyle:{color:"#7F714B","font-size":"1.5rem"}},[t._v("\n          暂无直播内容\n        ")]):t._e(),t._m(1)])]):a("newVideoPlay",{staticStyle:{width:"100%",height:"100%"},attrs:{video_options:t.video_options}})],1),a("div",{staticClass:"d-flex justify-content-center align-items-center",staticStyle:{"margin-top":"1rem"}},t._l(t.menuList,(function(e,i){return a("div",{key:i,class:[{active:i==t.activeIndex}],staticStyle:{width:"6.25rem",height:"2.38rem","text-align":"center","line-height":"2.38rem",background:"#3E3E3E","border-radius":"0.31rem","font-size":"0.88rem"},on:{click:function(e){t.activeIndex=i}}},[t._v(t._s(e))])})),0),a("div",[0==t.activeIndex?a("div",[a("div",{staticClass:"w-100 d-flex justify-content-center",staticStyle:{color:"#999999","font-size":"0.88rem","margin-top":"1rem"}},[t._v(t._s(t.date)+" "+t._s(t.weekVal))]),a("div",{staticStyle:{padding:"0 1rem","margin-top":"0.5rem"}},[a("ul",{staticClass:"d-flex align-items-center",staticStyle:{overflow:"auto",height:"3rem"}},t._l(t.weekList,(function(e,i){return a("li",{key:i,class:["d-flex cp cp nowrap",{week_active:t.week_index==i}],staticStyle:{"margin-right":"2rem","font-size":"0.88rem",color:"#888",height:"1.6rem"},on:{click:function(a){t.week_index=i,t.getProgram(e)}}},[t._v("\n            "+t._s(e.dateDay)+"\n          ")])})),0)]),a("div",[a("ul",{staticClass:"w-100",style:{overflow:"auto",marginTop:"0.5rem",padding:"0 1rem",height:t.maxHeight}},t._l(t.allProgramList,(function(e,i){return a("li",{key:i,class:["d-flex nowrap justify-content-between",{program_active:t.program_index==i,none:1==e.isShow}],staticStyle:{color:"#888","font-size":"0.88rem","margin-bottom":"1rem"}},[a("div",{staticClass:"d-flex"},[a("div",{staticStyle:{width:"5rem"}},[t._v(t._s(e.broadcast_time))]),a("div",{staticStyle:{width:"11rem",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},attrs:{title:e.broadcast_name}},[t._v("\n                "+t._s(e.broadcast_name))])]),a("div",[t._v(t._s(e.status))])])})),0)])]):t._e(),1==t.activeIndex?a("div",{staticStyle:{padding:"1rem","font-size":"0.88rem",color:"#D0D0D0"}},[t._v(t._s(t.remark))]):t._e()])])},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"w-100 d-flex justify-content-end"},[i("img",{staticStyle:{height:"2rem"},attrs:{src:a("0ef1")}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("img",{staticStyle:{height:"2rem","margin-top":"2rem"},attrs:{src:a("f90e")}})])}],n=(a("f548"),a("6d57"),a("ff21"),{props:[],data:function(){return{weekList:[],weekVal:"",week_index:0,menuList:["节目单","频道简介"],activeIndex:0,video_options:{autoplay:!0,look_back:"",src:"",type:"application/x-mpegURL",is_live:!0},allProgramList:[],program_inde:0,date:"",timer:null,timerT:null,is_play:!0,textIS:!1,channel_id:this.$route.query.channel_id,allTimeVal:"",program_index:0,channel_name:"",remark:"",push_flow_url:"",isNone:!1,is_loop:!1,maxTime:"",endTimeALl:""}},computed:{maxHeight:function(){return(document.body.scrollHeight/16-3)/2+"rem"}},created:function(){document.setTitle=function(t){document.title=t;var e=document.createElement("iframe");e.src="//m.baidu.com/favicon.ico",e.style.display="none",e.onload=function(){setTimeout((function(){e.remove()}),9)},document.body.appendChild(e)},setTimeout((function(){document.setTitle("微剪-虚拟直播频道")}),100),this.getSelectUser()},methods:{getSelectUser:function(){var t=this,e={channel_id:this.channel_id};this.$post("live/mobile_select_user",e).then((function(e){"0000"==e.data.code&&(t.channel_name=e.data.data[0].channel_name,t.remark=e.data.data[0].remark,t.push_flow_url=e.data.data[0].push_flow_url,t.getDate(t.channel_id))}))},getDate:function(t){var e=this;this.$get("/live/program-list-date-h5",{params:{channel_id:t}}).then((function(t){"0000"==t.data.code&&(0!=t.data.data.length?(e.isNone=!1,t.data.data.forEach((function(t,e){t.dateDay=t.date.substring(5)})),e.weekList=t.data.data,e.weekList[0].dateDay="今天",e.getProgram(e.weekList[e.week_index])):e.isNone=!0)}))},getProgram:function(t,e){var a=this;clearInterval(this.timerT),this.allTimeVal="",this.is_loop=!1,this.is_play=!0,this.date=t.date.replace(/\-/g,"/"),this.weekVal=t.week;var i={channel_id:this.channel_id,broadcast_date:t.date};this.$get("/live/program-list-h5",{params:i}).then((function(e){if("0000"==e.data.code)if(e.data.data.list.length>0){a.maxTime=a.date.replace(/\-/g,"/")+" 23:59:59",a.maxTime=new Date(a.maxTime).getTime(new Date(a.maxTime))/1e3,a.allProgramList=e.data.data.list,a.program_title=a.allProgramList[0].broadcast_name,a.timer=setInterval(a.getForTime,1e3);for(var i=Date.parse(new Date)/1e3,r=0;r<a.allProgramList.length;r++){var n=a.allProgramList[r].broadcast_date.replace(/\-/g,"/")+" "+a.allProgramList[r].broadcast_time;if(n=new Date(n).getTime(new Date(n))/1e3,i<n+a.allProgramList[r].duration_num){a.endTimeVal=n,a.TimeNum(),a.textIS=!0;break}i>n+a.allProgramList[r].duration_num&&(clearInterval(a.timerT),a.allTimeVal="今天直播已结束!",a.textIS=!1)}t.date=t.date.replace(/\-/g,"/");var s=t.date+" "+a.allProgramList[0].broadcast_time;if(s=new Date(s).getTime(new Date(s))/1e3,s>i)a.is_loop=!1;else if(1==e.data.data.is_loop){a.is_loop=!0,a.video_options.src=a.push_flow_url;var o=setInterval((function(){a.endTimeALl=a.allProgramList[a.allProgramList.length-1].broadcast_date.replace(/\-/g,"/")+" "+a.allProgramList[a.allProgramList.length-1].broadcast_time,a.endTimeALl=new Date(a.endTimeALl).getTime(new Date(a.endTimeALl))/1e3,a.allProgramList.forEach((function(t,e){if(!(a.maxTime>a.endTimeALl))throw a.allProgramList.splice(a.allProgramList.length-1,1),clearInterval(o),new Error("停");a.endTimeALl=a.endTimeALl+t.duration_num;var i=a.timestampToTime(a.endTimeALl),r={broadcast_date:t.broadcast_date.replace(/\-/g,"/"),broadcast_name:t.broadcast_name,broadcast_time:i.substring(i.length-8),duration_num:t.duration_num,status:"重播"};a.allProgramList.push(r)}))}),100)}}else a.program_title="",a.allProgramList=[],a.is_play=!0,a.$store.commit("alertMsg","暂无内容")}))},timestampToTime:function(t){var e=new Date(1e3*t),a=e.getFullYear()+"-",i=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",r=(e.getDate()<10?"0"+e.getDate():e.getDate())+" ",n=(e.getHours()<10?"0"+e.getHours():e.getHours())+":",s=(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":",o=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return a+i+r+n+s+o},getForTime:function(){var t=this,e=Date.parse(new Date)/1e3;this.allProgramList.forEach((function(a,i){a.broadcast_date=a.broadcast_date.replace(/\-/g,"/");var r=a.broadcast_date+" "+a.broadcast_time;r=new Date(r).getTime(new Date(r))/1e3,e>r+a.duration_num?(a.status="已播",a.isShow=!0,t.program_index=i+1):r<e&&e<r+a.duration_num&&1==a.status?(a.status="正在直播",t.program_index=i,t.program_title=a.broadcast_name):e<r+a.duration_num&&1==a.status&&(a.status="未播",t.program_index=0)}));for(var a=0;a<this.allProgramList.length;a++){if("正在直播"==this.allProgramList[a].status){this.is_play=!1,this.video_options.src=this.push_flow_url,this.program_index=a;break}if(this.is_loop&&"重播"==this.allProgramList[a].status){this.is_play=!1,this.video_options.src=this.push_flow_url,this.program_title=item.broadcast_name,this.program_index=a;break}this.is_play=!0}},TimeNum:function(){var t=this,e=Date.parse(new Date)/1e3,a=this.endTimeVal;this.timerT=setInterval((function(){var i=a-e,r=parseInt(i/60/60/24,10),n=parseInt(i/60/60%24,10),s=parseInt(i/60%60,10),o=parseInt(i%60,10);r=t.checkTime(r),n=t.checkTime(n),s=t.checkTime(s),o=t.checkTime(o),i>0?(t.allTimeVal="00"==r?n+"时"+s+"分"+o+"秒":r+"天"+n+"时"+s+"分"+o+"秒",e++):0==i&&location.reload()}),1e3)},checkTime:function(t){return t<10&&(t="0"+t),t}},mounted:function(){},watch:{},components:{},destroyed:function(){clearInterval(this.timer),this.timer=null}}),s=n,o=(a("4566"),a("9ca4")),l=Object(o["a"])(s,i,r,!1,null,"1b1ff099",null);e["default"]=l.exports},"373e":function(t,e,a){e=t.exports=a("2365")(!1),e.push([t.i,"[data-v-1b1ff099] .video-js{width:100%;height:100%}.active[data-v-1b1ff099]{background:#c51b19!important}.week_active[data-v-1b1ff099]{border-bottom:.13rem solid #fff}.program_active[data-v-1b1ff099],.week_active[data-v-1b1ff099]{color:#fff!important}.none[data-v-1b1ff099]{pointer-events:none}",""])},4566:function(t,e,a){"use strict";var i=a("16c7"),r=a.n(i);r.a},f90e:function(t,e){t.exports="https://cdn-web.weijian.video/static/img/live_logo.png"}}]);