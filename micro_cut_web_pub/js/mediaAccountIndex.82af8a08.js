(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mediaAccountIndex"],{1007:function(t,e,a){"use strict";var i=a("e46b"),s=a("09b9"),n=a("ee21"),o=a("eafa"),r=[].lastIndexOf,c=!!r&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(c||!a("a2cd")(r)),"Array",{lastIndexOf:function(t){if(c)return r.apply(this,arguments)||0;var e=s(this),a=o(e.length),i=a-1;for(arguments.length>1&&(i=Math.min(i,n(arguments[1]))),i<0&&(i=a+i);i>=0;i--)if(i in e&&e[i]===t)return i||0;return-1}})},9632:function(t,e,a){var i=a("fab6");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("85cb").default;s("0a26a4c8",i,!0,{sourceMap:!1,shadowMode:!1})},c278:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"accountIndex p-20px"},[a("div",{staticClass:"font-weight-bold fz-16px fc-333"},[t._v("账号管理")]),a("div",{staticClass:"mt-20px p-20px bg-white"},[a("div",{staticClass:"d-flex justify-content-between align-items-center w-100"},[a("div",{staticClass:"d-flex"},[a("el-input",{staticStyle:{width:"193px",height:"30px"},attrs:{id:"input",placeholder:"搜索账号名称或号码","suffix-icon":"el-icon-search"},model:{value:t.form.keywords,callback:function(e){t.$set(t.form,"keywords",e)},expression:"form.keywords"}}),a("el-select",{staticClass:"ml-20px",attrs:{placeholder:"请选择平台"},model:{value:t.form.platform_id,callback:function(e){t.$set(t.form,"platform_id",e)},expression:"form.platform_id"}},t._l(t.programList,(function(t){return a("el-option",{key:t.platform_id,attrs:{label:t.platform_name,value:t.platform_id}})})),1),a("el-select",{staticClass:"mx-20px",attrs:{placeholder:"请选择分类"},model:{value:t.form.category_id,callback:function(e){t.$set(t.form,"category_id",e)},expression:"form.category_id"}},t._l(t.classList,(function(t){return a("el-option",{key:t.category_id,attrs:{label:t.name,value:t.category_id}})})),1),a("el-select",{attrs:{placeholder:"账号状态"},model:{value:t.form.login_status,callback:function(e){t.$set(t.form,"login_status",e)},expression:"form.login_status"}},t._l(t.statusTable,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),a("p",{staticClass:"btn ml-20px mr-10px",on:{click:function(e){return t.getList(!0)}}},[t._v("搜索")]),a("p",{staticClass:"btn",on:{click:function(e){return t.clean()}}},[t._v("重置")])],1),a("div",{staticClass:"d-flex"},[a("a",{staticClass:"cp fz-12px",staticStyle:{"line-height":"31px"},on:{click:t.dowload}},[t._v("\n          下载模版\n        ")]),a("p",{staticClass:"btn bg-black  mx-10px"},[a("upload",{attrs:{type:"MBxlsx",size:2048}},[t._v("导入excel")])],1),a("router-link",{staticClass:"btn bg-black",attrs:{to:{path:"/media_accountDetail"}},on:{click:function(t){t.stopPropagation()}}},[t._v("添加账号")])],1)]),a("div",[a("table",{staticClass:"mt-20px w-100 table"},[t._m(0),t._l(t.table_list,(function(e,i){return a("tr",{key:i,staticClass:" fz-14px"},[a("td",[t._v(t._s(i+1))]),a("td",[t._v(t._s(e.nickname))]),a("td",[t._v(t._s(e.platform_name))]),a("td",[t._v(t._s(e.login_status))]),a("td",[t._v(t._s(e.category_name))]),a("td",[t._v(t._s(e.fans_count))]),a("td",{staticClass:"cp",staticStyle:{width:"250px"}},[a("router-link",{staticClass:"fc-blue mr-10px",attrs:{to:{path:"/media_accountDetail",query:{id:e.account_id}}},on:{click:function(t){t.stopPropagation()}}},[t._v("编辑")]),a("span",{staticClass:"fc-blue mr-10px",on:{click:function(a){return t.edit(e)}}},[t._v("清空cookie")]),a("router-link",{staticClass:"fc-blue mr-10px",attrs:{to:{path:"/media_details",query:{account_id:e.account_id}}},on:{click:function(t){t.stopPropagation()}}},[t._v("查看")])],1)])}))],2),t.form.last_page>1?a("div",{staticClass:"paginationWrapper mt-100px d-flex justify-content-end"},[a("el-pagination",{attrs:{background:"","current-page":t.form.page,"page-size":t.form.limit,layout:"prev, pager, next, jumper",total:t.form.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.form,"page",e)},"update:current-page":function(e){return t.$set(t.form,"page",e)}}})],1):t._e()])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("序号")]),a("th",[t._v("账号")]),a("th",[t._v("平台")]),a("th",[t._v("状态")]),a("th",[t._v("分类")]),a("th",[t._v("粉丝数")]),a("th",[t._v("操作")])])])}],n=(a("5cb4"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["MBxlsx"==this.type?a("div",[a("a",{staticClass:"cp fc-white",on:{click:function(e){return t.choose()}}},[t._v("模版导入")])]):a("div",{staticClass:"cp fz-12px fc-white bg-blue",staticStyle:{width:"77px",height:"23px","border-radius":"40px","text-align":"center","line-height":"23px"},on:{click:function(e){return t.choose()}}},[t._v("点击上传")]),a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"upload_file",multiple:"",accept:t.fileAccept},on:{change:function(e){return t.fileChange(e)}}})])}),o=[],r=(a("9e76"),a("1007"),a("163d"),"image/png, image/jpeg, image/gif, image/jpg, image/bmp"),c="video/mp4, video/rmvb, video/wma",l={props:{type:{type:String},size:{type:Number},nameShuju:{type:String}},data:function(){return{fileAccept:""}},mounted:function(){"image"==this.type?this.fileAccept=r:"video"==this.type&&(this.fileAccept=c)},computed:{},created:function(){},methods:{choose:function(){document.getElementById("upload_file").value=null,document.getElementById("upload_file").click()},fileChange:function(t){var e=t.target;this.fileValid(e,this.size,this.type)},fileValid:function(t,e,a){var i=t.files[0],s=(i.size/1024).toFixed(0),n=t.value.substring(t.value.lastIndexOf(".")),o=this;if(s>e){var r=e/1024;return this.$message({showClose:!0,message:"请上传小于"+r+"M的文件",type:"error"}),!1}switch(a){case"image":if(!n.match(/.jpg|.jpeg|.gif|.png|.bmp/i))return this.$message({showClose:!0,message:"请上传图片",type:"error"}),!1;var c=new FileReader;c.readAsDataURL(i),c.onloadend=function(){o.$store.commit("getBaseURL",c.result)},this.$store.commit("getUploadFile",i),t.value="",this.$store.commit("getBaseURL","");break;case"office":if(!n.match(/.doc|.docx|.xls|.xlsx|.pdf|.ppt|.pptx/i))return this.$message({showClose:!0,message:"请上传word、excel、pdf或ppt文件",type:"error"}),!1;this.$store.commit("getUploadFile",i);break;case"video":if(!n.match(/.mp4|.rmvb|.wma/i))return this.$message({showClose:!0,message:"请上传.mp4、.rmvb、.wma文件",type:"error"}),!1;this.$store.commit("getUploadFile",i);break;case"pdf":if(!n.match(/.pdf/i))return this.$message({showClose:!0,message:"请上传pdf文件",type:"error"}),!1;this.$store.commit("getUploadFile",i);break;case"MBxlsx":if(!n.match(/.xlsx/i))return this.$message({showClose:!0,message:"请上传xlsx文件",type:"error"}),!1;this.$store.commit("getUploadFile",i);break;default:return!1}}}},u=l,d=a("9ca4"),p=Object(d["a"])(u,n,o,!1,null,"40f499e7",null),f=p.exports,m={name:"accountIndex",props:[],data:function(){return{classList:"",programList:"",table_list:[],searchValue:"",form:{page:1,limit:15,keywords:"",total:null,platform_id:"",category_id:"",login_status:"",last_page:""},alertTitle:"",editArr:[],statusTable:[{id:"1",name:"已登录"},{id:"2",name:"未登录"}]}},computed:{excelFile:function(){return this.$store.state.file},thisToken:function(){return this.$route.query.token},userData:function(){return JSON.parse(localStorage.getItem("userData"))}},created:function(){this.getCookie()},methods:{init:function(){this.getList(),this.getClassList(),this.cardList()},clean:function(){this.form.page=1,this.form.keywords="",this.form.platform_id="",this.form.category_id="",this.form.login_status="",this.getList()},getClassList:function(){var t=this;this.$get("/video/category-list").then((function(e){"0000"==e.data.code&&(t.classList=e.data.data)}))},cardList:function(){var t=this;this.$get("/self-media/platform-list").then((function(e){t.programList=e.data.data}))},getList:function(t){var e=this;t&&(this.form.page=1),this.$get("/self-media/account-list-with-statistic",{params:this.form}).then((function(t){if("0000"==t.data.code){var a=t.data.data;e.table_list=a.list,e.form.last_page=a.last_page,e.form.total=a.total}}),(function(t){}))},edit:function(t){this.editArr=t,this.$store.commit("modalShow","personal"),this.alertTitle="编辑用户"},delect:function(t){var e=this;this.$confirm("是否删除该条数据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={account_id:t.account_id};e.$deleteRun("/user/sub-account",{data:a}).then((function(t){}),(function(t){}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},validataOS:function(){return navigator.userAgent.indexOf("Window")>0?"Windows":navigator.userAgent.indexOf("Mac OS X")>0?"Mac":navigator.userAgent.indexOf("Linux")>0?"Linux":"NUll"},dowload:function(){"Mac"==this.validataOS()?window.webkit.messageHandlers["comm_type_get"].postMessage({openurl:"https://cdn-web.weijian.video/storage/mnt/system/web/账号导入模板.xls"}):window.comm_type_get("openurl","https://cdn-web.weijian.video/storage/mnt/system/web/账号导入模板.xls")},handleCurrentChange:function(t){this.form.page=t,this.getList()},getCookie:function(){var t=this,e="";this.thisToken?(e=this.thisToken,localStorage.setItem("user_info",JSON.stringify(this.$route.query.token))):e=this.userData.access_token,this.$get("/user/login-info-by-token",{params:{token:e}}).then((function(e){"0000"==e.data.code&&(localStorage.setItem("userData",JSON.stringify(e.data.data)),localStorage.setItem("user_data",JSON.stringify(e.data.data)),t.init())}),(function(t){}))},uploadExecIn:function(t){var e=this,a=new FormData;a.append("excel",t),this.$post("/self-media/import-accounts",a).then((function(t){"0000"==t.data.code&&(t.data.data.status?e.$message({showClose:!0,message:"模版导入成功!",type:"success"}):e.$message({showClose:!0,message:"模版导入失败!",type:"success"}))}),(function(t){e.$message({showClose:!0,message:"模版导入失败！",type:"error"})}))}},components:{upload:f},watch:{excelFile:function(t){this.uploadExecIn(t)}}},h=m,g=(a("ee78"),Object(d["a"])(h,i,s,!1,null,"8c19eaf0",null));e["default"]=g.exports},ee78:function(t,e,a){"use strict";var i=a("9632"),s=a.n(i);s.a},fab6:function(t,e,a){e=t.exports=a("2365")(!1),e.push([t.i,"[data-v-8c19eaf0] .el-input__inner{height:30px}[data-v-8c19eaf0] .el-input__icon{line-height:30px}.accountIndex .btn[data-v-8c19eaf0]{height:30px;background:#34c0e2;color:#fff;text-align:center;padding:0 10px;border-radius:50px;font-size:12px;line-height:28px}.accountIndex .bg-black[data-v-8c19eaf0]{background:#3b4267;color:#fff}",""])}}]);