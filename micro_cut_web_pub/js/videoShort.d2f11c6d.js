(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["videoShort"],{"0a9d":function(t,e,i){"use strict";var n=i("528c"),s=i.n(n);s.a},"4c39":function(t,e){var i,n,s=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(t){if(i===setTimeout)return setTimeout(t,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}function c(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(function(){try{i="function"===typeof setTimeout?setTimeout:a}catch(t){i=a}try{n="function"===typeof clearTimeout?clearTimeout:o}catch(t){n=o}})();var d,l=[],u=!1,f=-1;function h(){u&&d&&(u=!1,d.length?l=d.concat(l):f=-1,l.length&&p())}function p(){if(!u){var t=r(h);u=!0;var e=l.length;while(e){d=l,l=[];while(++f<e)d&&d[f].run();f=-1,e=l.length}d=null,u=!1,c(t)}}function m(t,e){this.fun=t,this.array=e}function v(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new m(t,e)),1!==l.length||u||r(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=v,s.addListener=v,s.once=v,s.off=v,s.removeListener=v,s.removeAllListeners=v,s.emit=v,s.prependListener=v,s.prependOnceListener=v,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},"528c":function(t,e,i){var n=i("ce7b");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var s=i("85cb").default;s("ff8aa058",n,!0,{sourceMap:!1,shadowMode:!1})},"56fa":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isShow?n("div",{staticClass:"bg-white d-flex flex-column align-items-center justify-content-center",staticStyle:{position:"relative",width:"570px",height:"360px"}},[n("img",{attrs:{src:i("4ffd")}}),n("div",{staticStyle:{position:"absolute",top:"0"}},[n("div",{staticClass:"d-flex flex-column align-items-center justify-content-center",staticStyle:{background:"rgba(0,0,0,0.5)",width:"570px",height:"360px"}},[n("div",{staticClass:"fc-white fz-14px"},[t._v("正在为您剪辑视频中，请稍后...")]),n("div",{staticClass:"progressBar mt-20px mb-20px"},[n("div",{staticClass:"over",style:"width:"+t.num+"%; transition: width 1s;"},[n("div",{class:{tracClass:100!=t.translateMoveX},style:"width:"+t.translateMoveX+"%; transition: width 1s;"})])]),n("div",{staticClass:"fc-white fz-14px"},[t._v(t._s(t.num)+"%")])])])]):t._e()])},s=[],a=i("b27f"),o={data:function(){return{num:0,done:null,translateMoveX:100,barValue:"",isShow:!0,timer:null}},computed:{},created:function(){},mounted:function(){this.getStatus(),this.timer=Object(a["setInterval"])(this.getInterval,1e3)},methods:{getInterval:function(){var t=this;100==this.translateMoveX?this.translateMoveX=0:this.translateMoveX=100,0==this.done?(this.getStatus(),this.num<85?this.num=this.num+Math.ceil(10*Math.random()):this.num<99&&(this.num=this.num+1)):1==this.done&&(this.num<80?this.num=this.num+Math.ceil(20*Math.random()):(this.num=100,100==this.num&&Object(a["setTimeout"])((function(){t.$emit("changVideoUrl",t.barValue),t.isShow=!1}),1500)))},getStatus:function(){var t=this;this.$get("/short-video/status",{params:{uuid:this.$route.query.short_uuid}}).then((function(e){"0000"==e.data.code&&(t.done=e.data.data.done,t.barValue=e.data.data.url,-1==t.done&&t.$message.error("视频剪辑失败，请重新剪辑，所扣秒数已退回!"))}))}},destroyed:function(){Object(a["clearInterval"])(this.timer),this.timer=null}},r=o,c=(i("0a9d"),i("9ca4")),d=Object(c["a"])(r,n,s,!1,null,"043fd300",null);e["a"]=d.exports},"66a3":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container h-100"},[i("div",{staticClass:"d-flex flex-column w-100"},[i("div",{staticClass:"d-flex justify-content-between align-items-center py-15px bg-gray-54 px-15px w-100"},[i("div",{staticClass:"d-flex align-items-center"},[i("i",{staticClass:"iconfont iconflie fc-gray fz-26px"}),i("span",{staticClass:"ml-5px fc-white"},[t._v(t._s(t.video_details.title))])])])]),i("div",{staticClass:"d-flex h-100 fc-333"},[i("div",{staticClass:"bg-gray h-100"},[t.video_cut_done?i("newVideoPlay",{attrs:{video_options:t.video_options}}):i("progressBar",{on:{changVideoUrl:t.changVideoUrl}})],1),i("div",{staticClass:"p-30px flex-1 bg-white fz-14px"},[i("table",[i("tr",[i("td",{staticClass:"fc-999 py-10px text-left",staticStyle:{"min-width":"140px"}},[t._v("\n            原视频标题：")]),i("td",[t._v(t._s(this.video_details.title))])]),i("tr",[i("td",{staticClass:"fc-999 py-10px text-left"},[t._v("版权方：")]),i("td",[t._v(t._s(t.video_details.cp_name))])]),i("tr",[i("td",{staticClass:"fc-999 py-10px text-left"},[t._v("剪辑说明：")]),i("td",[i("p",[i("span",[t._v("原视频时长 ")]),i("span",{domProps:{innerHTML:t._s(t.$options.filters.msDecorate(t.$options.filters.msToSecond(this.video_details.duration)))}}),t._v("\n               \n              "),i("span",[t._v("开始剪辑从 ")]),i("span",{domProps:{innerHTML:t._s(t.$options.filters.msDecorate(t.$options.filters.msToSecond(this.videoStartTime.start_ms)))}}),t._v("\n               \n              "),i("span",[t._v("剪辑时长")]),i("span",[t._v(" "+t._s(t.total_s)+" S")])])])])]),i("div",{staticClass:"my-20px",staticStyle:{height:"1px",background:"rgba(237,237,237,1)"}}),t._m(0),t._m(1),t._m(2),i("div",{staticClass:"my-20px",staticStyle:{height:"1px",background:"rgba(237,237,237,1)"}}),i("div",{staticClass:"mt-10px text-right mt-20px pt-50px"},[i("button",{staticClass:"btn btn-linght border-radius-30px px-25px mr-10px",on:{click:function(e){return t.downloadVideo()}}},[t._v("下载")]),i("button",{staticClass:"btn btn-primary border-radius-30px",on:{click:function(e){return t.release()}}},[t._v("发布")])])])])])},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex py-8px"},[i("div",{staticClass:"fc-999 text-left nowrap pt-3px",staticStyle:{"min-width":"140px"}},[t._v("许可使用范围：")]),i("div",{staticStyle:{"line-height":"20px"}},[t._v("百家号、头条号、企鹅号等短视频播放平台，微博、微信等社交媒体平台， 公众号、小程序等自媒体平台")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex py-8px"},[i("div",{staticClass:"fc-999 text-left nowrap pt-3px",staticStyle:{"min-width":"140px"}},[t._v("不可用于：")]),i("div",{staticStyle:{"line-height":"20px"}},[t._v("多媒体出版物、商业广告、现场演出、影视制作、节目制作、企业宣传片等商业 用途")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex py-8px"},[i("div",{staticClass:"fc-999 text-left nowrap pt-3px",staticStyle:{"min-width":"140px"}},[t._v("内容创作使用要求：")]),i("div",{staticStyle:{"line-height":"20px"}},[t._v("使用视频资源创作时不得改变视频原意，不得断章取义，不得对视频内 容做不实、歪曲描述，否则如侵犯版第三方合法权益，用户需承担相应法律责任。")])])}],a=i("56fa"),o={name:"videoRelease",props:[],data:function(){return{status_loading:!1,video_details:{},video_options:{height:"360",width:"570",src:"",poster:""},video_reset_dateils:{},video_poster:"",poster_server_path:"",video_cut_done:!1,videoStartTime:{},second:localStorage.getItem("user_account"),date:"",expire_date:""}},components:{progressBar:a["a"]},watch:{},computed:{total_s:function(){return Math.ceil((this.videoStartTime.end_ms-this.videoStartTime.start_ms)/1e3)}},methods:{downloadVideo:function(){this.$actions.downloadVideo(this.video_reset_dateils.download_url)},changVideoUrl:function(t){this.video_options.src=t,this.video_cut_done=!0,this.queryShortVideoInfo()},release:function(){this.$router.push({path:"/video_release/short_details",query:{short_uuid:this.$route.query.short_uuid,tab_status:"releaseVideo"}})},queryVideoDeteils:function(){this.status_loading=!0,sessionStorage.getItem("key"),this.videoStartTime=JSON.parse(sessionStorage.getItem("videoStartTime")),this.video_details=JSON.parse(sessionStorage.getItem("video_details")),this.date=Date.parse(new Date);var t=new Date;t=t.setFullYear(t.getFullYear()+10),this.expire_date=t,this.status_loading=!1},queryShortVideoInfo:function(){var t=this;this.$get("/short-video/short-video-info",{params:{uuid:this.$route.query.short_uuid}}).then((function(e){"0000"==e.data.code?(t.video_reset_dateils=e.data.data,t.video_options.src=t.video_reset_dateils.video_url,t.video_options.poster=t.video_reset_dateils.image,t.video_poster=t.video_reset_dateils.image,t.video_options.duration=t.video_reset_dateils.duration,t.poster_server_path=t.video_reset_dateils.photo_path):t.$store.commit("alertMsg",e.data.msg),t.status_loading=!1}))},tabStatusChange:function(){}},created:function(){this.queryVideoDeteils()},mounted:function(){}},r=o,c=i("9ca4"),d=Object(c["a"])(r,n,s,!1,null,"2f9ad8c5",null);e["default"]=d.exports},b27f:function(t,e,i){(function(t){var n="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,s=Function.prototype.apply;function a(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new a(s.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new a(s.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},i("de8a"),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i("9edd"))},ce7b:function(t,e,i){e=t.exports=i("2365")(!1),e.push([t.i,".progressBar[data-v-043fd300]{width:503px;height:25px;border-radius:100px;border:1px solid #4b4b4b}.progressBar .over[data-v-043fd300]{height:23px;border-radius:100px;background:-webkit-linear-gradient(left,#ff0,#c51a1a);background:-o-linear-gradient(right,#ff0,#c51a1a);background:-moz-linear-gradient(right,#ff0,#c51a1a);background:linear-gradient(90deg,rgba(255,44,32,.1),#c51a1a)}.progressBar .over div[data-v-043fd300]{height:23px;border-radius:100px;background:hsla(0,0%,100%,.1)}.progressBar .over .tracClass[data-v-043fd300]{height:23px;border-radius:100px;background:hsla(0,0%,100%,0)}",""])},de8a:function(t,e,i){(function(t,e){(function(t,i){"use strict";if(!t.setImmediate){var n,s=1,a={},o=!1,r=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?h():p()?m():t.MessageChannel?v():r&&"onreadystatechange"in r.createElement("script")?_():g(),c.setImmediate=d,c.clearImmediate=l}function d(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var o={callback:t,args:e};return a[s]=o,n(s),s++}function l(t){delete a[t]}function u(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(i,n);break}}function f(t){if(o)setTimeout(f,0,t);else{var e=a[t];if(e){o=!0;try{u(e)}finally{l(t),o=!1}}}}function h(){n=function(t){e.nextTick((function(){f(t)}))}}function p(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}function m(){var e="setImmediate$"+Math.random()+"$",i=function(i){i.source===t&&"string"===typeof i.data&&0===i.data.indexOf(e)&&f(+i.data.slice(e.length))};t.addEventListener?t.addEventListener("message",i,!1):t.attachEvent("onmessage",i),n=function(i){t.postMessage(e+i,"*")}}function v(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;f(e)},n=function(e){t.port2.postMessage(e)}}function _(){var t=r.documentElement;n=function(e){var i=r.createElement("script");i.onreadystatechange=function(){f(e),i.onreadystatechange=null,t.removeChild(i),i=null},t.appendChild(i)}}function g(){n=function(t){setTimeout(f,0,t)}}})("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,i("9edd"),i("4c39"))}}]);