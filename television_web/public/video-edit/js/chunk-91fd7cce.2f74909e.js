(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-91fd7cce"],{"1c45":function(t,e,a){},3703:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"trackHeader"},[a("ul",{staticClass:"btn-list"},[a("li",{staticClass:"export-btn"},[a("div",{on:{click:function(e){return t.exportVideo()}}},[t._v("导出视频")])])])])},s=[],r=(a("4194"),a("fe59"),a("d497"),a("08ba"),a("0ce9")),c=a("3532"),d={props:{},data:function(){return{track_s:0}},mixins:[r["a"]],computed:{PER_PX_MS:function(){return this.$store.state.PER_PX_MS},duration:function(){return this.$store.state.videoPlay.duration},decorate_active_id:function(){return this.$store.state.decorate_active_id},active_track:function(){var t=this,e=this.$store.state.decorate_list;return e.find((function(e){return e.id==t.decorate_active_id}))},cutDetails:function(){return this.$store.state.cut_details}},watch:{},methods:{addCutTrakOfMobile:function(){parseInt(this.$store.state.videoPlay.current_time_ms),parseInt(this.$store.state.PER_PX_MS);var t=document.getElementById("videoCanvas"),e=this.$store.state.decorate_list,a=this.duration/this.PER_PX_MS;if(!e.some((function(t){return"裁剪"==t.type}))){var i=t.height,s=i*(9/16),r=t.width/2-s/2,d={x:r,y:0,w:s,h:i,id:"decorate_"+Object(c["a"])(),active:!0,type:"裁剪",trackLeft:0,resizable:!1,trackWidth:a};this.addTrackData(d)}},activeBtnList:function(t){var e=this;if("setMosaicList"==t.data.cmd){var a=t.data.data,i=document.getElementById("videoCanvas"),s=i.width,r=i.height,d=document.getElementById("myVideo"),n=d.videoWidth,o=d.videoHeight;a.forEach((function(t){var a=t.y/o*r,i=t.x/n*s,d=t.width/n*s,h=t.height/o*r,u={active:!1,w:d,x:i,y:a,h:h,id:"decorate_"+Object(c["a"])(),trackLeft:t.start_ms/e.PER_PX_MS,trackWidth:(t.end_ms-t.start_ms)/e.PER_PX_MS,type:t.type||"马赛克"};e.addTrackData(u)}))}},setMs:function(){if(this.active_track){var t=this.duration/this.PER_PX_MS,e=1e3*this.track_s/this.PER_PX_MS,a=Math.min(t,e);this.setTrackData({trackWidth:a},this.decorate_active_id)}},setMaxMs:function(){if(this.active_track){var t=this.duration/this.PER_PX_MS,e=t-this.active_track.trackLeft;this.setTrackData({trackWidth:e},this.decorate_active_id)}},addDecorate:function(){var t=parseInt(this.$store.state.videoPlay.current_time_ms),e=parseInt(this.$store.state.PER_PX_MS),a={x:10,y:10,w:100,h:50,id:"decorate_"+Object(c["a"])(),active:!1,type:"马赛克",trackLeft:(t-e)/e,trackWidth:100};this.addTrackData(a)},addCutTrak:function(){var t=this.$store.state.decorate_list,e=this.duration/this.PER_PX_MS;if(!t.some((function(t){return"裁剪"==t.type}))){var a={x:10,y:10,w:400,h:300,id:"decorate_"+Object(c["a"])(),active:!0,type:"裁剪",trackLeft:0,trackWidth:e};this.addTrackData(a)}},exportVideo:function(){var t=this.$store.state.decorate_list,e=[],a=this.$store.state.PER_PX_MS,i=document.getElementById("myVideo"),s=i.videoWidth,r=i.videoHeight,c=document.getElementById("videoCanvas"),d=c.width,n=c.height;t.forEach((function(t){var i=t.y/n*r,c=t.x/d*s,o=t.w/d*s,h=t.h/n*r,u=t.trackLeft*a,_={start_ms:u<500?0:u,end_ms:(t.trackLeft+t.trackWidth)*a,y:i,x:c,width:o,height:h,type:t.type};e.push(_)})),window.parent.postMessage({cmd:"exportArr",data:e},"*");var o=this.exportcutDetails(),h={width:s,height:r};window.parent.postMessage({cmd:"exportAllData",data:{cutDetails:o,decorateList:e,videoSize:h}},"*")},exportcutDetails:function(){var t=this.cutDetails.trackLeft*this.PER_PX_MS,e=(this.cutDetails.trackLeft+this.cutDetails.trackWidth)*this.PER_PX_MS,a={start_ms:t<500?0:t,end_ms:this.duration-e<500?this.duration:e};return a},deleteDecorate:function(){this.deleteTrackData(this.$store.state.decorate_active_id)}},components:{},created:function(){},mounted:function(){window.addEventListener("message",this.activeBtnList,!1)}},n=d,o=(a("4c1f"),a("2c07")),h=Object(o["a"])(n,i,s,!1,null,"e424d87e",null);e["default"]=h.exports},"4c1f":function(t,e,a){"use strict";a("1c45")}}]);
//# sourceMappingURL=chunk-91fd7cce.2f74909e.js.map