(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e3b8b5d"],{"2acd":function(e,t,a){var r=a("24fb");t=r(!1),t.push([e.i,".edit-mater[data-v-94bdc556]{height:500px;overflow-y:scroll}.edit-mater .cover-img[data-v-94bdc556]{width:auto;height:100px;-o-object-fit:contain;object-fit:contain;margin-top:10px}.edit-mater .el-date-editor[data-v-94bdc556]{width:100%!important}.edit-mater[data-v-94bdc556]  .descs{height:150px}.edit-mater[data-v-94bdc556]  .descs .el-textarea__inner{height:100%;line-height:24px}",""]),e.exports=t},"32ee":function(e,t,a){var r=a("b429");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=a("499e").default;i("127cdba0",r,!0,{sourceMap:!1,shadowMode:!1})},"3e49":function(e,t,a){"use strict";a("9737")},4795:function(e,t,a){var r=a("fe66");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=a("499e").default;i("001a41fe",r,!0,{sourceMap:!1,shadowMode:!1})},"89d6":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"video-warp"},[a("div",{staticClass:"video-count"},[a("el-form",{attrs:{inline:!0,model:e.form}},[a("el-form-item",{attrs:{label:"视频名称"}},[a("el-input",{attrs:{placeholder:"请输入视频名称"},model:{value:e.form.videoName,callback:function(t){e.$set(e.form,"videoName",t)},expression:"form.videoName"}})],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择状态"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusList,(function(e){return a("el-option",{key:e.val,attrs:{label:e.label,value:e.val}})})),1)],1),a("el-form-item",{attrs:{label:"频道名称"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择频道"},model:{value:e.form.channel_id,callback:function(t){e.$set(e.form,"channel_id",t)},expression:"form.channel_id"}},e._l(e.channelData,(function(e){return a("el-option",{key:e.channel_uuid,attrs:{value:e.channel_uuid,label:e.name}})})),1)],1),a("el-form-item",{attrs:{label:"栏目名称"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择栏目名称"},model:{value:e.form.program_id,callback:function(t){e.$set(e.form,"program_id",t)},expression:"form.program_id"}},e._l(e.itemData,(function(e){return a("el-option",{key:e.item_uuid,attrs:{label:e.name,value:e.item_uuid}})})),1)],1),a("el-form-item",{attrs:{label:"日期"}},[a("el-date-picker",{attrs:{type:"daterange","value-format":"timestamp","default-time":["00:00:00","23:59:59"],"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1),a("base-btn",{staticClass:"search-btn",attrs:{size:"big"},on:{click:e.searchData}},[e._v("查询")]),a("base-btn",{staticClass:"search-btn create-btn",attrs:{size:"big"},on:{click:e.clearSearch}},[e._v("清除")])],1)],1),a("div",{staticClass:"total"},[a("div",[e._v("当前条件下共 "+e._s(e.total)+" 条数据")]),a("base-btn",{attrs:{type:"text"},on:{click:function(t){return e.exportData()}}},[e._v("导出EXCEL")])],1),a("el-table",{attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"Id",width:"80",label:"ID"}}),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(" "+e._s(e.statusIf(t.row.status))+" ")])]}}])}),a("el-table-column",{attrs:{prop:"videotitle",label:"视频名称"}}),a("el-table-column",{attrs:{prop:"playtime",label:"开播时间"}}),a("el-table-column",{attrs:{label:"封面图"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticClass:"cover-img",attrs:{src:e.row.videopic,alt:""}})]}}])}),a("el-table-column",{attrs:{prop:"descs",label:"简介",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"descs"},[e._v(" "+e._s(t.row.descs)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"program_name",label:"栏目名称"}}),a("el-table-column",{attrs:{prop:"channel_name",label:"频道名称"}}),a("el-table-column",{attrs:{label:"更新时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("unixToHms")(1e3*t.row.updatetime))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status>0?a("base-btn",{directives:[{name:"has",rawName:"v-has",value:["superman","视频编辑"],expression:"['superman','视频编辑']"}],attrs:{type:"text"},on:{click:function(a){return e.showDialog("编辑物料","editM",t.row)}}},[e._v("编辑物料")]):e._e(),a("base-btn",{directives:[{name:"has",rawName:"v-has",value:["superman","视频删除"],expression:"['superman','视频删除']"}],attrs:{type:"text"},on:{click:function(a){return e.deleteClick(t.row)}}},[e._v("删除")]),a("base-btn",{attrs:{type:"text"},on:{click:function(a){return e.showDialog("播放","playVideo",t.row)}}},[e._v("播放")]),a("base-btn",{attrs:{type:"text"},on:{click:function(a){return e.showDialog("播放bos","playVideo",t.row)}}},[e._v("播放bos")])]}}])})],1),a("base-pag",{attrs:{total:e.total,limit:e.limit,page:e.page},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}),a("BaseDialog",{staticClass:"dialog",attrs:{title:e.dialogTit,show:e.dialogVisible,width:"660px"},on:{"update:show":function(t){e.dialogVisible=t}}},[a(e.dialogCompomtentsName,{tag:"compontents",attrs:{"video-data":e.videoData},on:{showDialog:e.showDialog,close:e.close}})],1)],1)},i=[],o=a("1da1"),n=a("5530"),s=(a("96cf"),a("c740"),a("2b3d"),a("d3b7"),a("3ca3"),a("ddb0"),a("7db0"),a("159b"),a("b64b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit-mater"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"视频名称",prop:"videotitle"}},[a("el-input",{model:{value:e.ruleForm.videotitle,callback:function(t){e.$set(e.ruleForm,"videotitle",t)},expression:"ruleForm.videotitle"}})],1),a("el-form-item",{attrs:{label:"开播时间",prop:"playtime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择开播时间","value-format":"yyyy-MM-dd"},model:{value:e.ruleForm.playtime,callback:function(t){e.$set(e.ruleForm,"playtime",t)},expression:"ruleForm.playtime"}})],1),a("el-form-item",{attrs:{label:"集/期数",prop:"nums"}},[a("el-input",{model:{value:e.ruleForm.nums,callback:function(t){e.$set(e.ruleForm,"nums",t)},expression:"ruleForm.nums"}})],1),a("el-form-item",{attrs:{label:"视频介绍",prop:"descs"}},[a("el-input",{staticClass:"descs",attrs:{type:"textarea"},model:{value:e.ruleForm.descs,callback:function(t){e.$set(e.ruleForm,"descs",t)},expression:"ruleForm.descs"}})],1),a("el-form-item",{attrs:{label:"封面图",prop:"videopic"}},[a("BaseUpload",{key:"presenters",staticClass:"ml-10px BaseUploadImg",attrs:{button_name:"上传图片"},on:{getFileUrl:e.getFileUrl}}),a("img",{staticClass:"cover-img",attrs:{src:e.ruleForm.videopic,alt:""}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("完成")]),a("el-button",{on:{click:function(t){return e.cancel("ruleForm")}}},[e._v("取消")])],1)],1)],1)}),l=[],c={components:{},props:{videoData:{type:Object,default:function(){return{}}}},data:function(){return{ruleForm:{videotitle:"",descs:"",playtime:"",nums:"",videopic:""},rules:{videotitle:[{required:!0,message:"请输入视频名称",trigger:"blur"}],playtime:[{required:!0,message:"请输入开播时间",trigger:"blur"}]}}},computed:{},watch:{},created:function(){},mounted:function(){this.initdata()},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{getFileUrl:function(e,t){this.uploadImg(t)},uploadImg:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,i,o,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=new FormData,r.append("file",e),a.next=4,t.$post("/common/uploadfile",r);case 4:if(i=a.sent,o=i.data,n=i.err,!n){a.next=9;break}return t.$message.error(n.msg),a.abrupt("return");case 9:t.ruleForm.videopic=o.data.imgurl;case 10:case"end":return a.stop()}}),a)})))()},initdata:function(){var e=this;Object.keys(this.ruleForm).forEach((function(t){e.ruleForm[t]=e.videoData[t]}))},cancel:function(){this.$emit("close")},postData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$put("/videos/".concat(e.videoData.Id),e.ruleForm);case 2:a=t.sent,r=a.err,r?e.$message({type:"error",message:r.msg}):e.$message({type:"success",message:"编辑成功"}),e.$parent.$parent.$parent.getList(),e.$emit("close");case 7:case"end":return t.stop()}}),t)})))()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.postData()}))}}},d=c,u=(a("3e49"),a("2877")),m=Object(u["a"])(d,s,l,!1,null,"94bdc556",null),p=m.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"video-warp"},[a("video-player",{ref:"videoPlayer",staticClass:"vjs-custom-skin",attrs:{options:e.playerOptions,playsinline:!0}}),a("div",{staticClass:"content-box"},[a("div",{staticClass:"deatils-box"},[a("div",{staticClass:"item-message"},[a("div",[e._v("视频名称:")]),a("div",[e._v(e._s(e.videoData.videotitle))])]),a("div",{staticClass:"item-message"},[a("div",[e._v("开播时间:")]),a("div",[e._v(e._s(e.videoData.playtime))])]),a("div",{staticClass:"item-message"},[a("div",[e._v("集/期数:")]),a("div",[e._v(e._s(e.videoData.nums))])]),a("div",{staticClass:"item-message"},[a("div",[e._v("视频介绍:")]),a("div",[e._v(e._s(e.videoData.descs))])])]),a("div",{staticClass:"cover"},[a("img",{attrs:{src:e.videoData.videopic,alt:""}})])])],1)},v=[],b={components:{},props:{videoData:{type:Object,default:function(){return{}}}},data:function(){return{playerOptions:{height:100,autoplay:!0,muted:!1,language:"en",playbackRates:[.7,1,1.5,2],sources:[{type:"video/mp4",src:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4"}],poster:"https://surmon-china.github.io/vue-quill-editor/static/images/surmon-1.jpg"}}},computed:{},watch:{},created:function(){},mounted:function(){this.playerOptions.sources[0].src="播放bos"===this.$parent.title?"http://play.tmsx.net"+this.videoData.bos_keyv:this.videoData.videourl},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{}},h=b,g=(a("a0c6"),Object(u["a"])(h,f,v,!1,null,"7f3e5c6e",null)),x=g.exports,w=a("2f62"),_=a("c60b"),y=a("28de"),k={components:{editM:p,playVideo:x},data:function(){return{videoData:{},dialogTit:"",dialogVisible:!1,dialogCompomtentsName:"",form:{videoName:"",status:"",channel_id:"",program_id:"",date:[]},total:null,limit:10,page:1,statusList:[{label:"爬取成功",val:1},{label:"入库成功",val:2},{label:"爬取失败",val:-1},{label:"入库失败",val:-2},{label:"重新爬取",val:-3},{label:"视频不存在",val:-4},{label:"截图失败",val:-5},{label:"图片上传BOS失败",val:-6},{label:"视频上传BOS失败",val:-7},{label:"时长获取失败",val:-8},{label:"上传高清视频失败",val:-9},{label:"jobs不存在",val:-10},{label:"遮码失败",val:-11},{label:"需要截图",val:-12},{label:"需要遮码",val:-13},{label:"遮码中",val:-14},{label:"时间超长",val:-15}],itemData:[],tableData:[]}},computed:Object(n["a"])({},Object(w["b"])(["channelData"])),watch:{"form.channel_id":function(e){this.getItemList(),this.form.program_id=null}},created:function(){!this.channelData.length&&this.$store.dispatch("channel/getChannelData"),this.getList()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{statusIf:function(e){var t=this.statusList.findIndex((function(t){return t.val===e}));return t>=0?this.statusList[t].label:""},exportData:function(){var e=this,t=this.setParams();t.export=1,Object(y["a"])({method:"get",url:"/videos",params:t,responseType:"blob"}).then((function(t){if(t.data.type){var a=new Blob([t.data],{type:"application/vnd.ms-excel"}),r=document.createElement("a");r.href=URL.createObjectURL(a),r.setAttribute("download","内容爬取.xlsx"),r.click(),r=null,e.$message.success("导出成功")}else e.$message.warning(t.data.msg)})).catch((function(e){console.log(e)}))},crawling:function(){},deleteClick:function(e){var t=this;this.$confirm("是否删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteData(e)}))},deleteData:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$deleteRun("/videos/"+e.Id);case 2:r=a.sent,"OK"===r.err?(t.$message({type:"success",message:"删除成功"}),t.getList()):t.$message({type:"error",message:"删除失败"});case 4:case"end":return a.stop()}}),a)})))()},getItemList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.form.channel_id){t.next=2;break}return t.abrupt("return");case 2:return a=e.channelData.find((function(t){return t.channel_uuid===e.form.channel_id})).channel_id,t.next=5,e.$get("/jobs/programs",{channel_id:a});case 5:if(r=t.sent,i=r.data,o=r.err,!o){t.next=10;break}return e.$message.error(o.msg),t.abrupt("return");case 10:e.itemData=i.data;case 11:case"end":return t.stop()}}),t)})))()},setParams:function(){var e={channel_id:this.form.channel_id,program_id:this.form.program_id,status:this.form.status,videotitle:this.form.videoName,createtime__gt:this.form.date?this.form.date[0]/1e3:"",createtime__lt:this.form.date?this.form.date[1]/1e3:""},t={page:this.page,limit:this.limit,sortby:"id",order:"desc",query:Object(_["a"])(e)};return t},getList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$get("/videos",e.setParams());case 2:if(a=t.sent,r=a.data,i=a.err,!i){t.next=7;break}return e.$message.error(i.msg),t.abrupt("return");case 7:e.tableData=r.data,e.total=a.data.count;case 9:case"end":return t.stop()}}),t)})))()},searchData:function(){this.getList()},clearSearch:function(){var e=this;Object.keys(this.form).forEach((function(t){e.form[t]=""})),this.getList()},handleCurrentChange:function(e){this.page=e,this.getList()},handleSizeChange:function(e){this.limit=e,this.getList()},showDialog:function(e,t,a){this.dialogTit=e,this.dialogCompomtentsName=t,this.dialogVisible=!0,this.videoData=a},close:function(){this.videoData={},this.dialogVisible=!1}}},D=k,C=(a("e657"),Object(u["a"])(D,r,i,!1,null,"62fee530",null));t["default"]=C.exports},9737:function(e,t,a){var r=a("2acd");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=a("499e").default;i("1372b4b2",r,!0,{sourceMap:!1,shadowMode:!1})},a0c6:function(e,t,a){"use strict";a("4795")},b429:function(e,t,a){var r=a("24fb");t=r(!1),t.push([e.i,".video-warp[data-v-62fee530]{padding:20px;box-sizing:border-box}.video-warp .el-date-editor[data-v-62fee530]{flex-shrink:0;width:300px!important}.video-warp .cover-img[data-v-62fee530]{width:100%;height:100px;-o-object-fit:contain;object-fit:contain;margin-top:10px}.video-warp .descs[data-v-62fee530]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.video-warp .total[data-v-62fee530]{display:flex;justify-content:space-between;font-size:14px;color:#101010;margin-bottom:10px}",""]),e.exports=t},c60b:function(e,t,a){"use strict";a("99af"),a("5319"),a("ac1f");t["a"]=function(e){var t="";for(var a in e)(e[a]||"0"===e[a])&&(t+="".concat(a,":").concat(e[a],","));return t.replace(/,$/gi,"")}},c740:function(e,t,a){"use strict";var r=a("23e7"),i=a("b727").findIndex,o=a("44d2"),n="findIndex",s=!0;n in[]&&Array(1)[n]((function(){s=!1})),r({target:"Array",proto:!0,forced:s},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o(n)},e657:function(e,t,a){"use strict";a("32ee")},fe66:function(e,t,a){var r=a("24fb");t=r(!1),t.push([e.i,".video-warp[data-v-7f3e5c6e]{height:500px;overflow-y:scroll}.video-warp .vjs-custom-skin[data-v-7f3e5c6e]{width:100%;height:360px}.video-warp .vjs-custom-skin[data-v-7f3e5c6e]  .video-js{width:100%;height:100%;padding:0}.video-warp .content-box[data-v-7f3e5c6e]{display:flex;justify-content:space-between;margin-top:20px}.video-warp .content-box .cover[data-v-7f3e5c6e]{width:180px;height:90px;margin-left:10px}.video-warp .content-box .cover img[data-v-7f3e5c6e]{width:100%;height:100%}.video-warp .content-box .deatils-box[data-v-7f3e5c6e]{flex:1}.video-warp .content-box .deatils-box .item-message[data-v-7f3e5c6e]{display:flex;margin-top:10px}.video-warp .content-box .deatils-box .item-message div[data-v-7f3e5c6e]:first-child{width:80px}.video-warp .content-box .deatils-box .item-message div[data-v-7f3e5c6e]:nth-child(2){flex:1}",""]),e.exports=t}}]);