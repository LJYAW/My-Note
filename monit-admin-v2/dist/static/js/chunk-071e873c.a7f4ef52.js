(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-071e873c"],{"0728":function(e,t,a){"use strict";t.a={channelsname:[{required:!0,message:"请输入频道名称",trigger:"blur"}],channelsuuid:[{required:!0,message:"请选择直播流地址",trigger:"change"}],levels:[{required:!0,message:"请选择频道分级",trigger:"change"}],types:[{required:!0,message:"请选择频道类型",trigger:"change"}]}},1148:function(e,t,a){"use strict";a("538a")},1679:function(e,t,a){(t=a("a1a8")(!1)).push([e.i,"[data-v-2b65114f]:export{menutext:#232323;menuactivetext:#005cff;submenuactivetext:#1d4a97;menubg:#fff;menuhover:#fff;submenubg:#fff;submenuhover:#fff;sidebarwidth:1.82292rem}.region-cascader[data-v-2b65114f]{-webkit-box-flex:1;-ms-flex:1;flex:1}.region-cascader[data-v-2b65114f]  .el-input{height:100%}",""]),e.exports=t},"1d9b":function(e,t,a){"use strict";a("b583")},"3c10d":function(e,t,a){(t=a("a1a8")(!1)).push([e.i,"[data-v-332ee0ae]:export{menutext:#232323;menuactivetext:#005cff;submenuactivetext:#1d4a97;menubg:#fff;menuhover:#fff;submenubg:#fff;submenuhover:#fff;sidebarwidth:1.82292rem}.update-channel[data-v-332ee0ae]{padding:.3125rem .69271rem}.update-channel .el-form[data-v-332ee0ae]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-top:.26042rem}.update-channel .el-form .el-form-item[data-v-332ee0ae]{width:47%;margin-bottom:.15625rem}.update-channel .el-form .el-form-item.live-item[data-v-332ee0ae]{width:100%}.update-channel .el-form .el-form-item.live-item[data-v-332ee0ae]  .el-input{-webkit-box-flex:1;-ms-flex:1;flex:1}.update-channel .el-form .el-form-item.live-item[data-v-332ee0ae]  .el-input input{color:#0059ff}.update-channel .el-form .el-form-item[data-v-332ee0ae]  .el-form-item__content{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%}.update-channel .el-form .el-form-item[data-v-332ee0ae]  .el-form-item__content .el-input,.update-channel .el-form .el-form-item[data-v-332ee0ae]  .el-form-item__content .el-select{-webkit-box-flex:1;-ms-flex:1;flex:1}.update-channel .el-form .el-form-item[data-v-332ee0ae]  .el-form-item__content .el-input .el-input,.update-channel .el-form .el-form-item[data-v-332ee0ae]  .el-form-item__content .el-select .el-input{height:100%}.update-channel .el-form .el-form-item[data-v-332ee0ae]  .el-form-item__content input{height:100%;background:#fbfbfb;border-color:#e4e4e4;font-size:.09375rem;color:#000}.update-channel .btn-wrap[data-v-332ee0ae]{text-align:center;margin-top:.91667rem}.update-channel .btn-wrap .el-button[data-v-332ee0ae]{font-size:.125rem;padding:.09375rem .625rem;border-radius:.02083rem}.update-channel .btn-wrap .cancel-btn[data-v-332ee0ae]{margin-right:.15625rem}",""]),e.exports=t},"538a":function(e,t,a){var n=a("1679");(n="string"==typeof(n=n.__esModule?n.default:n)?[[e.i,n,""]]:n).locals&&(e.exports=n.locals),(0,a("5925").default)("40716fd6",n,!0,{sourceMap:!1,shadowMode:!1})},"5f8f":function(e,t,a){"use strict";a("dbb3");var n={components:{},props:{tagList:{type:Array,default:function(){return[]}}},data:function(){return{showClose:!1,tagName:""}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{update:function(){this.showClose=!0},close:function(){this.showClose?this.showClose=!1:this.$emit("close")},deleteTag:function(e){this.$emit("deleteTag",e)},clear:function(){var e=this;this.$confirm("<h2>此操作将永久删除该文件, 是否继续?</h2><p>部分标签正在使用，删除后可能导致无法命中。</p>","",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.tempTagList=[]})).catch((function(){e.$message({type:"info",message:"已取消清空操作"})}))},addTag:function(){var e=this,t=this.tagList.filter((function(t){return t.names===e.tagName}));this.tagName?t.length?this.$message({type:"warning",message:"添加的标签已存在"}):this.$emit("addTag",this.tagName):this.$message({type:"warning",message:"请输入标签内容"})}}};a("1d9b"),a=a("4ac2"),n=Object(a.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-tag"},[a("p",{staticClass:"title"},[e._v("增加标签")]),a("div",{staticClass:"form-wrap"},[a("el-input",{attrs:{placeholder:"请输入标签内容",maxlength:"8"},model:{value:e.tagName,callback:function(t){e.tagName="string"==typeof t?t.trim():t},expression:"tagName"}}),a("base-btn",{staticClass:"add-btn",on:{click:e.addTag}},[e._v("增加")])],1),a("div",{staticClass:"tag-wrap"},e._l(e.tagList,(function(t){return a("div",{key:t.names,staticClass:"tag-item"},[e._v(e._s(t.names)+" "),e.showClose?a("i",{staticClass:"el-icon-error",on:{click:function(a){return e.deleteTag(t.id)}}}):e._e()])})),0),a("div",{staticClass:"btn-wrap"},[a("base-btn",{staticClass:"btn",on:{click:e.close}},[e._v("返回")]),e.showClose?e._e():a("base-btn",{staticClass:"btn",on:{click:e.update}},[e._v("编辑")])],1)])}),[],!1,null,"4d6c9c4f",null);t.a=n.exports},8267:function(e,t,a){"use strict";a("c535")},a8e4:function(e,t,a){(t=a("a1a8")(!1)).push([e.i,"[data-v-4d6c9c4f]:export{menutext:#232323;menuactivetext:#005cff;submenuactivetext:#1d4a97;menubg:#fff;menuhover:#fff;submenubg:#fff;submenuhover:#fff;sidebarwidth:1.82292rem}.add-tag[data-v-4d6c9c4f]{padding:0 .15625rem}.add-tag .title[data-v-4d6c9c4f]{font-size:.25rem;font-weight:600;text-align:center;color:#000;margin-bottom:.26042rem}.add-tag .form-wrap[data-v-4d6c9c4f]{text-align:center;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.add-tag .form-wrap .el-input[data-v-4d6c9c4f]{width:40%;height:.3125rem}.add-tag .form-wrap .el-input[data-v-4d6c9c4f]  input{height:100%}.add-tag .form-wrap .add-btn[data-v-4d6c9c4f]{padding:.08854rem .27083rem}.add-tag .tag-wrap[data-v-4d6c9c4f]{margin-top:.33854rem;max-height:1.5625rem;overflow-y:auto}.add-tag .tag-wrap .tag-item[data-v-4d6c9c4f]{display:inline-block;padding:.06771rem .23958rem;font-size:.07292rem;color:#000;background:#eaf1fe;border-radius:.02083rem;margin-right:.10417rem;margin-bottom:.10417rem;position:relative}.add-tag .tag-wrap .tag-item .el-icon-error[data-v-4d6c9c4f]{font-size:.10417rem;position:absolute;top:-.04167rem;right:-.04167rem;z-index:9;cursor:pointer}.add-tag .btn-wrap[data-v-4d6c9c4f]{text-align:center;margin-top:.28646rem}.add-tag .btn-wrap .btn[data-v-4d6c9c4f]{width:.78125rem;height:.20833rem;background:#9aacf1;border-radius:.02083rem;border:none;margin-right:.15625rem}",""]),e.exports=t},abe1:function(e,t,a){"use strict";a("e35a"),a("0d7a"),a("dbb3"),a("9302");var n=a("2e3f"),r={components:{},props:{region:{type:String,default:function(){return""}}},data:function(){return{selectedOptions:[],options:n.provinceAndCityData,address:""}},computed:{},watch:{region:function(e){var t;e&&(this.selectedOptions=[],t=(this.address=e).split(" "),e=n.provinceAndCityData.filter((function(e){return e.label===t[0]})),this.selectedOptions.push(e[0].value||0),e.length&&(e=e[0].children.filter((function(e){return e.label===t[1]})),this.selectedOptions.push(e[0].value||0)))}},created:function(){},mounted:function(){},methods:{handleChange:function(){for(var e=[],t=0;t<this.selectedOptions.length;t++)e.push(n.CodeToText[this.selectedOptions[t]]);this.address=e.join(" ")}}};a("1148"),a=a("4ac2"),r=Object(a.a)(r,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-cascader",{staticClass:"region-cascader",attrs:{size:"large",options:e.options},on:{change:e.handleChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})}),[],!1,null,"2b65114f",null);t.a=r.exports},b583:function(e,t,a){var n=a("a8e4");(n="string"==typeof(n=n.__esModule?n.default:n)?[[e.i,n,""]]:n).locals&&(e.exports=n.locals),(0,a("5925").default)("45ddf157",n,!0,{sourceMap:!1,shadowMode:!1})},c535:function(e,t,a){var n=a("3c10d");(n="string"==typeof(n=n.__esModule?n.default:n)?[[e.i,n,""]]:n).locals&&(e.exports=n.locals),(0,a("5925").default)("19db0604",n,!0,{sourceMap:!1,shadowMode:!1})},f5a9:function(e,t,a){"use strict";a.r(t);var n=a("99a5"),r=a("1c03"),s=(a("dbb3"),a("b4fb"),a("6a61"),a("abe1")),i=a("0728"),l=a("52c1"),o=a("5f8f");l={components:{Region:s.a,AddTag:o.a},props:{},data:function(){return{form:{channelsname:null,channelsuuid:null,levels:null,types:null,region:null},dialogVisible:!1,dialogKey:"",axiosUrl:"",rules:i.a}},computed:Object(r.a)(Object(r.a)({},Object(l.b)(["allChannelData","channelLevel","channelType"])),{},{tagList:function(){return this.$store.state.channel[this.dialogKey]}}),watch:{},created:function(){this.getUpdateData(),this.allChannelData.length||this.getChannelData(),this.channelLevel.length||this.getChannelLevel(),this.channelType.length||this.getChannelType()},mounted:function(){},methods:{backTo:function(){this.$router.push({path:"list"})},save:function(e){var t=this;this.$refs[e].validate((function(e){return!!e&&void(t.$refs.region.$data.address?t.saveData():t.$message.error("请选择频道归属地"))}))},saveData:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={channelsname:e.form.channelsname,channelsuuid:e.form.channelsuuid,levels:e.form.levels,region:e.$refs.region.$data.address,types:e.form.types},t.next=3,e.$put("/v1/channels/".concat(e.$route.query.id),n);case 3:a=t.sent,n=a.err,a.data,n?e.$message.error(n.msg):(e.$message({type:"success",message:"导入成功"}),e.backTo());case 7:case"end":return t.stop()}}),t)})))()},getUpdateData:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var a,n,r,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$get("/v1/channels/".concat(e.$route.query.id));case 2:if(a=t.sent,n=a.err,r=a.data,n)return e.$message.error(n.msg),t.abrupt("return");t.next=8;break;case 8:for(s in e.form)e.form[s]=r.data[s];e.form.channel_cn_name=e.form.channelsname;case 10:case"end":return t.stop()}}),t)})))()},showAddDialog:function(e){this.dialogVisible=!0,this.dialogKey=e,this.axiosUrl="channelLevel"===this.dialogKey?"/v1/channelslevel":"/v1/channelstype/"},close:function(){this.dialogVisible=!1},getChannelData:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("channel/getAllChannelData");case 2:case"end":return t.stop()}}),t)})))()},getChannelLevel:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("channel/getChannelLevel",{page:1,limit:1e4});case 2:case"end":return t.stop()}}),t)})))()},getChannelType:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("channel/getChannelType",{page:1,limit:1e4});case 2:case"end":return t.stop()}}),t)})))()},changeSelectChannel:function(e){this.form.channelsname=this.allChannelData.filter((function(t){return t.channel_en_name===e}))[0].channel_cn_name},addTag:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r={id:null,names:e,vals:null},a.next=3,t.$post(t.axiosUrl,r);case 3:n=a.sent,r=n.err,n.data,r?t.$message.error(r.msg):t.$message({type:"success",message:"新增成功"}),"channelLevel"===t.dialogKey?t.getChannelLevel():t.getChannelType();case 8:case"end":return a.stop()}}),a)})))()},deleteTag:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$deleteRun("".concat(t.axiosUrl,"/").concat(e));case 2:n=a.sent,r=n.err,n.data,r?t.$message.error(r.msg):t.$message({type:"success",message:"删除成功"}),"channelLevel"===t.dialogKey?t.getChannelLevel():t.getChannelType();case 7:case"end":return a.stop()}}),a)})))()}}},a("8267"),a=a("4ac2"),l=Object(a.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"update-channel"},[a("p",{staticClass:"form-title"},[e._v("频道信息")]),a("el-form",{ref:"ruleForm",attrs:{model:e.form,inline:!0,rules:e.rules}},[a("el-form-item",{staticClass:"live-item",attrs:{prop:"channelsuuid"}},[a("span",{staticClass:"form-label"},[e._v("直播流地址")]),a("el-select",{attrs:{clearable:"",filterable:""},on:{change:e.changeSelectChannel},model:{value:e.form.channelsuuid,callback:function(t){e.$set(e.form,"channelsuuid",t)},expression:"form.channelsuuid"}},e._l(e.allChannelData,(function(e){return a("el-option",{key:e.id,attrs:{label:e.channel_cn_name,value:e.channel_en_name}})})),1)],1),a("el-form-item",{attrs:{prop:"channelsname"}},[a("span",{staticClass:"form-label"},[e._v("频道名称")]),a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.form.channelsname,callback:function(t){e.$set(e.form,"channelsname",t)},expression:"form.channelsname"}})],1),a("el-form-item",[a("span",{staticClass:"form-label"},[e._v("频道归属地")]),a("Region",{ref:"region",attrs:{region:e.form.region}})],1),a("el-form-item",{attrs:{prop:"levels"}},[a("span",{staticClass:"form-label"},[e._v("频道分级")]),a("el-select",{attrs:{clearable:"",filterable:""},model:{value:e.form.levels,callback:function(t){e.$set(e.form,"levels",t)},expression:"form.levels"}},[e._l(e.channelLevel,(function(e){return a("el-option",{key:e.id,attrs:{label:e.names,value:e.id}})})),a("div",{staticStyle:{"padding-left":".1rem"},on:{click:function(t){return e.showAddDialog("channelLevel")}}},[a("base-btn",{attrs:{type:"text"}},[e._v("新增"),a("i",{staticClass:"el-icon-circle-plus-outline"})])],1)],2)],1),a("el-form-item",{attrs:{prop:"types"}},[a("span",{staticClass:"form-label"},[e._v("频道类型")]),a("el-select",{attrs:{clearable:"",filterable:""},model:{value:e.form.types,callback:function(t){e.$set(e.form,"types",t)},expression:"form.types"}},[e._l(e.channelType,(function(e){return a("el-option",{key:e.id,attrs:{label:e.names,value:e.id}})})),a("div",{staticStyle:{"padding-left":".1rem"},on:{click:function(t){return e.showAddDialog("channelType")}}},[a("base-btn",{attrs:{type:"text"}},[e._v("新增"),a("i",{staticClass:"el-icon-circle-plus-outline"})])],1)],2)],1)],1),a("div",{staticClass:"btn-wrap"},[a("base-btn",{staticClass:"cancel-btn",attrs:{type:"info"},on:{click:e.backTo}},[e._v("取消")]),a("base-btn",{on:{click:function(t){return e.save("ruleForm")}}},[e._v("保存")])],1),a("base-dialog",{attrs:{show:e.dialogVisible,"show-close":!1,width:"60%"},on:{"update:show":function(t){e.dialogVisible=t}}},[a("AddTag",{attrs:{"tag-list":e.tagList},on:{addTag:e.addTag,deleteTag:e.deleteTag,close:e.close}})],1)],1)}),[],!1,null,"332ee0ae",null);t.default=l.exports}}]);