(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-163ac4a0"],{"2c0a":function(t,e,a){},"70ff":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"auctio-details"},[a("div",{staticClass:"order-details"},[a("div",{staticClass:"wrap block"},[a("el-image",{attrs:{src:t.goodsInfo.main_img,width:"30",height:"100"}}),a("div",[t._v(t._s(t.goodsInfo.name))])],1),a("div",{staticClass:"text block",staticStyle:{"min-width":"270px"}},[t._v(" 竞拍结束时间: "+t._s(t.goodsInfo.end_at)+" ")]),a("div",{staticClass:"text block"},[t._v(" 产品ID: "+t._s(t.goodsInfo.goods_id)+" ")]),t.dataDetails.goods_auction_bid_list?a("div",{staticClass:"text block"},[t._v(" 竞拍人数: "+t._s(t.dataDetails.goods_auction_bid_list.length)+" ")]):t._e(),a("div",{staticClass:"text block"},[t._v(" 起拍价格: "+t._s(t.goodsInfo.price)+" ")]),a("div",{staticClass:"btn-wrap block"},[a("base-btn",{attrs:{disabled:"竞拍中"!==t.status,type:"text"},on:{click:t.showComDialog}},[t._v("修改拍卖信息")])],1)]),a("el-table",{attrs:{data:t.tableData,border:"",height:"calc(100vh - 360px)"}},[a("el-table-column",{attrs:{prop:"phone",label:"用户账号",width:"180"}}),a("el-table-column",{attrs:{prop:"nickname",label:"用户信息",width:"180"}}),a("el-table-column",{attrs:{prop:"created_at",label:"出价时间"}}),a("el-table-column",{attrs:{prop:"bid_coins",label:"出价金额"}})],1),a("base-dialog",{attrs:{show:t.dialogVisible,width:"400px",title:"修改竞拍信息"},on:{"update:show":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"ruleForm",attrs:{model:t.form,inline:!0,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"竞拍ID:",prop:"goods_auction_id"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.form.goods_auction_id,callback:function(e){t.$set(t.form,"goods_auction_id",e)},expression:"form.goods_auction_id"}})],1),a("el-form-item",{attrs:{label:"竞拍结束时间:",prop:"end_at"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd HH:mm:ss","picker-options":t.pickerOptionsStart,placeholder:"选择日期时间"},model:{value:t.form.end_at,callback:function(e){t.$set(t.form,"end_at",e)},expression:"form.end_at"}})],1),a("el-form-item",{attrs:{label:"封顶价格:",prop:"max_price"}},[a("el-input",{attrs:{type:"Number",oninput:"if(isNaN(value)) { value = null } if(value.indexOf('.')>0){value=value.slice(0,value.indexOf('.')+3)}","max-length":"9"},model:{value:t.form.max_price,callback:function(e){t.$set(t.form,"max_price",e)},expression:"form.max_price"}})],1)],1),a("div",{staticStyle:{"text-align":"center"}},[a("base-btn",{attrs:{plain:""},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),a("base-btn",{staticClass:"deliver-btn",on:{click:t.changeInfo}},[t._v("确定")])],1)],1)],1)},i=[],s=a("e9ff"),n=(a("e186"),a("08ba"),{components:{},props:{},data:function(){return{form:{goods_auction_id:"",end_at:"",max_price:""},dataDetails:{},pickerOptionsStart:{disabledDate:function(t){return t.getTime()<new Date((new Date).toLocaleDateString()).getTime()}},status:"",dialogVisible:!1,loading:!0,tableData:[],goodsInfo:{}}},computed:{},watch:{},created:function(){this.getAuctionData()},mounted:function(){},methods:{showComDialog:function(t){console.log("🚀 ~ file: details.vue ~ line 102 ~ showComDialog ~ item",t),this.dialogVisible=!0;(new Date).getTime();this.form={goods_auction_id:this.dataDetails.goods_auction_id,end_at:this.goodsInfo.end_at,max_price:this.goodsInfo.max_price}},changeInfo:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,o,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.goodsInfo.price,t.tableData.forEach((function(t){t.bid_coins>a&&(a=t.bid_coins)})),e.next=4,t.$post("/admin/goods-auction/update-end-time-and-max-price",t.form);case 4:o=e.sent,i=o.res,s=o.err,s?t.$message.error(s.msg||"出错啦"):(t.$message.success(i.msg||"出错啦"),t.dialogVisible=!1,t.getAuctionData());case 8:case"end":return e.stop()}}),e)})))()},getAuctionData:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,o,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t.$route.query.id,e.next=4,t.$get("/amdin/goods-auction/detail",{goods_auction_id:a});case 4:o=e.sent,i=o.res,s=o.err,t.dataDetails=i.data,t.goodsInfo=i.data.goods_info,t.tableData=i.data.goods_auction_bid_list,t.status=i.data.status,console.log("🚀 ~ file: details.vue ~ line 44 ~ getAuctionData ~ res, err",i,s),t.loading=!1;case 13:case"end":return e.stop()}}),e)})))()}}}),l=n,r=(a("dede"),a("cba8")),d=Object(r["a"])(l,o,i,!1,null,"2d247aac",null);e["default"]=d.exports},dede:function(t,e,a){"use strict";a("2c0a")}}]);