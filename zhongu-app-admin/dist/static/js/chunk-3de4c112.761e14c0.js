(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3de4c112"],{"133b":function(e,t,a){},"233b":function(e,t,a){},"4b39":function(e,t,a){"use strict";a("d757")},"4f7e":function(e,t,a){},5803:function(e,t,a){"use strict";a("c0c0")},"70b5":function(e,t,a){},9302:function(e,t,a){"use strict";var n=a("1c8b"),r=a("692f"),s=a("da10"),o=a("d7e1"),i=[].join,c=r!=Object,l=o("join",",");n({target:"Array",proto:!0,forced:c||!l},{join:function(e){return i.call(s(this),void 0===e?",":e)}})},"9a5b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"product-manage"},[a("base-tab",{attrs:{"tab-arr":e.tabArr},on:{changeTab:e.changeTab}}),"出售中的产品"==e.showType?a("SaleProduct"):e._e(),"我的仓库"==e.showType?a("MyStore"):e._e()],1)},r=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sale-product"},[a("Search",{on:{search:e.search}}),e.productData.length?a("List",{attrs:{"product-data":e.productData,pag:e.pag},on:{sizeChange:e.sizeChange,currentChange:e.currentChange}}):a("svg-icon",{staticClass:"empty-img",attrs:{"icon-class":"empty-img"}})],1)},o=[],i=a("e9ff"),c=(a("e186"),a("053b"),a("b4fb"),a("9302"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search-wrap"},[a("div",[a("el-input",{attrs:{clearable:"",size:"mini",maxlength:30},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.search},slot:"suffix"})]),a("el-select",{attrs:{size:"mini",clearable:"",placeholder:"剩余库存"},model:{value:e.form.inventory,callback:function(t){e.$set(e.form,"inventory",t)},expression:"form.inventory"}},[a("el-option",{attrs:{label:"剩余库存升序",value:"asc"}}),a("el-option",{attrs:{label:"剩余库存降序",value:"desc"}})],1),a("el-select",{attrs:{size:"mini",clearable:"",placeholder:"销量"},model:{value:e.form.sales_volume,callback:function(t){e.$set(e.form,"sales_volume",t)},expression:"form.sales_volume"}},[a("el-option",{attrs:{label:"销量从高到低",value:"desc"}}),a("el-option",{attrs:{label:"销量从低到高",value:"asc"}})],1),a("el-select",{attrs:{size:"mini",clearable:"",placeholder:"产品类型"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeArr,(function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1),a("div",{staticClass:"price"},[a("div",{staticClass:"price-wrap"},[a("el-input-number",{attrs:{controls:!1,size:"mini",max:999999,placeholder:"价格"},model:{value:e.form.minPrice,callback:function(t){e.$set(e.form,"minPrice",t)},expression:"form.minPrice"}}),e._v(" 至 "),a("el-input-number",{attrs:{controls:!1,size:"mini",max:999999,placeholder:"价格"},model:{value:e.form.maxPrice,callback:function(t){e.$set(e.form,"maxPrice",t)},expression:"form.maxPrice"}})],1),a("base-btn",{staticClass:"confirm-btn",on:{click:e.search}},[e._v("确认")])],1)],1),a("div",[a("base-btn",{staticClass:"new-btn",on:{click:e.toAdd}},[e._v("新建产品")])],1)])}),l=[],u={components:{},props:{},data:function(){return{form:{name:"",type:"",minPrice:void 0,maxPrice:void 0,inventory:null,on_at:null,sales_volume:null},typeArr:[{label:"全部",value:""},{label:"单品",value:"单品"},{label:"盲盒",value:"盲盒"},{label:"竞拍",value:"竞拍"}]}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{toAdd:function(){this.$router.push({path:"/new-product"})},search:function(){this.$emit("search",this.form)}}},m=u,p=(a("5803"),a("cba8")),f=Object(p["a"])(m,c,l,!1,null,"36a87e0d",null),h=f.exports,d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"product-list-wrap"},[a("div",{staticClass:"product-list-content"},[a("div",{staticClass:"batch-wrap"},[a("base-btn",{on:{click:e.batchChange}},[e._v("批量下架")])],1),a("el-table",{ref:"multipleTable",attrs:{data:e.productData,border:"",stripe:"",height:"calc(100vh - 360px)"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"产品图",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("base-image",{attrs:{src:t.row.main_img}}),a("p",{staticClass:"pro-name"},[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{prop:"type",label:"产品类型"}}),a("el-table-column",{attrs:{prop:"id",label:"产品ID"}}),a("el-table-column",{attrs:{prop:"price",label:"产品价格"}}),a("el-table-column",{attrs:{prop:"inventory",label:"库存数量"}}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("base-btn",{attrs:{type:"text"},on:{click:function(a){return e.toEdit(t.row.id)}}},[e._v("编辑产品")]),a("base-btn",{staticClass:"del-btn",attrs:{type:"text"},on:{click:function(a){return e.changeStatus(t.row.id)}}},[e._v("下架产品")])]}}])})],1)],1),a("base-pag",{attrs:{page:e.pag.page,limit:e.pag.limit,total:e.pag.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},g=[],b=(a("e18c"),a("96db"),a("af86"),{components:{},props:{productData:{type:Array,default:function(){return[]}},pag:{type:Object,default:function(){return{}}}},data:function(){return{productId:[]}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{toEdit:function(e){this.$router.push({path:"/edit-product",query:{id:e}})},handleSizeChange:function(e){this.$emit("sizeChange",e)},handleCurrentChange:function(e){this.$emit("currentChange",e)},changeStatus:function(e){var t=this;this.$confirm("确认要下架该产品吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=t.confirm(e);a.then((function(){t.$message({type:"success",message:"下架成功"}),t.$emit("currentChange",1)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},confirm:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$put("/admin/goods/".concat(e,"/status"),{status:"已下架"});case 2:n=a.sent,r=n.err,n.res,r&&t.$message.error(r.msg);case 6:case"end":return a.stop()}}),a)})))()},handleSelectionChange:function(e){this.productId=e},batchChange:function(){var e=this,t=[];if(this.productId.length){for(var a=0;a<this.productId.length;a++){var n=this.confirm(this.productId[a].id);t.push(n)}Promise.all(t).then((function(){e.$message({type:"success",message:"下架成功"}),e.$emit("currentChange",1)}))}else this.$message.error("请选择需要下架的产品")}}}),v=b,y=(a("c6ec"),Object(p["a"])(v,d,g,!1,null,"4546fd88",null)),x=y.exports,C={components:{Search:h,List:x},props:{},data:function(){return{productData:[],form:{},pag:{page:1,limit:20,total:0}}},computed:{},watch:{},created:function(){this.getGoodsData()},mounted:function(){},methods:{search:function(e){this.pag.page=1,this.form=e,this.getGoodsData()},setParams:function(){return{name:this.form.name,type:this.form.type,status:"已上架",sort:this.getSortParams(),price:this.getPriceParams(),page:this.pag.page,limit:this.pag.limit}},getSortParams:function(){var e=this,t=["inventory","on_at","sales_volume"],a=[];return t.forEach((function(t){e.form[t]&&a.push("".concat(t,",").concat(e.form[t]))})),a.join("|")},getPriceParams:function(){return this.form.minPrice||this.form.maxPrice?(this.form.minPrice||"")+"|"+(this.form.maxPrice||""):""},getGoodsData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.setParams(),t.next=3,e.$get("/admin/goods",a);case 3:if(n=t.sent,r=n.err,s=n.res,!r){t.next=9;break}return e.$message.error(r.msg),t.abrupt("return");case 9:e.productData=s.data.list,e.pag.total=s.data.total;case 11:case"end":return t.stop()}}),t)})))()},sizeChange:function(e){this.pag.limit=e,this.getGoodsData()},currentChange:function(e){this.pag.page=e,this.getGoodsData()}}},_=C,w=(a("4b39"),Object(p["a"])(_,s,o,!1,null,"02d0aad3",null)),$=w.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-store"},[a("Search",{on:{search:e.search}}),e.productData.length?a("List",{attrs:{"product-data":e.productData,pag:e.pag},on:{sizeChange:e.sizeChange,currentChange:e.currentChange}}):a("svg-icon",{staticClass:"empty-img",attrs:{"icon-class":"empty-img"}})],1)},P=[],S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search-wrap"},[a("el-input",{attrs:{clearable:"",size:"mini",maxlength:30},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.search},slot:"suffix"})]),a("el-select",{attrs:{size:"mini",clearable:"",placeholder:"剩余库存"},model:{value:e.form.inventory,callback:function(t){e.$set(e.form,"inventory",t)},expression:"form.inventory"}},[a("el-option",{attrs:{label:"剩余库存升序",value:"asc"}}),a("el-option",{attrs:{label:"剩余库存降序",value:"desc"}})],1),a("el-select",{attrs:{size:"mini",clearable:"",placeholder:"销量"},model:{value:e.form.sales_volume,callback:function(t){e.$set(e.form,"sales_volume",t)},expression:"form.sales_volume"}},[a("el-option",{attrs:{label:"销量从高到低",value:"desc"}}),a("el-option",{attrs:{label:"销量从低到高",value:"asc"}})],1),a("el-select",{attrs:{size:"mini",clearable:"",placeholder:"产品类型"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeArr,(function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1),a("el-date-picker",{attrs:{size:"mini",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}}),a("div",{staticClass:"price"},[a("div",{staticClass:"price-wrap"},[a("el-input-number",{attrs:{controls:!1,size:"mini",max:999999,placeholder:"价格"},model:{value:e.form.minPrice,callback:function(t){e.$set(e.form,"minPrice",t)},expression:"form.minPrice"}}),e._v(" 至 "),a("el-input-number",{attrs:{controls:!1,size:"mini",max:999999,placeholder:"价格"},model:{value:e.form.maxPrice,callback:function(t){e.$set(e.form,"maxPrice",t)},expression:"form.maxPrice"}})],1),a("base-btn",{staticClass:"confirm-btn",on:{click:e.search}},[e._v("确认")])],1)],1)},z=[],D={components:{},props:{},data:function(){return{form:{name:"",type:"",minPrice:void 0,maxPrice:void 0,inventory:null,on_at:null,sales_volume:null,date:null},typeArr:[{label:"全部",value:""},{label:"单品",value:"单品"},{label:"盲盒",value:"盲盒"},{label:"竞拍",value:"竞拍"}]}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{search:function(){this.$emit("search",this.form)}}},j=D,O=(a("c587"),Object(p["a"])(j,S,z,!1,null,"3a00266c",null)),E=O.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"product-list-wrap"},[a("div",{staticClass:"product-list-content"},[a("div",{staticClass:"batch-wrap"},[a("base-btn",{on:{click:e.batchChange}},[e._v("批量上架")])],1),a("el-table",{ref:"multipleTable",attrs:{data:e.productData,border:"",stripe:"",height:"calc(100vh - 360px)"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"产品图",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("base-image",{attrs:{src:t.row.main_img}}),a("p",{staticClass:"pro-name"},[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{prop:"on_at",label:"上架时间",width:"180"}}),a("el-table-column",{attrs:{prop:"type",label:"产品类型"}}),a("el-table-column",{attrs:{prop:"id",label:"产品ID"}}),a("el-table-column",{attrs:{prop:"price",label:"产品价格"}}),a("el-table-column",{attrs:{prop:"inventory",label:"库存数量"}}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("base-btn",{attrs:{type:"text"},on:{click:function(a){return e.toEdit(t.row.id)}}},[e._v("编辑产品")]),a("base-btn",{attrs:{type:"text"},on:{click:function(a){return e.changeStatus(t.row.id)}}},[e._v("上架产品")]),a("base-btn",{staticClass:"del-btn",attrs:{type:"text"},on:{click:function(a){return e.deleteGood(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),a("base-pag",{attrs:{page:e.pag.page,limit:e.pag.limit,total:e.pag.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},G=[],I={components:{},props:{productData:{type:Array,default:function(){return[]}},pag:{type:Object,default:function(){return{}}}},data:function(){return{productId:[]}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{toEdit:function(e){this.$router.push({path:"/edit-product",query:{id:e}})},handleSizeChange:function(e){this.$emit("sizeChange",e)},handleCurrentChange:function(e){this.$emit("currentChange",e)},deleteGood:function(e){var t=this;this.$confirm("是否确认删除此商品?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.confirmDelete(e)})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},confirmDelete:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$deleteRun("/admin/goods/".concat(e));case 2:n=a.sent,r=n.err,n.res,r?t.$message.error(r.msg):(t.$message({type:"success",message:"删除成功"}),t.$emit("currentChange",1));case 6:case"end":return a.stop()}}),a)})))()},changeStatus:function(e){var t=this;this.$confirm("确认要上架该产品吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=t.confirm(e);a.then((function(){t.$message({type:"success",message:"上架成功"}),t.$emit("currentChange",1)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},confirm:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$put("/admin/goods/".concat(e,"/status"),{status:"已上架"});case 2:n=a.sent,r=n.err,n.res,r&&t.$message.error(r.msg);case 6:case"end":return a.stop()}}),a)})))()},handleSelectionChange:function(e){this.productId=e},batchChange:function(){var e=this,t=[];if(this.productId.length){for(var a=0;a<this.productId.length;a++){var n=this.confirm(this.productId[a].id);t.push(n)}Promise.all(t).then((function(){e.$message({type:"success",message:"上架成功"}),e.$emit("currentChange",1)}))}else this.$message.error("请选择需要上架的产品")}}},A=I,R=(a("d54b"),Object(p["a"])(A,T,G,!1,null,"1c22c124",null)),B=R.exports,L={components:{Search:E,List:B},props:{},data:function(){return{productData:[],form:{},pag:{page:1,limit:20,total:0}}},computed:{},watch:{},created:function(){this.getGoodsData()},mounted:function(){},methods:{search:function(e){this.pag.page=1,this.form=e,this.getGoodsData()},setParams:function(){return{name:this.form.name,type:this.form.type,status:"已下架,待上架",sort:this.getSortParams(),on_at:this.form.date?this.form.date.join("|"):null,price:this.getPriceParams(),page:this.pag.page,limit:this.pag.limit}},getSortParams:function(){var e=this,t=["inventory","on_at","sales_volume"],a=[];return t.forEach((function(t){e.form[t]&&a.push("".concat(t,",").concat(e.form[t]))})),a.join("|")},getPriceParams:function(){return this.form.minPrice||this.form.maxPrice?(this.form.minPrice||"")+"|"+(this.form.maxPrice||""):""},getGoodsData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.setParams(),t.next=3,e.$get("/admin/goods",a);case 3:if(n=t.sent,r=n.err,s=n.res,!r){t.next=9;break}return e.$message.error(r.msg),t.abrupt("return");case 9:e.productData=s.data.list,e.pag.total=s.data.total;case 11:case"end":return t.stop()}}),t)})))()},sizeChange:function(e){this.pag.limit=e,this.getGoodsData()},currentChange:function(e){this.pag.page=e,this.getGoodsData()}}},M=L,q=(a("c9e2"),Object(p["a"])(M,k,P,!1,null,"11f6d901",null)),J=q.exports,F={components:{SaleProduct:$,MyStore:J},props:{},data:function(){return{tabArr:["出售中的产品","我的仓库"],showType:"出售中的产品"}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{changeTab:function(e){this.showType=e}}},H=F,K=Object(p["a"])(H,n,r,!1,null,"2baab27c",null);t["default"]=K.exports},c0c0:function(e,t,a){},c587:function(e,t,a){"use strict";a("133b")},c6ec:function(e,t,a){"use strict";a("70b5")},c9e2:function(e,t,a){"use strict";a("233b")},d54b:function(e,t,a){"use strict";a("4f7e")},d757:function(e,t,a){}}]);