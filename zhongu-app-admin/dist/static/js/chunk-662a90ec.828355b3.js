(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-662a90ec"],{"50ed":function(e,t,r){},"531e":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"order-detail"},[r("base-tab",{attrs:{"tab-arr":e.tabArr}}),"待发货"===e.orderDetail.status?r("base-btn",{staticClass:"deliver-btn",on:{click:e.deliver}},[e._v("立即发货")]):e._e(),r("div",{staticClass:"detail-wrap"},[r("div",{staticClass:"order-base-wrap"},[r("p",[e._v("订单编号："+e._s(e.orderDetail.order_no))]),r("p",[e._v("订单日期："+e._s(e.orderDetail.created_at))])]),r("div",{staticClass:"order-product-wrap"},[r("div",{staticClass:"user-detail"},[r("p",[r("span",{staticClass:"title"},[e._v("收货人")]),e._v(" "),r("span",[e._v(e._s(e.orderDetail.info_snapshot?e.orderDetail.info_snapshot.user_address.name:"无"))])]),r("p",[r("span",{staticClass:"title"},[e._v("联系电话")]),e._v(" "),r("span",[e._v(e._s(e.orderDetail.info_snapshot&&e.orderDetail.info_snapshot.user_address?e.orderDetail.info_snapshot.user_address.phone:"无"))])]),r("p",[r("span",{staticClass:"title"},[e._v("收货地址")]),e._v(" "),r("span",[e._v(e._s(e.orderDetail.info_snapshot&&e.orderDetail.info_snapshot.user_address?e.orderDetail.info_snapshot.user_address.province:"")+" "+e._s(e.orderDetail.info_snapshot&&e.orderDetail.info_snapshot.user_address?e.orderDetail.info_snapshot.user_address.city:"")+" "+e._s(e.orderDetail.info_snapshot&&e.orderDetail.info_snapshot.user_address?e.orderDetail.info_snapshot.user_address.area:"")+" "+e._s(e.orderDetail.info_snapshot&&e.orderDetail.info_snapshot.user_address?e.orderDetail.info_snapshot.user_address.street:"")+" "+e._s(e.orderDetail.info_snapshot&&e.orderDetail.info_snapshot.user_address?e.orderDetail.info_snapshot.user_address.detail:""))])])]),r("div",{staticClass:"btn-wrap"},[r("p",[e._v("总计金额："+e._s((e.orderDetail.total_amount_fen/100).toFixed(0)))])]),r("div",{staticClass:"btn-wrap"},[r("p",[e._v(e._s(e.orderDetail.status))])])])]),e.orderDetail.info_snapshot?r("div",{staticClass:"product-wrap"},e._l(e.orderDetail.info_snapshot.goods_list,(function(t){return r("div",{key:t.id,staticClass:"product-item"},[r("base-image",{attrs:{src:t.main_img}}),r("div",{staticClass:"product-message"},[r("p",{staticClass:"message name"},[e._v(e._s(t.name))]),r("p",{staticClass:"message"},[e._v("数量："+e._s(t.goods_num))]),r("p",{staticClass:"message price"},[e._v("价格：￥"+e._s(t.price))]),r("p",{staticClass:"message number"},[e._v(e._s(t.number))])])],1)})),0):e._e(),r("base-dialog",{attrs:{show:e.dialogVisible,width:"500px",title:"立即发货"},on:{"update:show":function(t){e.dialogVisible=t}}},[r("Deliver",{attrs:{"product-id":e.$route.query.id},on:{close:e.close}})],1)],1)},s=[],n=r("e9ff"),i=(r("e186"),r("968f")),o={components:{Deliver:i["a"]},props:{},data:function(){return{tabArr:["订单详情"],orderDetail:{},dialogVisible:!1,loading:!1}},computed:{},watch:{},created:function(){this.getDetailData()},mounted:function(){},methods:{deliver:function(){this.dialogVisible=!0},getDetailData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,r={ids:e.$route.query.id},t.next=4,e.$get("/admin/goods-order",r);case 4:if(a=t.sent,s=a.err,n=a.res,!s){t.next=10;break}return e.$message.error(s.msg),t.abrupt("return");case 10:e.loading=!1,e.orderDetail=n.data.list[0];case 12:case"end":return t.stop()}}),t)})))()},close:function(){this.dialogVisible=!1,this.getDetailData()}}},c=o,d=(r("f688"),r("cba8")),l=Object(d["a"])(c,a,s,!1,null,"05ca6242",null);t["default"]=l.exports},"968f":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-deliver"},[r("el-form",{ref:"ruleForm",attrs:{model:e.form,inline:!0,rules:e.rules}},[r("el-form-item",{attrs:{label:"快递公司",prop:"tracking_code"}},[r("el-select",{attrs:{clearable:"",filterable:""},model:{value:e.form.tracking_code,callback:function(t){e.$set(e.form,"tracking_code",t)},expression:"form.tracking_code"}},e._l(e.companyData,(function(e){return r("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1),r("el-form-item",{attrs:{label:"快递单号",prop:"tracking_number"}},[r("el-input",{model:{value:e.form.tracking_number,callback:function(t){e.$set(e.form,"tracking_number",t)},expression:"form.tracking_number"}})],1)],1),r("base-btn",{staticClass:"deliver-btn",on:{click:e.commit}},[e._v("立即发货")])],1)},s=[],n=r("06c4"),i=r("e9ff"),o=(r("e186"),r("513c"),r("4194"),r("053b"),{components:{},props:{productId:{type:Number,default:function(){return null}}},data:function(){return{form:{tracking_number:null,tracking_code:null},rules:{tracking_code:[{required:!0,message:"请选择快递公司",trigger:"change"}],tracking_number:[{required:!0,message:"请输入快递单号",trigger:"blur"}]},companyData:[]}},computed:{tracking_company:function(){var e=this,t=this.companyData.find((function(t){return t.code===e.form.tracking_code}));return t.name||""}},watch:{},created:function(){this.getCompanyData()},mounted:function(){},methods:{getCompanyData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$get("/configs/kuaidi");case 2:if(r=t.sent,a=r.err,s=r.res,!a){t.next=8;break}return e.$message.error(a.msg),t.abrupt("return");case 8:e.companyData=s.data.list;case 9:case"end":return t.stop()}}),t)})))()},commit:function(){var e=this;this.$refs["ruleForm"].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.submit()}))},submit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={status:"运输中",tracking:Object(n["a"])({tracking_company:e.tracking_company},e.form)},t.next=3,e.$put("/admin/goods-order/".concat(e.productId,"/status"),r);case 3:if(a=t.sent,s=a.err,a.res,!s){t.next=9;break}return e.$message.error(s.msg),t.abrupt("return");case 9:e.$emit("close");case 10:case"end":return t.stop()}}),t)})))()}}}),c=o,d=(r("ec8f"),r("cba8")),l=Object(d["a"])(c,a,s,!1,null,"7d988098",null);t["a"]=l.exports},e2be:function(e,t,r){},ec8f:function(e,t,r){"use strict";r("50ed")},f688:function(e,t,r){"use strict";r("e2be")}}]);