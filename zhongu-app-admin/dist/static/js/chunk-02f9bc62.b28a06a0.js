(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02f9bc62"],{"0879":function(e,t,n){"use strict";n("67f8")},"2d18":function(e,t,n){"use strict";n("ac96")},"39e7":function(e,t,n){"use strict";n("5ca3")},5360:function(e,t,n){},5362:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[n("div",{staticClass:"btns"},[n("el-button",{staticStyle:{width:"100px"},attrs:{disabled:e.btnLoading,type:"primary",size:"mini"},on:{click:e.save}},[e._v("保存")])],1),e.loading?e._e():n("div",{staticClass:"home-app-manage-wrap "},[n("ComSelect"),n("ViewApp"),n("AppDetails")],1)])},r=[],c=n("e9ff"),i=(n("e18c"),n("af86"),n("e186"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"com-select-wrap"},[n("BaseTitle",{staticClass:"base-title",attrs:{title:"组件管理"}}),n("div",{staticClass:"com-list-wrap"},e._l(e.comList,(function(t,a){return n("div",{key:a,staticClass:"com-list",on:{click:function(n){return e.add(t.layout)}}},[n("ComIcon",{attrs:{layout:t.layout}}),n("div",{staticClass:"name"},[e._v(e._s(t.name))]),n("i",{staticClass:"drap"},[e._v("添加")])],1)})),0)],1)}),o=[],s=n("06c4"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"com-icon"},[n("div",{staticClass:"item"},e._l(e.layout[0],(function(e,t){return n("div",{key:t,staticClass:"block block-1"})})),0),n("div",{staticClass:"item"},e._l(e.layout[1],(function(e,t){return n("div",{key:t,staticClass:"block block-2"})})),0)])},l=[],p={props:{layout:{type:Array,default:function(){return[1,3]}}}},d=p,f=(n("7105"),n("cba8")),m=Object(f["a"])(d,u,l,!1,null,"47cda578",null),b=m.exports,g=n("cf95"),h=n("52c1"),v={components:{ComIcon:b},props:{},data:function(){return{comList:[{name:"1x4分类组件",layout:[1,4]},{name:"1x3分类组件",layout:[1,3]},{name:"1x2分类组件",layout:[1,2]}]}},computed:Object(s["a"])({},Object(h["c"])("bdapp",["appData","activeComName"])),watch:{},created:function(){},mounted:function(){},methods:{add:function(e){var t=e[1],n=Object(g["c"])(t);this.$store.commit("bdapp/ADD_SINGLE",n)}}},_=v,k=(n("e3dc"),Object(f["a"])(_,i,o,!1,null,"520e0559",null)),D=k.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"view-app-edit-wrap"},[n("div",{staticClass:"edit-pad",style:e.phoneStyle},e._l(e.appData,(function(t,a){return n(a,{key:a,tag:"component",class:{"hander-select":"Single"!==a,active:e.activeComName===a},nativeOn:{click:function(t){return e.selectCom(a)}}})})),1)])},w=[],S=(n("96db"),{components:{HeaderBanner:function(){return Promise.all([n.e("chunk-d70fa6ee"),n.e("chunk-5da5e0f8")]).then(n.bind(null,"a4cc"))},BuiltBtns:function(){return n.e("chunk-c490e284").then(n.bind(null,"f0ff"))},WeekUpdate:function(){return n.e("chunk-311a3bba").then(n.bind(null,"fb80"))},Single:function(){return Promise.all([n.e("chunk-d70fa6ee"),n.e("chunk-1098f9b6")]).then(n.bind(null,"cbf6"))}},props:{},data:function(){return{phoneStyle:{width:"375px",height:"812px"}}},computed:Object(s["a"])({},Object(h["c"])("bdapp",["appData","activeComName"])),watch:{},created:function(){},mounted:function(){},methods:{selectCom:function(e){this.$store.commit("bdapp/SET_ACTIVE_COM",e)}}}),O=S,E=(n("0879"),Object(f["a"])(O,C,w,!1,null,"2a302150",null)),A=E.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-details-wrap"},[n(e.comActive,{tag:"component",staticClass:"hander-select"}),n("ComDialog")],1)},B=[],N={components:{ComDialog:function(){return n.e("chunk-ed41948c").then(n.bind(null,"2401"))},EditHeaderBanner:function(){return Promise.all([n.e("chunk-9b01fd88"),n.e("chunk-17c40636")]).then(n.bind(null,"0a91"))},EditWeekUpdate:function(){return n.e("chunk-2cd9b431").then(n.bind(null,"eda4"))},EditSingle:function(){return n.e("chunk-a227d7d6").then(n.bind(null,"9db3"))},EditBuiltBtns:function(){return n.e("chunk-3e351f8b").then(n.bind(null,"2ea1"))}},props:{},data:function(){return{}},computed:Object(s["a"])(Object(s["a"])({},Object(h["c"])("bdapp",["appData","activeComName"])),{},{comActive:function(){var e={HeaderBanner:"EditHeaderBanner",BuiltBtns:"EditBuiltBtns",WeekUpdate:"EditWeekUpdate",Single:"EditSingle"};return e[this.activeComName]}}),watch:{},created:function(){},mounted:function(){},methods:{}},x=N,T=(n("2d18"),Object(f["a"])(x,y,B,!1,null,"539c06e8",null)),j=T.exports,P=(n("ea69"),n("eca5")),$=(n("b705"),"ZHONGU_APP_DATA_V1"),G={state:{newVersion:!0,appData:{},appDataCopy:{},activeComName:"HeaderBanner",singleIndex:-1,showComDialog:!1,upCom:0},getters:{},mutations:{SET_NEW_VERSION:function(e,t){e.newVersion=t},SET_ZHONGGU_APP_DATA:function(e,t){e.appData=t,e.upCom++},SET_ZHONGGU_APP_DATA_COPY:function(e,t){e.appDataCopy=t},SET_ACTIVE_COM:function(e,t){e.activeComName=t},SET_SINGLE_INDEX:function(e,t){e.singleIndex=t},SHOW_COM_DIALOG:function(e,t){e.showComDialog=t},ADD_SINGLE:function(e,t){e.appData.Single.push(t)},DEL_SINGLE:function(e,t){e.appData.Single.splice(t,1)}},actions:{GetZhongguAppData:function(e){var t=e.commit;return new Promise((function(e,n){Object(P["b"])("/configs/key/".concat($)).then((function(n){if(n.err&&"3002"===n.err.code)t("SET_ZHONGGU_APP_DATA",g["a"]),t("SET_NEW_VERSION",!0),e(g["a"]);else if("0000"===n.res.code){var a=JSON.parse(n.res.data.content);t("SET_ZHONGGU_APP_DATA",a),t("SET_NEW_VERSION",!1),e(a)}})).catch((function(e){console.log(e),n(e)}))}))},PostZhongguAppData:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.commit,n=e.state,a=n.appData,console.log("🚀 ~ file: app-data.js ~ line 78 ~ PostZhongguAppData ~ appData",a),r={key:$,memo:"测试数据",content:JSON.stringify(a)},n.newVersion){t.next=8;break}return t.abrupt("return",new Promise((function(e,t){Object(P["d"])("/admin/configs/key/".concat($),r).then((function(t){e(t)})).catch((function(e){t(e)}))})));case 8:return t.abrupt("return",new Promise((function(e,t){Object(P["c"])("/admin/configs",r).then((function(t){e(t)})).catch((function(e){t(e)}))})));case 9:case"end":return t.stop()}}),t)})))()}}},H=Object(s["a"])({},G.state),I=Object(s["a"])({},G.mutations),U=Object(s["a"])({},G.actions),L={namespaced:!0,state:H,mutations:I,actions:U},R={name:"HomeAppManage",components:{ComSelect:D,ViewApp:A,AppDetails:j},props:{},data:function(){return{btnLoading:!1,loading:!0}},computed:{},watch:{},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$store.dispatch("bdapp/GetZhongguAppData");case 3:n=t.sent,e.$store.commit("bdapp/SET_ZHONGGU_APP_DATA_COPY",e.$lodash.cloneDeep(n)),e.$store.commit("bdapp/SET_ACTIVE_COM","HeaderBanner"),e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()},beforeCreate:function(){this.$store.registerModule("bdapp",L)},beforeDestroy:function(){this.$store.unregisterModule("bdapp")},mounted:function(){},methods:{save:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.$store.state.bdapp.appData,console.log("🚀 ~ file: index.vue ~ line 73 ~ save ~ appData",n),a="",t.t0=regeneratorRuntime.keys(n);case 4:if((t.t1=t.t0()).done){t.next=12;break}if(r=t.t1.value,a=Object(g["e"])(n,r),!a){t.next=10;break}return e.$message({type:"warning",message:a}),t.abrupt("break",12);case 10:t.next=4;break;case 12:if(!a){t.next=14;break}return t.abrupt("return");case 14:e.$confirm("此操作将立即更新线上数据，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(c["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.btnLoading=!0,t.next=3,e.$store.dispatch("bdapp/PostZhongguAppData");case 3:n=t.sent,n.err?e.$message({type:"warning",message:"更新失败!"}):(e.$message({type:"success",message:"更新成功!"}),a=e.$store.state.bdapp.appData,e.$store.commit("bdapp/SET_ZHONGGU_APP_DATA_COPY",e.$lodash.cloneDeep(a))),e.btnLoading=!1;case 6:case"end":return t.stop()}}),t)})))).catch((function(){e.$message({type:"info",message:"已取消更新"})}));case 15:case"end":return t.stop()}}),t)})))()}}},V=R,M=(n("39e7"),Object(f["a"])(V,a,r,!1,null,null,null));t["default"]=M.exports},"5ca3":function(e,t,n){},"67f8":function(e,t,n){},7105:function(e,t,n){"use strict";n("a358")},a358:function(e,t,n){},ac96:function(e,t,n){},cf95:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return s}));var a=function(){return{bannerSrc:"",bannerSize:{width:678,height:252},subBannerSize:{width:300,height:400},subBannerFileName:"",subBannerSrc:"",bannerFileName:"",imgMergeUrl:"",imgMergeFileName:"",calssData:{},group:{}}},r=function(){return{title:"新谷上拍",subTitle:"In Vogue Color",list:[{calssData:{},group:{}},{calssData:{},group:{}},{calssData:{},group:{}}],classification:[{calssData:{},group:{}},{calssData:{},group:{}},{calssData:{},group:{}}]}},c=function(){return{}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;return{comType:e,title:"",subTitle:"",calssData:{},bannerSize:{width:678,height:300},banner:[{bannerSrc:"",bannerFileName:"",group:{},calssData:{}}],commodity:function(){for(var t=[],n=0;n<e;n++)t.push({group:{}});return t}()}},o={HeaderBanner:[a()],BuiltBtns:c(),WeekUpdate:r(),Single:[i()]},s=function(e,t){var n=e[t],a=function(e){var t=!1;for(var n in e)if(!e[n]){t=!0;break}return t},r=function(e){for(var t=e.list,n=e.classification,r="",c="",i=0;i<t.length;i++){var o=t[i];if(!o.group.id){c="请选择 新谷上拍 单品数据",console.warn(c);break}}for(var s=0;s<n.length;s++){var u=n[s];if(r=a(u),!u.calssData.id){r="请选择 新谷上拍 分类数据",console.warn(c);break}}return c||r},c=function(e){console.log("🚀 ~ file: base-com-data.js ~ line 144 ~ checkSingle ~ arr",e);for(var t="",n="",a=0;a<e.length;a++){var r=e[a].banner;console.log("🚀 ~ file: base-com-data.js ~ line 150 ~ checkSingle ~ bannerList",r);for(var c=e[a].commodity,i=0;i<r.length;i++){var o=r[i];if(console.log("🚀 ~ file: base-com-data.js ~ line 153 ~ checkSingle ~ data",o),!o.bannerSrc){t="请上传 单品 Banner 图",console.error("".concat(o,"请上传 单品 Banner 图"));break}if(!o.calssData.id){t="请选择 Banner 数据",console.error("".concat(o,"请选择 Banner 数据"));break}}for(var s=0;s<c.length;s++){var u=c[s];if(!u.group.id){n="请选择单品数据",console.error("".concat(u,"请选择单品数据"));break}}}return t||n},i=function(e){for(var n="",a=0;a<e.length;a++){var r=e[a];if(!r.bannerSrc){n="请上传 首页Banner 图",console.log("没有填写完整数据",r,t);break}if(!r.group&&!r.calssData){n="请选择 首页Banner 单品数据",console.log("没有填写完整数据",r,t);break}}return n},o=function(){return""},s={HeaderBanner:i,Single:c,BuiltBtns:o,WeekUpdate:r};return s[t](n)}},e3dc:function(e,t,n){"use strict";n("5360")},ea69:function(e,t,n){"use strict";var a=n("1c8b"),r=n("e1d6"),c=n("3da3"),i=n("d88d"),o=n("3553"),s=n("1ca1"),u=n("1bbd"),l=n("1ea7"),p=n("ff9c"),d=l("splice"),f=p("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,b=Math.min,g=9007199254740991,h="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!d||!f},{splice:function(e,t){var n,a,l,p,d,f,v=o(this),_=i(v.length),k=r(e,_),D=arguments.length;if(0===D?n=a=0:1===D?(n=0,a=_-k):(n=D-2,a=b(m(c(t),0),_-k)),_+n-a>g)throw TypeError(h);for(l=s(v,a),p=0;p<a;p++)d=k+p,d in v&&u(l,p,v[d]);if(l.length=a,n<a){for(p=k;p<_-a;p++)d=p+a,f=p+n,d in v?v[f]=v[d]:delete v[f];for(p=_;p>_-a+n;p--)delete v[p-1]}else if(n>a)for(p=_-a;p>k;p--)d=p+a-1,f=p+n-1,d in v?v[f]=v[d]:delete v[f];for(p=0;p<n;p++)v[p+k]=arguments[p+2];return v.length=_-a+n,l}})}}]);